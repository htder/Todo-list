(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var n=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===n?new Date(t.getTime()):"number"==typeof t||"[object Number]"===n?new Date(t):("string"!=typeof t&&"[object String]"!==n||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function n(n){e(1,arguments);var o=t(n);return o.setHours(0,0,0,0),o}function o(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function r(n,r){e(1,arguments);var s=r||{},c=s.locale,a=c&&c.options&&c.options.weekStartsOn,i=null==a?0:o(a),l=null==s.weekStartsOn?i:o(s.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=t(n),u=d.getDay(),m=(u<l?7:0)+u-l;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}const s=function(e,t,n,o,r,s){const c={};return c.title=e,c.description=t,c.dueDate=n,c.completed=o,c.priority=r,c.project=s,c.due=function(){return`${e} due: ${n}`},c},c=function(e){const t={};return t.title=e,t},a={tasks:[s("Hello World","one two three","2022-01-21",!0,"high","Starter"),s("World Hello","one two three","2022-01-20",!1,"low","Starter"),s("One One One","One Hello","2022-09-17",!0,"middle","Starter")],projects:[c("Starter")]};let i=[],l=[],d=[];function u(){Array.from(document.querySelectorAll(".menu-button")).forEach((e=>e.classList.remove("active")))}document.querySelector(".sidebar").addEventListener("click",(t=>{if(u(),null===t.target.closest("a"))return;t.target.closest("a").classList.add("active");const o=t.target.classList.contains("today"),s=t.target.classList.contains("week"),c=t.target.classList.contains("home"),m=t.target.classList.contains("project");if(c&&(h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e)))),o){const t=[];a.tasks.forEach((o=>{(function(t,o){e(2,arguments);var r=n(t),s=n(o);return r.getTime()===s.getTime()})(new Date(o.dueDate),new Date)&&t.push(o)})),l=t,h.removeAllTasks(),l.forEach((e=>h.addTodoToView(e)))}if(s){const t=[];a.tasks.forEach((n=>{(function(t,n,o){e(2,arguments);var s=r(t,o),c=r(n,o);return s.getTime()===c.getTime()})(new Date(n.dueDate),new Date)&&t.push(n)})),i=t,h.removeAllTasks(),i.forEach((e=>h.addTodoToView(e)))}if(m){const e=t.target.closest(".nav-item").lastChild.childNodes[2].textContent;console.log(e);const n=[];a.tasks.forEach((t=>{t.project===e&&n.push(t)})),d=n,h.removeAllTasks(),d.forEach((e=>h.addTodoToView(e)))}})),function(){const e=document.querySelector(".project-modal"),t=document.querySelector(".new-project-button"),n=document.querySelector(".project-modal-close"),o=document.querySelector(".project-submit"),r=document.getElementById("new-project-form");t.addEventListener("click",(()=>{s()})),n.addEventListener("click",(()=>{i()})),o.addEventListener("click",(e=>{e.preventDefault();const t=r.title;if(m.checkTitle(t)){const e=c(t.value);a.projects.push(e),p.addProjectToView(e),m.clearForm(r),i()}}));const s=function(){e.classList.remove("hide"),e.classList.add("show")},i=function(){e.classList.remove("show"),e.classList.add("hide")}}();const m={checkTitle:e=>{let t=!1;return""===e.value.trim()?e.classList.add("error"):(e.classList.remove("error"),t=!0),t},clearForm:e=>{e.title.value=""}},p=function(){const e=document.querySelector(".project-menu"),t=document.querySelector(".form-project-selector");return{addProjectToView:t=>{e.appendChild((e=>{const t=`\n      <a href="#" class="nav-link menu-button link-dark rounded project">\n        <img\n          class="bi me-2 project"\n          width="16"\n          height="16"\n          src="../icons/arrow-right-short.svg"\n        /><span class="d-none d-sm-inline project">${e.title}</span></a\n      >`,n=document.createElement("li");return n.classList="nav-item m-1",n.innerHTML=t,n})(t))},addProjectToTodoSelectorForm:()=>{let e="";a.projects.forEach((t=>{e+=`<option>${t.title}</option>`})),t.innerHTML=e}}}(),f=(function(){const e=document.querySelector(".task-modal"),t=document.querySelector(".todo-new-task"),n=document.querySelector(".todo-modal-close"),o=document.getElementById("new-todo-form"),r=document.querySelector(".todo-submit");t.addEventListener("click",(()=>{p.addProjectToTodoSelectorForm(),c()})),n.addEventListener("click",(()=>{i()})),r.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".form-project-selector"),n=o.title,r=o.description,c=o.dueDate,l=t.options[t.selectedIndex].value,d=o.optradio.value;let u=f.checkTitle(n),m=f.checkDescription(r),p=f.checkDate(c);if(u&&m&&p){const e=s(n.value,r.value,c.value,!1,d,l);a.tasks.push(e),h.addTodoToView(e),f.clearForm(o),i()}}));const c=()=>{e.classList.remove("hide"),e.classList.add("show")},i=()=>{e.classList.remove("show"),e.classList.add("hide")}}(),function(){const e=e=>""===e,t=(e,t)=>{document.querySelector(".dateError").textContent=t};return{checkTitle:t=>{let n=!1;const o=t.value.trim();return e(o)?("Title cannot be empty.",document.querySelector(".titleError").textContent="Title cannot be empty."):(document.querySelector(".titleError").textContent="",n=!0),n},checkDescription:t=>{let n=!1;const o=t.value.trim();return e(o)?("Description cannot be empty.",document.querySelector(".descError").textContent="Description cannot be empty."):(document.querySelector(".descError").textContent="",n=!0),n},checkDate:n=>{let o=!1;const r=n.value.trim();return e(r)&&t(0,"Due date cannot be empty"),(e=>{const t=new Date(`${e}`),[n,o,r]=e.split("-"),s=new Date,c=s.getDate(),a=s.getMonth()+1;return!(+n===s.getFullYear()&&+o===a&&+r===c||t>s)})(r)?t(0,"Due date must be in the future."):(document.querySelector(".dateError").textContent="",o=!0),o},clearForm:e=>{e.title.value="",e.description.value="",e.dueDate.value=""}}}()),h=function(){const e=document.querySelector(".todo-container");return{addTodoToView:t=>{e.appendChild((e=>{const t=`\n    <div\n    class="col-md-1 py-1 d-flex justify-content-md-end justify-content-center"\n  >\n    <input type="checkbox" class="task-checkbox" ${e.completed?"checked":""}/>\n  </div>\n  <div\n    class="col-md-6 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.completed?`<del>${e.title}</del>`:`${e.title}`}\n  </div>\n    <div\n        class="col-md-1 d-flex align-items-center justify-md-start justify-content-center task-arrow"\n         >\n        <img\n         class="task-arrow-image-down"\n         width="16"\n         height="16"\n         src="../icons/caret-down.svg"\n         />\n    </div>\n  <div\n    class="col-md-2 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.dueDate}\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n      <img\n        class="task-edit"\n        width="16"\n        height="16"\n        src="../icons/pencil-square.svg"\n      />\n\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n      <img\n        class="task-delete"\n        width="16"\n        height="16"\n        src="../icons/trash.svg"\n      />\n  </div>`,n=document.createElement("div");return n.classList="row m-4 p-2 bg-white rounded-3 border-bottom  "+("high"===e.priority?"red-border":"middle"===e.priority?"orange-border":"green-border"),n.innerHTML=t,n})(t))},removeAllTasks:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}}(),g=(function(){document.querySelector(".todo-main-container").addEventListener("click",(o=>{const r=o.target.classList.contains("task-checkbox"),s=o.target.classList.contains("task-arrow-image-down")||o.target.classList.contains("task-arrow-image-up"),c=o.target.classList.contains("task-edit"),i=o.target.classList.contains("task-delete"),l=document.querySelector(".home-active");if(r){const e=Array.from(o.target.parentNode.parentNode.childNodes),t=e[3].textContent.trim(),n=e[7].textContent.trim(),r=a.tasks.filter((e=>e.title===t&&e.dueDate===n));r[0].completed=!r[0].completed,r[0].completed?e[3].innerHTML=`<del>${e[3].innerHTML}</del>`:e[3].innerHTML=e[3].innerHTML.replace(/(<([^>]+)>)/gi,"")}if(s){let r,s,c;if(o.target.classList.contains("task-arrow-image-down")){const t=Array.from(o.target.parentNode.parentNode.childNodes);let i=o.target.parentNode;c=o.target.parentNode.parentNode,console.log(t),console.log(c),r=t[3].textContent.trim(),s=t[7].textContent.trim(),i.innerHTML=e(),console.log(r,s);const l=a.tasks.filter((e=>e.title===r&&e.dueDate===s));console.log(l);const d=n(l);c.insertAdjacentElement("afterend",d)}if(o.target.classList.contains("task-arrow-image-up")){const e=Array.from(o.target.parentNode.parentNode.childNodes);let n=o.target.parentNode;c=o.target.parentNode.parentNode,r=e[3].textContent.trim(),s=e[7].textContent.trim(),n.innerHTML=t(),c.nextElementSibling.remove()}}if(c){const e=Array.from(o.target.parentNode.parentNode.childNodes);console.log(e);let t=e[3].textContent.trim(),n=e[7].textContent.trim();const r=a.tasks.filter((e=>e.title===t&&e.dueDate===n));console.log(r),g.fillForm(r),g.open()}if(i){const e=Array.from(o.target.parentNode.parentNode.childNodes);let t=e[3].textContent.trim(),n=e[7].textContent.trim();const r=a.tasks.filter((e=>e.title===t&&e.dueDate===n));let s;a.tasks.filter(((e,t)=>{r[0].title===e.title&&r[0].description===e.description&&r[0].dueDate===e.dueDate&&(s=t)})),a.tasks.splice(s,1),u(),l.classList.add("active"),h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e)))}}));const e=()=>'\n    <img\n        class="task-arrow-image-up"\n        width="16"\n        height="16"\n        src="../icons/caret-up.svg"\n    />',t=()=>'\n    <img\n        class="task-arrow-image-down"\n        width="16"\n        height="16"\n        src="../icons/caret-down.svg"\n    />',n=e=>{console.log(e);const t=`\n    <div class="container-fluid py-1">\n      <h6 class="fw-bold">Description</h6>\n      <p class="">\n      ${e[0].description}\n      </p>\n  </div>`,n=document.createElement("div");return n.classList="modal-body mx-5 my-3 bg-light rounded-3 border border-secondary p-3 rounded-3 description-div",n.innerHTML=t,n}}(),function(){const e=document.querySelector(".edit-modal"),t=document.getElementById("edit-modal-form"),n=document.querySelector(".edit-submit"),o=document.querySelector(".edit-cancel"),r=document.querySelector(".home-active");let c;const i=()=>{e.classList.remove("show"),e.classList.add("hide")};return o.addEventListener("click",(()=>{f.clearForm(t),i()})),n.addEventListener("click",(e=>{console.log(c),e.preventDefault();const n=t.title,o=t.description,l=t.dueDate;let d=f.checkTitle(n),m=f.checkDescription(o),p=f.checkDate(l);if(d&&m&&p){console.log(c);const e=s(n.value,o.value,l.value,c[0].completed,c[0].priority,c[0].project);let d;console.log(e),a.tasks.filter(((e,t)=>{c[0].title===e.title&&c[0].description===e.description&&c[0].dueDate===e.dueDate&&(d=t)})),a.tasks.splice(d,1,e),f.clearForm(t),u(),r.classList.add("active"),h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e))),i()}})),{open:()=>{e.classList.remove("hide"),e.classList.add("show")},close:i,fillForm:e=>{c=e,console.log(c),t.title.value=e[0].title,t.description.value=e[0].description,t.dueDate.value=e[0].dueDate}}}());a.projects.forEach((e=>p.addProjectToView(e))),a.tasks.forEach((e=>h.addTodoToView(e)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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TTlCLFVBQVVPLElBQUksU0F3RVBxRCxNQUFBQSxFQUFPOEMsU0FoRUoxSCxJQUNoQmlJLEVBQWNqSSxFQUNkckMsUUFBUWtGLElBQUlvRixHQUNaL0UsRUFBWSxNQUFFUSxNQUFRMUQsRUFBSyxHQUFHTixNQUM5QndELEVBQWtCLFlBQUVRLE1BQVExRCxFQUFLLEdBQUdMLFlBQ3BDdUQsRUFBYyxRQUFFUSxNQUFRMUQsRUFBSyxHQUFHSixVQXpCZCxJQXVGdEJPLEVBQU1FLFNBQVNTLFNBQVNmLEdBQVk0RCxFQUFnQkMsaUJBQWlCN0QsS0FDckVJLEVBQU1DLE1BQU1VLFNBQVNkLEdBQVM0QixFQUFTRSxjQUFjOUIsTSIsInNvdXJjZXMiOlsid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS90b0RhdGUvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mRGF5L2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL25vZGVfbW9kdWxlcy9kYXRlLWZucy9lc20vX2xpYi90b0ludGVnZXIvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9zdGFydE9mV2Vlay9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvdGFzay5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvcHJvamVjdC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9zcmMvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9pc1NhbWVXZWVrL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHJlcXVpcmVkQXJncyhyZXF1aXJlZCwgYXJncykge1xuICBpZiAoYXJncy5sZW5ndGggPCByZXF1aXJlZCkge1xuICAgIHRocm93IG5ldyBUeXBlRXJyb3IocmVxdWlyZWQgKyAnIGFyZ3VtZW50JyArIChyZXF1aXJlZCA+IDEgPyAncycgOiAnJykgKyAnIHJlcXVpcmVkLCBidXQgb25seSAnICsgYXJncy5sZW5ndGggKyAnIHByZXNlbnQnKTtcbiAgfVxufSIsImltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG4vKipcbiAqIEBuYW1lIHRvRGF0ZVxuICogQGNhdGVnb3J5IENvbW1vbiBIZWxwZXJzXG4gKiBAc3VtbWFyeSBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQ29udmVydCB0aGUgZ2l2ZW4gYXJndW1lbnQgdG8gYW4gaW5zdGFuY2Ugb2YgRGF0ZS5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgYW4gaW5zdGFuY2Ugb2YgRGF0ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgaXRzIGNsb25lLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhIG51bWJlciwgaXQgaXMgdHJlYXRlZCBhcyBhIHRpbWVzdGFtcC5cbiAqXG4gKiBJZiB0aGUgYXJndW1lbnQgaXMgbm9uZSBvZiB0aGUgYWJvdmUsIHRoZSBmdW5jdGlvbiByZXR1cm5zIEludmFsaWQgRGF0ZS5cbiAqXG4gKiAqKk5vdGUqKjogKmFsbCogRGF0ZSBhcmd1bWVudHMgcGFzc2VkIHRvIGFueSAqZGF0ZS1mbnMqIGZ1bmN0aW9uIGlzIHByb2Nlc3NlZCBieSBgdG9EYXRlYC5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBhcmd1bWVudCAtIHRoZSB2YWx1ZSB0byBjb252ZXJ0XG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHBhcnNlZCBkYXRlIGluIHRoZSBsb2NhbCB0aW1lIHpvbmVcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDbG9uZSB0aGUgZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZShuZXcgRGF0ZSgyMDE0LCAxLCAxMSwgMTEsIDMwLCAzMCkpXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBDb252ZXJ0IHRoZSB0aW1lc3RhbXAgdG8gZGF0ZTpcbiAqIGNvbnN0IHJlc3VsdCA9IHRvRGF0ZSgxMzkyMDk4NDMwMDAwKVxuICogLy89PiBUdWUgRmViIDExIDIwMTQgMTE6MzA6MzBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiB0b0RhdGUoYXJndW1lbnQpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBhcmdTdHIgPSBPYmplY3QucHJvdG90eXBlLnRvU3RyaW5nLmNhbGwoYXJndW1lbnQpOyAvLyBDbG9uZSB0aGUgZGF0ZVxuXG4gIGlmIChhcmd1bWVudCBpbnN0YW5jZW9mIERhdGUgfHwgdHlwZW9mIGFyZ3VtZW50ID09PSAnb2JqZWN0JyAmJiBhcmdTdHIgPT09ICdbb2JqZWN0IERhdGVdJykge1xuICAgIC8vIFByZXZlbnQgdGhlIGRhdGUgdG8gbG9zZSB0aGUgbWlsbGlzZWNvbmRzIHdoZW4gcGFzc2VkIHRvIG5ldyBEYXRlKCkgaW4gSUUxMFxuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudC5nZXRUaW1lKCkpO1xuICB9IGVsc2UgaWYgKHR5cGVvZiBhcmd1bWVudCA9PT0gJ251bWJlcicgfHwgYXJnU3RyID09PSAnW29iamVjdCBOdW1iZXJdJykge1xuICAgIHJldHVybiBuZXcgRGF0ZShhcmd1bWVudCk7XG4gIH0gZWxzZSB7XG4gICAgaWYgKCh0eXBlb2YgYXJndW1lbnQgPT09ICdzdHJpbmcnIHx8IGFyZ1N0ciA9PT0gJ1tvYmplY3QgU3RyaW5nXScpICYmIHR5cGVvZiBjb25zb2xlICE9PSAndW5kZWZpbmVkJykge1xuICAgICAgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcbiAgICAgIGNvbnNvbGUud2FybihcIlN0YXJ0aW5nIHdpdGggdjIuMC4wLWJldGEuMSBkYXRlLWZucyBkb2Vzbid0IGFjY2VwdCBzdHJpbmdzIGFzIGRhdGUgYXJndW1lbnRzLiBQbGVhc2UgdXNlIGBwYXJzZUlTT2AgdG8gcGFyc2Ugc3RyaW5ncy4gU2VlOiBodHRwczovL2dpdC5pby9manVsZVwiKTsgLy8gZXNsaW50LWRpc2FibGUtbmV4dC1saW5lIG5vLWNvbnNvbGVcblxuICAgICAgY29uc29sZS53YXJuKG5ldyBFcnJvcigpLnN0YWNrKTtcbiAgICB9XG5cbiAgICByZXR1cm4gbmV3IERhdGUoTmFOKTtcbiAgfVxufSIsImltcG9ydCB0b0RhdGUgZnJvbSBcIi4uL3RvRGF0ZS9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZkRheVxuICogQGNhdGVnb3J5IERheSBIZWxwZXJzXG4gKiBAc3VtbWFyeSBSZXR1cm4gdGhlIHN0YXJ0IG9mIGEgZGF5IGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIGRheVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIGRheSBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZEYXkobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gVHVlIFNlcCAwMiAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZkRheShkaXJ0eURhdGUpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIGRhdGUuc2V0SG91cnMoMCwgMCwgMCwgMCk7XG4gIHJldHVybiBkYXRlO1xufSIsImV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvSW50ZWdlcihkaXJ0eU51bWJlcikge1xuICBpZiAoZGlydHlOdW1iZXIgPT09IG51bGwgfHwgZGlydHlOdW1iZXIgPT09IHRydWUgfHwgZGlydHlOdW1iZXIgPT09IGZhbHNlKSB7XG4gICAgcmV0dXJuIE5hTjtcbiAgfVxuXG4gIHZhciBudW1iZXIgPSBOdW1iZXIoZGlydHlOdW1iZXIpO1xuXG4gIGlmIChpc05hTihudW1iZXIpKSB7XG4gICAgcmV0dXJuIG51bWJlcjtcbiAgfVxuXG4gIHJldHVybiBudW1iZXIgPCAwID8gTWF0aC5jZWlsKG51bWJlcikgOiBNYXRoLmZsb29yKG51bWJlcik7XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgdG9JbnRlZ2VyIGZyb20gXCIuLi9fbGliL3RvSW50ZWdlci9pbmRleC5qc1wiO1xuaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgc3RhcnRPZldlZWtcbiAqIEBjYXRlZ29yeSBXZWVrIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqXG4gKiBAZGVzY3JpcHRpb25cbiAqIFJldHVybiB0aGUgc3RhcnQgb2YgYSB3ZWVrIGZvciB0aGUgZ2l2ZW4gZGF0ZS5cbiAqIFRoZSByZXN1bHQgd2lsbCBiZSBpbiB0aGUgbG9jYWwgdGltZXpvbmUuXG4gKlxuICogIyMjIHYyLjAuMCBicmVha2luZyBjaGFuZ2VzOlxuICpcbiAqIC0gW0NoYW5nZXMgdGhhdCBhcmUgY29tbW9uIGZvciB0aGUgd2hvbGUgbGlicmFyeV0oaHR0cHM6Ly9naXRodWIuY29tL2RhdGUtZm5zL2RhdGUtZm5zL2Jsb2IvbWFzdGVyL2RvY3MvdXBncmFkZUd1aWRlLm1kI0NvbW1vbi1DaGFuZ2VzKS5cbiAqXG4gKiBAcGFyYW0ge0RhdGV8TnVtYmVyfSBkYXRlIC0gdGhlIG9yaWdpbmFsIGRhdGVcbiAqIEBwYXJhbSB7T2JqZWN0fSBbb3B0aW9uc10gLSBhbiBvYmplY3Qgd2l0aCBvcHRpb25zLlxuICogQHBhcmFtIHtMb2NhbGV9IFtvcHRpb25zLmxvY2FsZT1kZWZhdWx0TG9jYWxlXSAtIHRoZSBsb2NhbGUgb2JqZWN0LiBTZWUgW0xvY2FsZV17QGxpbmsgaHR0cHM6Ly9kYXRlLWZucy5vcmcvZG9jcy9Mb2NhbGV9XG4gKiBAcGFyYW0gezB8MXwyfDN8NHw1fDZ9IFtvcHRpb25zLndlZWtTdGFydHNPbj0wXSAtIHRoZSBpbmRleCBvZiB0aGUgZmlyc3QgZGF5IG9mIHRoZSB3ZWVrICgwIC0gU3VuZGF5KVxuICogQHJldHVybnMge0RhdGV9IHRoZSBzdGFydCBvZiBhIHdlZWtcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMSBhcmd1bWVudCByZXF1aXJlZFxuICogQHRocm93cyB7UmFuZ2VFcnJvcn0gYG9wdGlvbnMud2Vla1N0YXJ0c09uYCBtdXN0IGJlIGJldHdlZW4gMCBhbmQgNlxuICpcbiAqIEBleGFtcGxlXG4gKiAvLyBUaGUgc3RhcnQgb2YgYSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSlcbiAqIC8vPT4gU3VuIEF1ZyAzMSAyMDE0IDAwOjAwOjAwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHRoZSB3ZWVrIHN0YXJ0cyBvbiBNb25kYXksIHRoZSBzdGFydCBvZiB0aGUgd2VlayBmb3IgMiBTZXB0ZW1iZXIgMjAxNCAxMTo1NTowMDpcbiAqIGNvbnN0IHJlc3VsdCA9IHN0YXJ0T2ZXZWVrKG5ldyBEYXRlKDIwMTQsIDgsIDIsIDExLCA1NSwgMCksIHsgd2Vla1N0YXJ0c09uOiAxIH0pXG4gKiAvLz0+IE1vbiBTZXAgMDEgMjAxNCAwMDowMDowMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZSwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygxLCBhcmd1bWVudHMpO1xuICB2YXIgb3B0aW9ucyA9IGRpcnR5T3B0aW9ucyB8fCB7fTtcbiAgdmFyIGxvY2FsZSA9IG9wdGlvbnMubG9jYWxlO1xuICB2YXIgbG9jYWxlV2Vla1N0YXJ0c09uID0gbG9jYWxlICYmIGxvY2FsZS5vcHRpb25zICYmIGxvY2FsZS5vcHRpb25zLndlZWtTdGFydHNPbjtcbiAgdmFyIGRlZmF1bHRXZWVrU3RhcnRzT24gPSBsb2NhbGVXZWVrU3RhcnRzT24gPT0gbnVsbCA/IDAgOiB0b0ludGVnZXIobG9jYWxlV2Vla1N0YXJ0c09uKTtcbiAgdmFyIHdlZWtTdGFydHNPbiA9IG9wdGlvbnMud2Vla1N0YXJ0c09uID09IG51bGwgPyBkZWZhdWx0V2Vla1N0YXJ0c09uIDogdG9JbnRlZ2VyKG9wdGlvbnMud2Vla1N0YXJ0c09uKTsgLy8gVGVzdCBpZiB3ZWVrU3RhcnRzT24gaXMgYmV0d2VlbiAwIGFuZCA2IF9hbmRfIGlzIG5vdCBOYU5cblxuICBpZiAoISh3ZWVrU3RhcnRzT24gPj0gMCAmJiB3ZWVrU3RhcnRzT24gPD0gNikpIHtcbiAgICB0aHJvdyBuZXcgUmFuZ2VFcnJvcignd2Vla1N0YXJ0c09uIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2IGluY2x1c2l2ZWx5Jyk7XG4gIH1cblxuICB2YXIgZGF0ZSA9IHRvRGF0ZShkaXJ0eURhdGUpO1xuICB2YXIgZGF5ID0gZGF0ZS5nZXREYXkoKTtcbiAgdmFyIGRpZmYgPSAoZGF5IDwgd2Vla1N0YXJ0c09uID8gNyA6IDApICsgZGF5IC0gd2Vla1N0YXJ0c09uO1xuICBkYXRlLnNldERhdGUoZGF0ZS5nZXREYXRlKCkgLSBkaWZmKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiY29uc3QgVG9kb1Rhc2sgPSBmdW5jdGlvbiAoXG4gIHRpdGxlLFxuICBkZXNjcmlwdGlvbixcbiAgZHVlRGF0ZSxcbiAgY29tcGxldGVkLFxuICBwcmlvcml0eSxcbiAgcHJvamVjdFxuKSB7XG4gIGNvbnN0IHRhc2sgPSB7fTtcblxuICB0YXNrLnRpdGxlID0gdGl0bGU7XG4gIHRhc2suZGVzY3JpcHRpb24gPSBkZXNjcmlwdGlvbjtcbiAgdGFzay5kdWVEYXRlID0gZHVlRGF0ZTtcbiAgdGFzay5jb21wbGV0ZWQgPSBjb21wbGV0ZWQ7XG4gIHRhc2sucHJpb3JpdHkgPSBwcmlvcml0eTtcbiAgdGFzay5wcm9qZWN0ID0gcHJvamVjdDtcblxuICB0YXNrLmR1ZSA9IGZ1bmN0aW9uICgpIHtcbiAgICByZXR1cm4gYCR7dGl0bGV9IGR1ZTogJHtkdWVEYXRlfWA7XG4gIH07XG5cbiAgcmV0dXJuIHRhc2s7XG59O1xuXG5leHBvcnQgeyBUb2RvVGFzayB9O1xuIiwiY29uc3QgUHJvamVjdCA9IGZ1bmN0aW9uICh0aXRsZSkge1xuICBjb25zdCBwcm9qZWN0ID0ge307XG5cbiAgcHJvamVjdC50aXRsZSA9IHRpdGxlO1xuXG4gIHJldHVybiBwcm9qZWN0O1xufTtcblxuZXhwb3J0IHsgUHJvamVjdCB9O1xuIiwiLy8gVG9kbyBMaXN0IEl0ZW0gbmVlZHMgYTpcbi8vIC0gcHJvamVjdCBiZWxvbmdzIHRvXG4vLyAtIHRpdGxlXG4vLyAtIGRlc2NyaXB0aW9uXG4vLyAtIGR1ZSBkYXRlXG4vLyAtIGNvbXBsZXRlZCBjaGVjayBib3hcbi8vIC0gcmVkLCBvcmFuZ2Ugb3IgZ3JlZW4gZm9yIGRpZmZlcmVudCBwcmlvcml0aWVzXG5cbi8vIEZhY3RvcnkgZnVuY3Rpb24gZm9yIGEgdG9kbyBsaXN0IGl0ZW1cblxuLy8gUHJvamVjdCBuZWVkcyBhOlxuLy8gLSBsaXN0IG9mIHplcm8gb3IgbW9yZSB0b2RvIGl0ZW1zXG5cbi8vIEZhY3RvcnkgZnVuY3Rpb24gZm9yIGEgcHJvamVjdFxuXG4vLyBWaWV3czpcbi8vIC0gc2lkZWJhciB2aWV3XG4vLyAtIHByb2plY3Qgdmlld1xuLy8gLSBhbGwgdGFzayB2aWV3XG4vLyAtIHRvZGF5J3MgdGFza3Mgdmlld1xuLy8gLSB0aGlzIHdlZWsncyB0YXNrcyB2aWV3XG4vLyAtIHByb2plY3QncyB0YXNrcyB2aWV3XG5cbi8vIE1vZGFsczpcbi8vIC0gZWRpdCB0b2RvIGl0ZW1cbi8vIC0gY3JlYXRlIG5ldyB0b2RvIGl0ZW1cbi8vIC0gY3JlYXRlIG5ldyBwcm9qZWN0XG5cbi8vIFRvZG8gQ29udHJvbGxlcjpcbi8vIC0gZGVsZXRlIHRvZG9cbi8vIC0gc2hvdyBlZGl0IG1vZGFsXG4vLyAtIGV4cGFuZCBkZXRhaWxzXG5cbi8vIFByb2plY3QgQ29udHJvbGxlcjpcbi8vIC0gZGVsZXRlIHByb2plY3RcblxuLy9cbi8vXG4vL1xuLy9cbi8vIC8vIGNoYW5naW5nIGFjdGl2ZSBidXR0b24gb24gdGhlIG1lbnVcbi8vIC8vIGFkZGluZyBwcm9qZWN0IG1vZGFsIHdoZW4gbmV3IHByb2plY3QgaXMgcHJlc3NlZFxuLy8gLy8gYWRkaW5nIG5ldyB0b2RvIHRhc2sgbW9kYWwgd2hlbiBhZGQgYSBuZXcgcHJvamVjdCBpcyBwcmVzc2VkXG4vLyAvLyBkZWNpZGUgb24gaG93IGRhdGEgZm9yIHRhc2tzIGlzIHN0b3JlZFxuLy8gLy8gc3VibWl0dGluZyBwcm9qZWN0IG1vZGFsIGFkZHMgYSBuZXcgcHJvamVjdCAtIGhvdyBpcyBpdCBzdG9yZWQ/XG4vLyAvLyBzdWJtaXR0aW5nIHRvZG8gdGFzayBtb2RhbCBhZGRzIGEgbmV3IHRhc2sgLSBob3cgaXMgaXQgc3RvcmVkP1xuLy8gLy8gYWRkIGV2ZW50IGxpc3RlbmVycyB0byB0YXNrc1xuLy8gLy8gc2hvdyBkZXRhaWxzIHNsaWRlciB3aGVuIGRvd24gYXJyb3cgaXMgcHJlc3NlZFxuLy8gLy8gY2hhbmdlIGFycm93IGljb24gd2hlbiBkZXRhaWxzIGFyZSBzaG93aW5nIGFuZCB3aGVuIHRoZXkgYXJlIG5vdFxuLy8gLy8gY29tcGxldGluZyB0YXNrIC0gaG93IGRvZXMgaXQgaW50ZXJhY3Qgd2l0aCBkYXRhXG4vL1xuLy8gLy8gc3RyaWtlIHRocm91Z2ggdGhlIHRpdGxlIHdoZW4gdGhlIHRhc2sgaXMgY29tcGxldGVcbi8vIC8vIHNob3cgZWRpdCBzbGlkZXIgd2hlbiBlZGl0IGlzIHByZXNzZWRcbi8vIC8vIHNob3dpbmcgdGFzayBwcmlvcml0eSBjb2xvdXIgYXMgdGhlIGxlZnQgYm9yZGVyIGNvbG91ciBvZiB0aGUgdGFza1xuLy8gLy8gZGVsZXRlaW5nIHRhc2sgLSBob3cgZG9lcyBpdCBpbnRlcmFjdCB3aXRoIGRhdGFcbi8vIC8vIHBvcHVsYXRlIHRoZSB0b2RheSBhbmQgdGhpcyB3ZWVrIHZpZXdzIHdpdGggdGhlIGNvcnJlY3QgdGFza3Ncbi8vIC8vIHBvcHVsYXRlIGVhY2ggcHJvamVjdCB3aXRoIHRoZSBjb3JyZWN0IHRhc2tzXG4vLyBhZGQgbG9jYWxzdG9yYWdlIHRvIHByb2plY3Rcbi8vXG4vL1xuXG5pbXBvcnQgeyBpc1NhbWVXZWVrLCBpc1NhbWVEYXkgfSBmcm9tIFwiZGF0ZS1mbnNcIjtcblxuaW1wb3J0IHsgVG9kb1Rhc2sgfSBmcm9tIFwiLi90YXNrLmpzXCI7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdC5qc1wiO1xuXG5jb25zdCBtb2RlbCA9IHtcbiAgdGFza3M6IFtcbiAgICBUb2RvVGFzayhcbiAgICAgIFwiSGVsbG8gV29ybGRcIixcbiAgICAgIFwib25lIHR3byB0aHJlZVwiLFxuICAgICAgXCIyMDIyLTAxLTIxXCIsXG4gICAgICB0cnVlLFxuICAgICAgXCJoaWdoXCIsXG4gICAgICBcIlN0YXJ0ZXJcIlxuICAgICksXG4gICAgVG9kb1Rhc2soXG4gICAgICBcIldvcmxkIEhlbGxvXCIsXG4gICAgICBcIm9uZSB0d28gdGhyZWVcIixcbiAgICAgIFwiMjAyMi0wMS0yMFwiLFxuICAgICAgZmFsc2UsXG4gICAgICBcImxvd1wiLFxuICAgICAgXCJTdGFydGVyXCJcbiAgICApLFxuICAgIFRvZG9UYXNrKFxuICAgICAgXCJPbmUgT25lIE9uZVwiLFxuICAgICAgXCJPbmUgSGVsbG9cIixcbiAgICAgIFwiMjAyMi0wOS0xN1wiLFxuICAgICAgdHJ1ZSxcbiAgICAgIFwibWlkZGxlXCIsXG4gICAgICBcIlN0YXJ0ZXJcIlxuICAgICksXG4gIF0sXG4gIHByb2plY3RzOiBbUHJvamVjdChcIlN0YXJ0ZXJcIildLFxufTtcblxubGV0IHdlZWtzVGFza3MgPSBbXTtcbmxldCB0b2RheXNUYXNrcyA9IFtdO1xubGV0IHByb2plY3RUYXNrcyA9IFtdO1xuXG4vLyBjb25zdCBhZGROZXdUb2RvID0gKGZ1bmN0aW9uICgpIHtcbi8vICAgY29uc3QgdG9kb0NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1jb250YWluZXJcIik7XG5cbi8vICAgY29uc3QgYWRkTmV3VG9kb1ZpZXcgPSAoKSA9PiB7XG4vLyAgICAgY29uc3QgaHRtbCA9IGBcbi8vICAgICA8ZGl2IGNsYXNzPVwicm93IG0tNCBwLTIgcm91bmRlZCB0b2RvLW5ldy10YXNrXCIgaWQ9XCJ0b2RvLWhvdmVyXCI+XG4vLyAgICAgICA8ZGl2XG4vLyAgICAgICAgIGNsYXNzPVwiY29sLW1kLTEgcHktMSBkLWZsZXgganVzdGlmeS1jb250ZW50LW1kLWVuZCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlclwiXG4vLyAgICAgICA+XG4vLyAgICAgICAgIDxhPlxuLy8gICAgICAgICAgIDxpbWdcbi8vICAgICAgICAgICAgIGNsYXNzPVwiXCJcbi8vICAgICAgICAgICAgIHdpZHRoPVwiMTZcIlxuLy8gICAgICAgICAgICAgaGVpZ2h0PVwiMTZcIlxuLy8gICAgICAgICAgICAgc3JjPVwiLi4vaWNvbnMvcGx1cy1jaXJjbGUuc3ZnXCJcbi8vICAgICAgICAgICAvPlxuLy8gICAgICAgICA8L2E+XG4vLyAgICAgICA8L2Rpdj5cbi8vICAgICAgIDxkaXZcbi8vICAgICAgICAgY2xhc3M9XCJjb2wtbWQtNyBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbi8vICAgICAgID5cbi8vICAgICAgICAgQWRkIGEgbmV3IHRhc2shXG4vLyAgICAgICA8L2Rpdj5cbi8vICAgICA8L2Rpdj5gO1xuLy8gICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuLy8gICAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gXCJob3Zlci10b2RvLW5ldy10YXNrXCI7XG4vLyAgICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xuLy8gICAgIHJldHVybiBuZXdFbGVtZW50O1xuLy8gICB9O1xuLy8gICByZXR1cm4geyBhZGROZXdUb2RvVmlldyB9O1xuLy8gfSkoKTtcblxuLy8gYWRkTmV3VG9kby5hZGROZXdUb2RvVmlldygpO1xuXG5jb25zdCBtZW51Q29udHJvbGxlciA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHNpZGViYXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnNpZGViYXJcIik7XG5cbiAgc2lkZWJhci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgcmVtb3ZlQWN0aXZlKCk7XG4gICAgaWYgKGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiYVwiKSA9PT0gbnVsbCkgcmV0dXJuO1xuICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiYVwiKS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuXG4gICAgY29uc3QgdG9kYXlCdXR0b24gPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidG9kYXlcIik7XG4gICAgY29uc3Qgd2Vla0J1dHRvbiA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ3ZWVrXCIpO1xuICAgIGNvbnN0IGhvbWVCdXR0b24gPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwiaG9tZVwiKTtcbiAgICBjb25zdCBwcm9qZWN0ID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInByb2plY3RcIik7XG5cbiAgICBpZiAoaG9tZUJ1dHRvbikge1xuICAgICAgdG9kb1ZpZXcucmVtb3ZlQWxsVGFza3MoKTtcbiAgICAgIG1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcodGFzaykpO1xuICAgIH1cblxuICAgIGlmICh0b2RheUJ1dHRvbikge1xuICAgICAgY29uc3QgY3VycmVudFRhc2tzID0gW107XG4gICAgICBtb2RlbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGlmIChpc1NhbWVEYXkobmV3IERhdGUodGFzay5kdWVEYXRlKSwgbmV3IERhdGUoKSkpIHtcbiAgICAgICAgICBjdXJyZW50VGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB0b2RheXNUYXNrcyA9IGN1cnJlbnRUYXNrcztcbiAgICAgIHRvZG9WaWV3LnJlbW92ZUFsbFRhc2tzKCk7XG4gICAgICB0b2RheXNUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KHRhc2spKTtcbiAgICB9XG5cbiAgICBpZiAod2Vla0J1dHRvbikge1xuICAgICAgY29uc3QgY3VycmVudFRhc2tzID0gW107XG4gICAgICBtb2RlbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB7XG4gICAgICAgIGlmIChpc1NhbWVXZWVrKG5ldyBEYXRlKHRhc2suZHVlRGF0ZSksIG5ldyBEYXRlKCkpKSB7XG4gICAgICAgICAgY3VycmVudFRhc2tzLnB1c2godGFzayk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuICAgICAgd2Vla3NUYXNrcyA9IGN1cnJlbnRUYXNrcztcbiAgICAgIHRvZG9WaWV3LnJlbW92ZUFsbFRhc2tzKCk7XG4gICAgICB3ZWVrc1Rhc2tzLmZvckVhY2goKHRhc2spID0+IHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcodGFzaykpO1xuICAgIH1cblxuICAgIGlmIChwcm9qZWN0KSB7XG4gICAgICBjb25zdCBwcm9qZWN0TmFtZSA9XG4gICAgICAgIGV2ZW50LnRhcmdldC5jbG9zZXN0KFwiLm5hdi1pdGVtXCIpLmxhc3RDaGlsZC5jaGlsZE5vZGVzWzJdLnRleHRDb250ZW50O1xuICAgICAgY29uc29sZS5sb2cocHJvamVjdE5hbWUpO1xuXG4gICAgICAvLyBmaWx0ZXIgdGFza3Mgd2l0aCBwcm9qZWN0cyBuYW1lXG4gICAgICBjb25zdCBjdXJyZW50VGFza3MgPSBbXTtcbiAgICAgIG1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgaWYgKHRhc2sucHJvamVjdCA9PT0gcHJvamVjdE5hbWUpIHtcbiAgICAgICAgICBjdXJyZW50VGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICAvLyByZW5kZXIgdGFza3NcbiAgICAgIHByb2plY3RUYXNrcyA9IGN1cnJlbnRUYXNrcztcbiAgICAgIHRvZG9WaWV3LnJlbW92ZUFsbFRhc2tzKCk7XG4gICAgICBwcm9qZWN0VGFza3MuZm9yRWFjaCgodGFzaykgPT4gdG9kb1ZpZXcuYWRkVG9kb1RvVmlldyh0YXNrKSk7XG4gICAgfVxuICB9KTtcbn0pKCk7XG5cbmZ1bmN0aW9uIHJlbW92ZUFjdGl2ZSgpIHtcbiAgbGV0IGJ1dHRvbnMgPSBBcnJheS5mcm9tKGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3JBbGwoXCIubWVudS1idXR0b25cIikpO1xuICBidXR0b25zLmZvckVhY2goKGJ1dHRvbikgPT4gYnV0dG9uLmNsYXNzTGlzdC5yZW1vdmUoXCJhY3RpdmVcIikpO1xufVxuXG5jb25zdCBwcm9qZWN0TW9kYWwgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbFwiKTtcbiAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5uZXctcHJvamVjdC1idXR0b25cIik7XG4gIGNvbnN0IGNsb3NlTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbW9kYWwtY2xvc2VcIik7XG4gIGNvbnN0IHN1Ym1pdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1zdWJtaXRcIik7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcIm5ldy1wcm9qZWN0LWZvcm1cIik7XG5cbiAgb3Blbk1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgc2hvd01vZGFsKCk7XG4gIH0pO1xuXG4gIGNsb3NlTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBoaWRlTW9kYWwoKTtcbiAgfSk7XG5cbiAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRpdGxlID0gZm9ybVtcInRpdGxlXCJdO1xuICAgIGNvbnN0IHRpdGxlVmFsaWQgPSBwcm9qZWN0TW9kYWxWYWxpZGF0aW9uLmNoZWNrVGl0bGUodGl0bGUpO1xuICAgIGlmICh0aXRsZVZhbGlkKSB7XG4gICAgICAvLyBjcmVhdGUgcHJvamVjdFxuICAgICAgY29uc3QgbmV3UHJvamVjdCA9IFByb2plY3QodGl0bGUudmFsdWUpO1xuICAgICAgLy8gcHVzaCBwcm9qZWN0IHRvIHN0b3JhZ2VcbiAgICAgIG1vZGVsLnByb2plY3RzLnB1c2gobmV3UHJvamVjdCk7XG4gICAgICAvLyByZW5kZXIgcHJvamVjdFxuICAgICAgcHJvamVjdE1lbnVWaWV3LmFkZFByb2plY3RUb1ZpZXcobmV3UHJvamVjdCk7XG4gICAgICAvLyBjbGVhciBmb3JtXG4gICAgICBwcm9qZWN0TW9kYWxWYWxpZGF0aW9uLmNsZWFyRm9ybShmb3JtKTtcbiAgICAgIC8vIGNsb3NlIG1vZGFsXG4gICAgICBoaWRlTW9kYWwoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHNob3dNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgfTtcblxuICBjb25zdCBoaWRlTW9kYWwgPSBmdW5jdGlvbiAoKSB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gIH07XG59KSgpO1xuXG5jb25zdCBwcm9qZWN0TW9kYWxWYWxpZGF0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaXNSZXF1aXJlZCA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gXCJcIjtcbiAgfTtcblxuICBjb25zdCBzaG93RXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBpbnB1dC5jbGFzc0xpc3QuYWRkKFwiZXJyb3JcIik7XG4gIH07XG5cbiAgY29uc3Qgc2hvd1N1Y2Nlc3MgPSAoaW5wdXQpID0+IHtcbiAgICBpbnB1dC5jbGFzc0xpc3QucmVtb3ZlKFwiZXJyb3JcIik7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tUaXRsZSA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IHZhbGlkID0gZmFsc2U7XG4gICAgY29uc3QgdGl0bGUgPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoaXNSZXF1aXJlZCh0aXRsZSkpIHtcbiAgICAgIHNob3dFcnJvcihlbGVtZW50LCBcIlRpdGxlIGNhbm5vdCBiZSBlbXB0eS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dTdWNjZXNzKGVsZW1lbnQpO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgY2xlYXJGb3JtID0gKGZvcm0pID0+IHtcbiAgICBmb3JtW1widGl0bGVcIl0udmFsdWUgPSBcIlwiO1xuICB9O1xuICByZXR1cm4geyBjaGVja1RpdGxlLCBjbGVhckZvcm0gfTtcbn0pKCk7XG5cbmNvbnN0IHByb2plY3RNZW51VmlldyA9IChmdW5jdGlvbiAoKSB7XG4gIC8vIGFkZE5ld1RvZG8uYWRkTmV3VG9kb1ZpZXcoKTtcbiAgY29uc3QgcHJvamVjdE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbWVudVwiKTtcbiAgY29uc3QgZm9ybVByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXByb2plY3Qtc2VsZWN0b3JcIik7XG5cbiAgY29uc3QgYWRkUHJvamVjdFRvVmlldyA9IChwcm9qZWN0KSA9PiB7XG4gICAgcHJvamVjdE1lbnUuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdENvbXBvbmVudChwcm9qZWN0KSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdENvbXBvbmVudCA9IChwcm9qZWN0KSA9PiB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJuYXYtbGluayBtZW51LWJ1dHRvbiBsaW5rLWRhcmsgcm91bmRlZCBwcm9qZWN0XCI+XG4gICAgICAgIDxpbWdcbiAgICAgICAgICBjbGFzcz1cImJpIG1lLTIgcHJvamVjdFwiXG4gICAgICAgICAgd2lkdGg9XCIxNlwiXG4gICAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICAgIHNyYz1cIi4uL2ljb25zL2Fycm93LXJpZ2h0LXNob3J0LnN2Z1wiXG4gICAgICAgIC8+PHNwYW4gY2xhc3M9XCJkLW5vbmUgZC1zbS1pbmxpbmUgcHJvamVjdFwiPiR7cHJvamVjdC50aXRsZX08L3NwYW4+PC9hXG4gICAgICA+YDtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gXCJuYXYtaXRlbSBtLTFcIjtcbiAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH07XG5cbiAgY29uc3QgYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSA9ICgpID0+IHtcbiAgICBsZXQgaHRtbCA9IFwiXCI7XG4gICAgbW9kZWwucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaHRtbCArPSBgPG9wdGlvbj4ke3Byb2plY3QudGl0bGV9PC9vcHRpb24+YDtcbiAgICB9KTtcbiAgICBmb3JtUHJvamVjdExpc3QuaW5uZXJIVE1MID0gaHRtbDtcbiAgfTtcbiAgcmV0dXJuIHsgYWRkUHJvamVjdFRvVmlldywgYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSB9O1xufSkoKTtcblxuY29uc3QgdG9kb01vZGFsID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gYWRkTmV3VG9kby5hZGROZXdUb2RvVmlldygpO1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1tb2RhbFwiKTtcbiAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLW5ldy10YXNrXCIpO1xuICBjb25zdCBjbG9zZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLW1vZGFsLWNsb3NlXCIpO1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctdG9kby1mb3JtXCIpO1xuICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tc3VibWl0XCIpO1xuXG4gIG9wZW5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByb2plY3RNZW51Vmlldy5hZGRQcm9qZWN0VG9Ub2RvU2VsZWN0b3JGb3JtKCk7XG4gICAgb3BlbigpO1xuICB9KTtcblxuICBjbG9zZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2xvc2UoKTtcbiAgfSk7XG5cbiAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1Qcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXByb2plY3Qtc2VsZWN0b3JcIik7XG5cbiAgICAvLyBnZXQgZm9ybSBlbGVtZW50c1xuICAgIGNvbnN0IHRpdGxlID0gZm9ybVtcInRpdGxlXCJdO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybVtcImRlc2NyaXB0aW9uXCJdO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBmb3JtW1wiZHVlRGF0ZVwiXTtcbiAgICBjb25zdCBwcm9qZWN0ID1cbiAgICAgIGZvcm1Qcm9qZWN0U2VsZWN0Lm9wdGlvbnNbZm9ybVByb2plY3RTZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgY29uc3QgcHJpb3JpdHkgPSBmb3JtW1wib3B0cmFkaW9cIl0udmFsdWU7XG5cbiAgICAvLyB2YWxpZGF0ZSBmb3JtIGVsZW1lbnRzXG4gICAgbGV0IHRpdGxlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrVGl0bGUodGl0bGUpLFxuICAgICAgZGVzY3JpcHRpb25WYWxpZCA9IHRvZG9Nb2RhbFZhbGlkYXRpb24uY2hlY2tEZXNjcmlwdGlvbihkZXNjcmlwdGlvbiksXG4gICAgICBkYXRlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrRGF0ZShkdWVEYXRlKTtcblxuICAgIGxldCBpc0Zvcm1WYWxpZCA9IHRpdGxlVmFsaWQgJiYgZGVzY3JpcHRpb25WYWxpZCAmJiBkYXRlVmFsaWQ7XG4gICAgLy8gY29uc3QgdGl0bGVWYWxpZCA9IHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2hlY2tUaXRsZSh0aXRsZSk7XG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XG4gICAgICAvLyBjcmVhdGUgdG9kb1xuICAgICAgY29uc3QgbmV3VG9kbyA9IFRvZG9UYXNrKFxuICAgICAgICB0aXRsZS52YWx1ZSxcbiAgICAgICAgZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgIGR1ZURhdGUudmFsdWUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgcHJvamVjdFxuICAgICAgKTtcbiAgICAgIC8vIHB1c2ggdG9kbyB0byBzdG9yYWdlXG4gICAgICBtb2RlbC50YXNrcy5wdXNoKG5ld1RvZG8pO1xuICAgICAgLy8gcmVuZGVyIHRvZG9cbiAgICAgIHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcobmV3VG9kbyk7XG4gICAgICAvLyBjbGVhciBmb3JtXG4gICAgICB0b2RvTW9kYWxWYWxpZGF0aW9uLmNsZWFyRm9ybShmb3JtKTtcbiAgICAgIC8vIGNsb3NlIG1vZGFsXG4gICAgICBjbG9zZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgb3BlbiA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IHRvZG9Nb2RhbFZhbGlkYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBpc1JlcXVpcmVkID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IG5vdEluRnV0dXJlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgdGFza0RhdGUgPSBuZXcgRGF0ZShgJHt2YWx1ZX1gKTtcbiAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSB2YWx1ZS5zcGxpdChcIi1cIik7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGNEYXkgPSBjdXJyZW50RGF0ZS5nZXREYXRlKCk7XG4gICAgY29uc3QgY01vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgY29uc3QgY1llYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgaWYgKCt5ZWFyID09PSBjWWVhciAmJiArbW9udGggPT09IGNNb250aCAmJiArZGF5ID09PSBjRGF5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAhKHRhc2tEYXRlID4gY3VycmVudERhdGUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaG93VGl0bGVFcnJvciA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcblxuICBjb25zdCBzaG93RGVzY0Vycm9yID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NFcnJvclwiKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH07XG4gIGNvbnN0IHNob3dEYXRlRXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGF0ZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcblxuICBjb25zdCBzaG93VGl0bGVTdWNjZXNzID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IHNob3dEZXNjU3VjY2VzcyA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuICBjb25zdCBzaG93RGF0ZVN1Y2Nlc3MgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGF0ZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBjb25zdCBjaGVja1RpdGxlID0gKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0aXRsZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKHRpdGxlKSkge1xuICAgICAgc2hvd1RpdGxlRXJyb3IoZWxlbWVudCwgXCJUaXRsZSBjYW5ub3QgYmUgZW1wdHkuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93VGl0bGVTdWNjZXNzKGVsZW1lbnQpO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tEZXNjcmlwdGlvbiA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IHZhbGlkID0gZmFsc2U7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoaXNSZXF1aXJlZChkZXNjcmlwdGlvbikpIHtcbiAgICAgIHNob3dEZXNjRXJyb3IoZWxlbWVudCwgXCJEZXNjcmlwdGlvbiBjYW5ub3QgYmUgZW1wdHkuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93RGVzY1N1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjaGVja0RhdGUgPSAoZWxlbWVudCkgPT4ge1xuICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoaXNSZXF1aXJlZChkdWVEYXRlKSkge1xuICAgICAgc2hvd0RhdGVFcnJvcihlbGVtZW50LCBcIkR1ZSBkYXRlIGNhbm5vdCBiZSBlbXB0eVwiKTtcbiAgICB9XG4gICAgaWYgKG5vdEluRnV0dXJlKGR1ZURhdGUpKSB7XG4gICAgICBzaG93RGF0ZUVycm9yKGVsZW1lbnQsIFwiRHVlIGRhdGUgbXVzdCBiZSBpbiB0aGUgZnV0dXJlLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0RhdGVTdWNjZXNzKGVsZW1lbnQpO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgY2xlYXJGb3JtID0gKGZvcm0pID0+IHtcbiAgICBmb3JtW1widGl0bGVcIl0udmFsdWUgPSBcIlwiO1xuICAgIGZvcm1bXCJkZXNjcmlwdGlvblwiXS52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybVtcImR1ZURhdGVcIl0udmFsdWUgPSBcIlwiO1xuICB9O1xuICByZXR1cm4geyBjaGVja1RpdGxlLCBjaGVja0Rlc2NyaXB0aW9uLCBjaGVja0RhdGUsIGNsZWFyRm9ybSB9O1xufSkoKTtcblxuY29uc3QgdG9kb1ZpZXcgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcblxuICBjb25zdCByZW1vdmVBbGxUYXNrcyA9ICgpID0+IHtcbiAgICB3aGlsZSAodG9kb0NvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICB0b2RvQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRvZG9Db250YWluZXIubGFzdENoaWxkKTtcbiAgICB9XG4gICAgLy8gdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGROZXdUb2RvQnV0dG9uVG9WaWV3KCkpO1xuICB9O1xuXG4gIC8vIGNvbnN0IGFkZE5ld1RvZG9CdXR0b25Ub1ZpZXcgPSAoKSA9PiB7XG4gIC8vICAgY29uc3QgaHRtbCA9IGBcbiAgLy8gICA8ZGl2IGNsYXNzPVwicm93IG0tNCBwLTIgcm91bmRlZCB0b2RvLW5ldy10YXNrXCIgaWQ9XCJ0b2RvLWhvdmVyXCI+XG4gIC8vICAgICA8ZGl2XG4gIC8vICAgICAgIGNsYXNzPVwiY29sLW1kLTEgcHktMSBkLWZsZXgganVzdGlmeS1jb250ZW50LW1kLWVuZCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gIC8vICAgICA+XG4gIC8vICAgICAgIDxhPlxuICAvLyAgICAgICAgIDxpbWdcbiAgLy8gICAgICAgICAgIGNsYXNzPVwiXCJcbiAgLy8gICAgICAgICAgIHdpZHRoPVwiMTZcIlxuICAvLyAgICAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAvLyAgICAgICAgICAgc3JjPVwiLi4vaWNvbnMvcGx1cy1jaXJjbGUuc3ZnXCJcbiAgLy8gICAgICAgICAvPlxuICAvLyAgICAgICA8L2E+XG4gIC8vICAgICA8L2Rpdj5cbiAgLy8gICAgIDxkaXZcbiAgLy8gICAgICAgY2xhc3M9XCJjb2wtbWQtNyBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgLy8gICAgID5cbiAgLy8gICAgICAgQWRkIGEgbmV3IHRhc2shXG4gIC8vICAgICA8L2Rpdj5cbiAgLy8gICA8L2Rpdj5gO1xuICAvLyAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gXCJob3Zlci10b2RvLW5ldy10YXNrXCI7XG4gIC8vICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xuICAvLyAgIHJldHVybiBuZXdFbGVtZW50O1xuICAvLyB9O1xuXG4gIGNvbnN0IGFkZFRvZG9Ub1ZpZXcgPSAodG9kbykgPT4ge1xuICAgIC8vIGNvbnN0IGZpcnN0Q2hpbGQgPSB0b2RvQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIC8vIGZpcnN0Q2hpbGQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgY3JlYXRlVG9kb0NvbXBvbmVudCh0b2RvKSk7XG4gICAgdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVUb2RvQ29tcG9uZW50KHRvZG8pKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVUb2RvQ29tcG9uZW50ID0gKHRvZG8pID0+IHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXZcbiAgICBjbGFzcz1cImNvbC1tZC0xIHB5LTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1tZC1lbmQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJ0YXNrLWNoZWNrYm94XCIgJHtcbiAgICAgIHRvZG8uY29tcGxldGVkID8gXCJjaGVja2VkXCIgOiBcIlwiXG4gICAgfS8+XG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtNiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgPlxuICAgICR7dG9kby5jb21wbGV0ZWQgPyBgPGRlbD4ke3RvZG8udGl0bGV9PC9kZWw+YCA6IGAke3RvZG8udGl0bGV9YH1cbiAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbC1tZC0xIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHRhc2stYXJyb3dcIlxuICAgICAgICAgPlxuICAgICAgICA8aW1nXG4gICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtZG93blwiXG4gICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgIGhlaWdodD1cIjE2XCJcbiAgICAgICAgIHNyYz1cIi4uL2ljb25zL2NhcmV0LWRvd24uc3ZnXCJcbiAgICAgICAgIC8+XG4gICAgPC9kaXY+XG4gIDxkaXZcbiAgICBjbGFzcz1cImNvbC1tZC0yIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LW1kLXN0YXJ0IGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuICA+XG4gICAgJHt0b2RvLmR1ZURhdGV9XG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWVkaXRcIlxuICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICBzcmM9XCIuLi9pY29ucy9wZW5jaWwtc3F1YXJlLnN2Z1wiXG4gICAgICAvPlxuXG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWRlbGV0ZVwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL3RyYXNoLnN2Z1wiXG4gICAgICAvPlxuICA8L2Rpdj5gO1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gYHJvdyBtLTQgcC0yIGJnLXdoaXRlIHJvdW5kZWQtMyBib3JkZXItYm90dG9tICAke1xuICAgICAgdG9kby5wcmlvcml0eSA9PT0gXCJoaWdoXCJcbiAgICAgICAgPyBcInJlZC1ib3JkZXJcIlxuICAgICAgICA6IHRvZG8ucHJpb3JpdHkgPT09IFwibWlkZGxlXCJcbiAgICAgICAgPyBcIm9yYW5nZS1ib3JkZXJcIlxuICAgICAgICA6IFwiZ3JlZW4tYm9yZGVyXCJcbiAgICB9YDtcbiAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHsgYWRkVG9kb1RvVmlldywgcmVtb3ZlQWxsVGFza3MgfTtcbn0pKCk7XG5cbmNvbnN0IHRhc2tzTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCB0b2RvTWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1tYWluLWNvbnRhaW5lclwiKTtcbiAgLy8gICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcblxuICB0b2RvTWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgY2hlY2tib3hDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1jaGVja2JveFwiKTtcbiAgICBjb25zdCBhcnJvd0NvbnRhaW5lciA9XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS1kb3duXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS11cFwiKTtcbiAgICBjb25zdCBlZGl0Q29udGFpbmVyID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRhc2stZWRpdFwiKTtcbiAgICBjb25zdCBkZWxldGVDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1kZWxldGVcIik7XG5cbiAgICBjb25zdCBob21lQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWFjdGl2ZVwiKTtcblxuICAgIGlmIChjaGVja2JveENvbnRhaW5lcikge1xuICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgY29uc3QgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgY29uc3QgZGF0ZSA9IHJvd1s3XS50ZXh0Q29udGVudC50cmltKCk7XG5cbiAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICk7XG4gICAgICB0YXNrWzBdLmNvbXBsZXRlZCA9ICF0YXNrWzBdLmNvbXBsZXRlZDtcbiAgICAgIGlmICh0YXNrWzBdLmNvbXBsZXRlZCkge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gYDxkZWw+JHtyb3dbM10uaW5uZXJIVE1MfTwvZGVsPmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gcm93WzNdLmlubmVySFRNTC5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgXCJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFycm93Q29udGFpbmVyKSB7XG4gICAgICBsZXQgdGl0bGU7XG4gICAgICBsZXQgZGF0ZTtcbiAgICAgIGxldCBkaXY7XG4gICAgICBsZXQgYXJyb3c7XG5cbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS1kb3duXCIpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgbGV0IGFycm93SW1hZ2VEaXYgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgZGl2ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgY29uc29sZS5sb2cocm93KTtcbiAgICAgICAgY29uc29sZS5sb2coZGl2KTtcbiAgICAgICAgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgYXJyb3dJbWFnZURpdi5pbm5lckhUTUwgPSB1cEFycm93SHRtbCgpO1xuXG4gICAgICAgIGNvbnNvbGUubG9nKHRpdGxlLCBkYXRlKTtcblxuICAgICAgICBjb25zdCB0YXNrID0gbW9kZWwudGFza3MuZmlsdGVyKFxuICAgICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICAgKTtcbiAgICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICAgIGNvbnN0IGRlc2NEaXYgPSBjcmVhdGVEZXNjcmlwdGlvbkRpdih0YXNrKTtcbiAgICAgICAgZGl2Lmluc2VydEFkamFjZW50RWxlbWVudChcImFmdGVyZW5kXCIsIGRlc2NEaXYpO1xuICAgICAgfVxuXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRhc2stYXJyb3ctaW1hZ2UtdXBcIikpIHtcbiAgICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgICBsZXQgYXJyb3dJbWFnZURpdiA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlO1xuICAgICAgICBkaXYgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlO1xuICAgICAgICB0aXRsZSA9IHJvd1szXS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgICAgIGRhdGUgPSByb3dbN10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICBhcnJvd0ltYWdlRGl2LmlubmVySFRNTCA9IGRvd25BcnJvd0h0bWwoKTtcblxuICAgICAgICBkaXYubmV4dEVsZW1lbnRTaWJsaW5nLnJlbW92ZSgpO1xuICAgICAgfVxuICAgIH1cblxuICAgIGlmIChlZGl0Q29udGFpbmVyKSB7XG4gICAgICBjb25zdCByb3cgPSBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBjb25zb2xlLmxvZyhyb3cpO1xuICAgICAgbGV0IHRpdGxlID0gcm93WzNdLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIGxldCBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyh0YXNrKTtcbiAgICAgIHRvZG9FZGl0TW9kYWwuZmlsbEZvcm0odGFzayk7XG4gICAgICB0b2RvRWRpdE1vZGFsLm9wZW4oKTtcbiAgICB9XG5cbiAgICBpZiAoZGVsZXRlQ29udGFpbmVyKSB7XG4gICAgICBjb25zdCByb3cgPSBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICBsZXQgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgbGV0IGRhdGUgPSByb3dbN10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgY29uc3QgdGFzayA9IG1vZGVsLnRhc2tzLmZpbHRlcihcbiAgICAgICAgKHRhc2spID0+IHRhc2sudGl0bGUgPT09IHRpdGxlICYmIHRhc2suZHVlRGF0ZSA9PT0gZGF0ZVxuICAgICAgKTtcbiAgICAgIGxldCBpbmRleDtcbiAgICAgIG1vZGVsLnRhc2tzLmZpbHRlcigodCwgaSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgdGFza1swXS50aXRsZSA9PT0gdC50aXRsZSAmJlxuICAgICAgICAgIHRhc2tbMF0uZGVzY3JpcHRpb24gPT09IHQuZGVzY3JpcHRpb24gJiZcbiAgICAgICAgICB0YXNrWzBdLmR1ZURhdGUgPT09IHQuZHVlRGF0ZVxuICAgICAgICApIHtcbiAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBtb2RlbC50YXNrcy5zcGxpY2UoaW5kZXgsIDEpO1xuICAgICAgcmVtb3ZlQWN0aXZlKCk7XG4gICAgICBob21lQWN0aXZlLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICB0b2RvVmlldy5yZW1vdmVBbGxUYXNrcygpO1xuICAgICAgbW9kZWwudGFza3MuZm9yRWFjaCgodGFzaykgPT4gdG9kb1ZpZXcuYWRkVG9kb1RvVmlldyh0YXNrKSk7XG4gICAgfVxuICB9KTtcblxuICBjb25zdCB1cEFycm93SHRtbCA9ICgpID0+IHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWFycm93LWltYWdlLXVwXCJcbiAgICAgICAgd2lkdGg9XCIxNlwiXG4gICAgICAgIGhlaWdodD1cIjE2XCJcbiAgICAgICAgc3JjPVwiLi4vaWNvbnMvY2FyZXQtdXAuc3ZnXCJcbiAgICAvPmA7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgY29uc3QgZG93bkFycm93SHRtbCA9ICgpID0+IHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWFycm93LWltYWdlLWRvd25cIlxuICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICBzcmM9XCIuLi9pY29ucy9jYXJldC1kb3duLnN2Z1wiXG4gICAgLz5gO1xuICAgIHJldHVybiBodG1sO1xuICB9O1xuXG4gIGNvbnN0IGNyZWF0ZURlc2NyaXB0aW9uRGl2ID0gKHRhc2spID0+IHtcbiAgICBjb25zb2xlLmxvZyh0YXNrKTtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXYgY2xhc3M9XCJjb250YWluZXItZmx1aWQgcHktMVwiPlxuICAgICAgPGg2IGNsYXNzPVwiZnctYm9sZFwiPkRlc2NyaXB0aW9uPC9oNj5cbiAgICAgIDxwIGNsYXNzPVwiXCI+XG4gICAgICAke3Rhc2tbMF0uZGVzY3JpcHRpb259XG4gICAgICA8L3A+XG4gIDwvZGl2PmA7XG5cbiAgICBjb25zdCBkZXRhaWxzRGl2ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBkZXRhaWxzRGl2LmNsYXNzTGlzdCA9XG4gICAgICBcIm1vZGFsLWJvZHkgbXgtNSBteS0zIGJnLWxpZ2h0IHJvdW5kZWQtMyBib3JkZXIgYm9yZGVyLXNlY29uZGFyeSBwLTMgcm91bmRlZC0zIGRlc2NyaXB0aW9uLWRpdlwiO1xuICAgIGRldGFpbHNEaXYuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gZGV0YWlsc0RpdjtcbiAgfTtcblxuICByZXR1cm4ge307XG59KSgpO1xuXG5jb25zdCB0b2RvRWRpdE1vZGFsID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtbW9kYWxcIik7XG4gIGNvbnN0IGZvcm0gPSBkb2N1bWVudC5nZXRFbGVtZW50QnlJZChcImVkaXQtbW9kYWwtZm9ybVwiKTtcbiAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LXN1Ym1pdFwiKTtcbiAgY29uc3QgY2FuY2VsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5lZGl0LWNhbmNlbFwiKTtcblxuICBjb25zdCBob21lQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWFjdGl2ZVwiKTtcblxuICBsZXQgY3VycmVudFRhc2s7XG5cbiAgY29uc3Qgb3BlbiA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgfTtcblxuICBjb25zdCBmaWxsRm9ybSA9ICh0YXNrKSA9PiB7XG4gICAgY3VycmVudFRhc2sgPSB0YXNrO1xuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRUYXNrKTtcbiAgICBmb3JtW1widGl0bGVcIl0udmFsdWUgPSB0YXNrWzBdLnRpdGxlO1xuICAgIGZvcm1bXCJkZXNjcmlwdGlvblwiXS52YWx1ZSA9IHRhc2tbMF0uZGVzY3JpcHRpb247XG4gICAgZm9ybVtcImR1ZURhdGVcIl0udmFsdWUgPSB0YXNrWzBdLmR1ZURhdGU7XG4gIH07XG5cbiAgY2FuY2VsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgdG9kb01vZGFsVmFsaWRhdGlvbi5jbGVhckZvcm0oZm9ybSk7XG4gICAgY2xvc2UoKTtcbiAgfSk7XG5cbiAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBjb25zb2xlLmxvZyhjdXJyZW50VGFzayk7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCB0aXRsZSA9IGZvcm1bXCJ0aXRsZVwiXTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm1bXCJkZXNjcmlwdGlvblwiXTtcbiAgICBjb25zdCBkdWVEYXRlID0gZm9ybVtcImR1ZURhdGVcIl07XG4gICAgLy8gdmFsaWRhdGUgZm9ybSBlbGVtZW50c1xuICAgIGxldCB0aXRsZVZhbGlkID0gdG9kb01vZGFsVmFsaWRhdGlvbi5jaGVja1RpdGxlKHRpdGxlKSxcbiAgICAgIGRlc2NyaXB0aW9uVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pLFxuICAgICAgZGF0ZVZhbGlkID0gdG9kb01vZGFsVmFsaWRhdGlvbi5jaGVja0RhdGUoZHVlRGF0ZSk7XG5cbiAgICBsZXQgaXNGb3JtVmFsaWQgPSB0aXRsZVZhbGlkICYmIGRlc2NyaXB0aW9uVmFsaWQgJiYgZGF0ZVZhbGlkO1xuICAgIGlmIChpc0Zvcm1WYWxpZCkge1xuICAgICAgLy8gY3JlYXRlIHRvZG9cbiAgICAgIGNvbnNvbGUubG9nKGN1cnJlbnRUYXNrKTtcbiAgICAgIGNvbnN0IG5ld1RvZG8gPSBUb2RvVGFzayhcbiAgICAgICAgdGl0bGUudmFsdWUsXG4gICAgICAgIGRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICBkdWVEYXRlLnZhbHVlLFxuICAgICAgICBjdXJyZW50VGFza1swXS5jb21wbGV0ZWQsXG4gICAgICAgIGN1cnJlbnRUYXNrWzBdLnByaW9yaXR5LFxuICAgICAgICBjdXJyZW50VGFza1swXS5wcm9qZWN0XG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2cobmV3VG9kbyk7XG5cbiAgICAgIGxldCBpbmRleDtcbiAgICAgIG1vZGVsLnRhc2tzLmZpbHRlcigodCwgaSkgPT4ge1xuICAgICAgICBpZiAoXG4gICAgICAgICAgY3VycmVudFRhc2tbMF0udGl0bGUgPT09IHQudGl0bGUgJiZcbiAgICAgICAgICBjdXJyZW50VGFza1swXS5kZXNjcmlwdGlvbiA9PT0gdC5kZXNjcmlwdGlvbiAmJlxuICAgICAgICAgIGN1cnJlbnRUYXNrWzBdLmR1ZURhdGUgPT09IHQuZHVlRGF0ZVxuICAgICAgICApIHtcbiAgICAgICAgICBpbmRleCA9IGk7XG4gICAgICAgIH1cbiAgICAgIH0pO1xuXG4gICAgICBtb2RlbC50YXNrcy5zcGxpY2UoaW5kZXgsIDEsIG5ld1RvZG8pO1xuXG4gICAgICAvLyBjbGVhciBmb3JtXG4gICAgICB0b2RvTW9kYWxWYWxpZGF0aW9uLmNsZWFyRm9ybShmb3JtKTtcblxuICAgICAgcmVtb3ZlQWN0aXZlKCk7XG4gICAgICBob21lQWN0aXZlLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gICAgICB0b2RvVmlldy5yZW1vdmVBbGxUYXNrcygpO1xuICAgICAgbW9kZWwudGFza3MuZm9yRWFjaCgodGFzaykgPT4gdG9kb1ZpZXcuYWRkVG9kb1RvVmlldyh0YXNrKSk7XG5cbiAgICAgIC8vIGNsb3NlIG1vZGFsXG4gICAgICBjbG9zZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHsgb3BlbiwgY2xvc2UsIGZpbGxGb3JtIH07XG59KSgpO1xuXG5tb2RlbC5wcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiBwcm9qZWN0TWVudVZpZXcuYWRkUHJvamVjdFRvVmlldyhwcm9qZWN0KSk7XG5tb2RlbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KHRhc2spKTtcbiIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5T3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBkaXJ0eU9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iXSwibmFtZXMiOlsicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsInN0YXJ0T2ZXZWVrIiwiZGlydHlPcHRpb25zIiwib3B0aW9ucyIsImxvY2FsZSIsImxvY2FsZVdlZWtTdGFydHNPbiIsIndlZWtTdGFydHNPbiIsImRlZmF1bHRXZWVrU3RhcnRzT24iLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwiVG9kb1Rhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsImNvbXBsZXRlZCIsInByaW9yaXR5IiwicHJvamVjdCIsInRhc2siLCJkdWUiLCJQcm9qZWN0IiwibW9kZWwiLCJ0YXNrcyIsInByb2plY3RzIiwid2Vla3NUYXNrcyIsInRvZGF5c1Rhc2tzIiwicHJvamVjdFRhc2tzIiwicmVtb3ZlQWN0aXZlIiwiQXJyYXkiLCJmcm9tIiwiZG9jdW1lbnQiLCJxdWVyeVNlbGVjdG9yQWxsIiwiZm9yRWFjaCIsImJ1dHRvbiIsImNsYXNzTGlzdCIsInJlbW92ZSIsInF1ZXJ5U2VsZWN0b3IiLCJhZGRFdmVudExpc3RlbmVyIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbG9zZXN0IiwiYWRkIiwidG9kYXlCdXR0b24iLCJjb250YWlucyIsIndlZWtCdXR0b24iLCJob21lQnV0dG9uIiwidG9kb1ZpZXciLCJyZW1vdmVBbGxUYXNrcyIsImFkZFRvZG9Ub1ZpZXciLCJjdXJyZW50VGFza3MiLCJkaXJ0eURhdGVMZWZ0IiwiZGlydHlEYXRlUmlnaHQiLCJkYXRlTGVmdFN0YXJ0T2ZEYXkiLCJkYXRlUmlnaHRTdGFydE9mRGF5IiwiaXNTYW1lRGF5IiwicHVzaCIsImRhdGVMZWZ0U3RhcnRPZldlZWsiLCJkYXRlUmlnaHRTdGFydE9mV2VlayIsImlzU2FtZVdlZWsiLCJwcm9qZWN0TmFtZSIsImxhc3RDaGlsZCIsImNoaWxkTm9kZXMiLCJ0ZXh0Q29udGVudCIsImxvZyIsIm1vZGFsIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsInN1Ym1pdCIsImZvcm0iLCJnZXRFbGVtZW50QnlJZCIsInNob3dNb2RhbCIsImhpZGVNb2RhbCIsInByZXZlbnREZWZhdWx0IiwicHJvamVjdE1vZGFsVmFsaWRhdGlvbiIsImNoZWNrVGl0bGUiLCJuZXdQcm9qZWN0IiwidmFsdWUiLCJwcm9qZWN0TWVudVZpZXciLCJhZGRQcm9qZWN0VG9WaWV3IiwiY2xlYXJGb3JtIiwiZWxlbWVudCIsInZhbGlkIiwidHJpbSIsInByb2plY3RNZW51IiwiZm9ybVByb2plY3RMaXN0IiwiYXBwZW5kQ2hpbGQiLCJodG1sIiwibmV3RWxlbWVudCIsImNyZWF0ZUVsZW1lbnQiLCJpbm5lckhUTUwiLCJjcmVhdGVQcm9qZWN0Q29tcG9uZW50IiwiYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSIsInRvZG9Nb2RhbFZhbGlkYXRpb24iLCJvcGVuIiwiY2xvc2UiLCJmb3JtUHJvamVjdFNlbGVjdCIsInNlbGVjdGVkSW5kZXgiLCJ0aXRsZVZhbGlkIiwiZGVzY3JpcHRpb25WYWxpZCIsImNoZWNrRGVzY3JpcHRpb24iLCJkYXRlVmFsaWQiLCJjaGVja0RhdGUiLCJuZXdUb2RvIiwiaXNSZXF1aXJlZCIsInNob3dEYXRlRXJyb3IiLCJpbnB1dCIsIm1lc3NhZ2UiLCJ0YXNrRGF0ZSIsInllYXIiLCJtb250aCIsInNwbGl0IiwiY3VycmVudERhdGUiLCJjRGF5IiwiY01vbnRoIiwiZ2V0TW9udGgiLCJnZXRGdWxsWWVhciIsIm5vdEluRnV0dXJlIiwidG9kb0NvbnRhaW5lciIsInRvZG8iLCJjcmVhdGVUb2RvQ29tcG9uZW50IiwiZmlyc3RDaGlsZCIsInJlbW92ZUNoaWxkIiwidG9kb0VkaXRNb2RhbCIsImNoZWNrYm94Q29udGFpbmVyIiwiYXJyb3dDb250YWluZXIiLCJlZGl0Q29udGFpbmVyIiwiZGVsZXRlQ29udGFpbmVyIiwiaG9tZUFjdGl2ZSIsInJvdyIsInBhcmVudE5vZGUiLCJmaWx0ZXIiLCJyZXBsYWNlIiwiZGl2IiwiYXJyb3dJbWFnZURpdiIsInVwQXJyb3dIdG1sIiwiZGVzY0RpdiIsImNyZWF0ZURlc2NyaXB0aW9uRGl2IiwiaW5zZXJ0QWRqYWNlbnRFbGVtZW50IiwiZG93bkFycm93SHRtbCIsIm5leHRFbGVtZW50U2libGluZyIsImZpbGxGb3JtIiwiaW5kZXgiLCJ0IiwiaSIsInNwbGljZSIsImRldGFpbHNEaXYiLCJjYW5jZWwiLCJjdXJyZW50VGFzayJdLCJzb3VyY2VSb290IjoiIn0=