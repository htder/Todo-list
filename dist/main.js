(()=>{"use strict";function e(e,t){if(t.length<e)throw new TypeError(e+" argument"+(e>1?"s":"")+" required, but only "+t.length+" present")}function t(t){e(1,arguments);var o=Object.prototype.toString.call(t);return t instanceof Date||"object"==typeof t&&"[object Date]"===o?new Date(t.getTime()):"number"==typeof t||"[object Number]"===o?new Date(t):("string"!=typeof t&&"[object String]"!==o||"undefined"==typeof console||(console.warn("Starting with v2.0.0-beta.1 date-fns doesn't accept strings as date arguments. Please use `parseISO` to parse strings. See: https://git.io/fjule"),console.warn((new Error).stack)),new Date(NaN))}function o(o){e(1,arguments);var n=t(o);return n.setHours(0,0,0,0),n}function n(e){if(null===e||!0===e||!1===e)return NaN;var t=Number(e);return isNaN(t)?t:t<0?Math.ceil(t):Math.floor(t)}function r(o,r){e(1,arguments);var s=r||{},c=s.locale,a=c&&c.options&&c.options.weekStartsOn,i=null==a?0:n(a),l=null==s.weekStartsOn?i:n(s.weekStartsOn);if(!(l>=0&&l<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var d=t(o),u=d.getDay(),m=(u<l?7:0)+u-l;return d.setDate(d.getDate()-m),d.setHours(0,0,0,0),d}const s=function(e,t,o,n,r,s){const c={};return c.title=e,c.description=t,c.dueDate=o,c.completed=n,c.priority=r,c.project=s,c.due=function(){return`${e} due: ${o}`},c},c=function(e){const t={};return t.title=e,t};let a={tasks:[s("Hello World","one two three","2022-01-21",!0,"high","Starter"),s("World Hello","one two three","2022-01-20",!1,"low","Starter"),s("One One One","One Hello","2022-09-17",!0,"middle","Starter")],projects:[c("Starter")]};const i={writeStorage:function(){window.localStorage.setItem("model",JSON.stringify(a))},readStorage:function(){window.localStorage.getItem("model")&&(a=JSON.parse(window.localStorage.getItem("model")))},resetStorage:function(){localStorage.setItem("model",JSON.stringify(a))}};i.readStorage();let l=[],d=[],u=[];function m(){Array.from(document.querySelectorAll(".menu-button")).forEach((e=>e.classList.remove("active")))}document.querySelector(".sidebar").addEventListener("click",(t=>{if(m(),null===t.target.closest("a"))return;t.target.closest("a").classList.add("active");const n=t.target.classList.contains("today"),s=t.target.classList.contains("week"),c=t.target.classList.contains("home"),i=t.target.classList.contains("project");if(c&&(h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e)))),n){const t=[];a.tasks.forEach((n=>{(function(t,n){e(2,arguments);var r=o(t),s=o(n);return r.getTime()===s.getTime()})(new Date(n.dueDate),new Date)&&t.push(n)})),d=t,h.removeAllTasks(),d.forEach((e=>h.addTodoToView(e)))}if(s){const t=[];a.tasks.forEach((o=>{(function(t,o,n){e(2,arguments);var s=r(t,n),c=r(o,n);return s.getTime()===c.getTime()})(new Date(o.dueDate),new Date)&&t.push(o)})),l=t,h.removeAllTasks(),l.forEach((e=>h.addTodoToView(e)))}if(i){const e=t.target.closest(".nav-item").lastChild.childNodes[2].textContent;console.log(e);const o=[];a.tasks.forEach((t=>{t.project===e&&o.push(t)})),u=o,h.removeAllTasks(),u.forEach((e=>h.addTodoToView(e)))}})),function(){const e=document.querySelector(".project-modal"),t=document.querySelector(".new-project-button"),o=document.querySelector(".project-modal-close"),n=document.querySelector(".project-submit"),r=document.getElementById("new-project-form");t.addEventListener("click",(()=>{s()})),o.addEventListener("click",(()=>{l()})),n.addEventListener("click",(e=>{e.preventDefault();const t=r.title;if(p.checkTitle(t)){const e=c(t.value);a.projects.push(e),g.addProjectToView(e),p.clearForm(r),i.writeStorage(),l()}}));const s=function(){e.classList.remove("hide"),e.classList.add("show")},l=function(){e.classList.remove("show"),e.classList.add("hide")}}();const p={checkTitle:e=>{let t=!1;return""===e.value.trim()?e.classList.add("error"):(e.classList.remove("error"),t=!0),t},clearForm:e=>{e.title.value=""}},g=function(){const e=document.querySelector(".project-menu"),t=document.querySelector(".form-project-selector");return{addProjectToView:t=>{e.appendChild((e=>{const t=`\n      <a href="#" class="nav-link menu-button link-dark rounded project">\n        <img\n          class="bi me-2 project"\n          width="16"\n          height="16"\n          src="../icons/arrow-right-short.svg"\n        /><span class="d-none d-sm-inline project">${e.title}</span></a\n      >`,o=document.createElement("li");return o.classList="nav-item m-1",o.innerHTML=t,o})(t))},addProjectToTodoSelectorForm:()=>{let e="";a.projects.forEach((t=>{e+=`<option>${t.title}</option>`})),t.innerHTML=e}}}(),f=(function(){const e=document.querySelector(".task-modal"),t=document.querySelector(".todo-new-task"),o=document.querySelector(".todo-modal-close"),n=document.getElementById("new-todo-form"),r=document.querySelector(".todo-submit");t.addEventListener("click",(()=>{g.addProjectToTodoSelectorForm(),c()})),o.addEventListener("click",(()=>{l()})),r.addEventListener("click",(e=>{e.preventDefault();const t=document.querySelector(".form-project-selector"),o=n.title,r=n.description,c=n.dueDate,d=t.options[t.selectedIndex].value,u=n.optradio.value;let m=f.checkTitle(o),p=f.checkDescription(r),g=f.checkDate(c);if(m&&p&&g){const e=s(o.value,r.value,c.value,!1,u,d);a.tasks.push(e),h.addTodoToView(e),f.clearForm(n),i.writeStorage(),l()}}));const c=()=>{e.classList.remove("hide"),e.classList.add("show")},l=()=>{e.classList.remove("show"),e.classList.add("hide")}}(),function(){const e=e=>""===e,t=(e,t)=>{document.querySelector(".dateError").textContent=t};return{checkTitle:t=>{let o=!1;const n=t.value.trim();return e(n)?("Title cannot be empty.",document.querySelector(".titleError").textContent="Title cannot be empty."):(document.querySelector(".titleError").textContent="",o=!0),o},checkDescription:t=>{let o=!1;const n=t.value.trim();return e(n)?("Description cannot be empty.",document.querySelector(".descError").textContent="Description cannot be empty."):(document.querySelector(".descError").textContent="",o=!0),o},checkDate:o=>{let n=!1;const r=o.value.trim();return e(r)&&t(0,"Due date cannot be empty"),(e=>{const t=new Date(`${e}`),[o,n,r]=e.split("-"),s=new Date,c=s.getDate(),a=s.getMonth()+1;return!(+o===s.getFullYear()&&+n===a&&+r===c||t>s)})(r)?t(0,"Due date must be in the future."):(document.querySelector(".dateError").textContent="",n=!0),n},clearForm:e=>{e.title.value="",e.description.value="",e.dueDate.value=""}}}()),h=function(){const e=document.querySelector(".todo-container");return{addTodoToView:t=>{e.appendChild((e=>{const t=`\n    <div\n    class="col-md-1 py-1 d-flex justify-content-md-end justify-content-center"\n  >\n    <input type="checkbox" class="task-checkbox" ${e.completed?"checked":""}/>\n  </div>\n  <div\n    class="col-md-6 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.completed?`<del>${e.title}</del>`:`${e.title}`}\n  </div>\n    <div\n        class="col-md-1 d-flex align-items-center justify-md-start justify-content-center task-arrow"\n         >\n        <img\n         class="task-arrow-image-down"\n         width="16"\n         height="16"\n         src="../icons/caret-down.svg"\n         />\n    </div>\n  <div\n    class="col-md-2 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.dueDate}\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n      <img\n        class="task-edit"\n        width="16"\n        height="16"\n        src="../icons/pencil-square.svg"\n      />\n\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n      <img\n        class="task-delete"\n        width="16"\n        height="16"\n        src="../icons/trash.svg"\n      />\n  </div>`,o=document.createElement("div");return o.classList="row m-4 p-2 bg-white rounded-3 border-bottom  "+("high"===e.priority?"red-border":"middle"===e.priority?"orange-border":"green-border"),o.innerHTML=t,o})(t))},removeAllTasks:()=>{for(;e.firstChild;)e.removeChild(e.lastChild)}}}(),v=(function(){document.querySelector(".todo-main-container").addEventListener("click",(n=>{const r=n.target.classList.contains("task-checkbox"),s=n.target.classList.contains("task-arrow-image-down")||n.target.classList.contains("task-arrow-image-up"),c=n.target.classList.contains("task-edit"),l=n.target.classList.contains("task-delete"),d=document.querySelector(".home-active");if(r){const e=Array.from(n.target.parentNode.parentNode.childNodes),t=e[3].textContent.trim(),o=e[7].textContent.trim(),r=a.tasks.filter((e=>e.title===t&&e.dueDate===o));r[0].completed=!r[0].completed,r[0].completed?e[3].innerHTML=`<del>${e[3].innerHTML}</del>`:e[3].innerHTML=e[3].innerHTML.replace(/(<([^>]+)>)/gi,""),i.writeStorage()}if(s){let r,s,c;if(n.target.classList.contains("task-arrow-image-down")){const t=Array.from(n.target.parentNode.parentNode.childNodes);let i=n.target.parentNode;c=n.target.parentNode.parentNode,console.log(t),console.log(c),r=t[3].textContent.trim(),s=t[7].textContent.trim(),i.innerHTML=e(),console.log(r,s);const l=a.tasks.filter((e=>e.title===r&&e.dueDate===s));console.log(l);const d=o(l);c.insertAdjacentElement("afterend",d)}if(n.target.classList.contains("task-arrow-image-up")){const e=Array.from(n.target.parentNode.parentNode.childNodes);let o=n.target.parentNode;c=n.target.parentNode.parentNode,r=e[3].textContent.trim(),s=e[7].textContent.trim(),o.innerHTML=t(),c.nextElementSibling.remove()}}if(c){const e=Array.from(n.target.parentNode.parentNode.childNodes);console.log(e);let t=e[3].textContent.trim(),o=e[7].textContent.trim();const r=a.tasks.filter((e=>e.title===t&&e.dueDate===o));console.log(r),v.fillForm(r),v.open()}if(l){const e=Array.from(n.target.parentNode.parentNode.childNodes);let t=e[3].textContent.trim(),o=e[7].textContent.trim();const r=a.tasks.filter((e=>e.title===t&&e.dueDate===o));let s;a.tasks.filter(((e,t)=>{r[0].title===e.title&&r[0].description===e.description&&r[0].dueDate===e.dueDate&&(s=t)})),a.tasks.splice(s,1),m(),d.classList.add("active"),h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e))),i.writeStorage()}}));const e=()=>'\n    <img\n        class="task-arrow-image-up"\n        width="16"\n        height="16"\n        src="../icons/caret-up.svg"\n    />',t=()=>'\n    <img\n        class="task-arrow-image-down"\n        width="16"\n        height="16"\n        src="../icons/caret-down.svg"\n    />',o=e=>{console.log(e);const t=`\n    <div class="container-fluid py-1">\n      <h6 class="fw-bold">Description</h6>\n      <p class="">\n      ${e[0].description}\n      </p>\n  </div>`,o=document.createElement("div");return o.classList="modal-body mx-5 my-3 bg-light rounded-3 border border-secondary p-3 rounded-3 description-div",o.innerHTML=t,o}}(),function(){const e=document.querySelector(".edit-modal"),t=document.getElementById("edit-modal-form"),o=document.querySelector(".edit-submit"),n=document.querySelector(".edit-cancel"),r=document.querySelector(".home-active");let c;const l=()=>{e.classList.remove("show"),e.classList.add("hide")};return n.addEventListener("click",(()=>{f.clearForm(t),l()})),o.addEventListener("click",(e=>{console.log(c),e.preventDefault();const o=t.title,n=t.description,d=t.dueDate;let u=f.checkTitle(o),p=f.checkDescription(n),g=f.checkDate(d);if(u&&p&&g){console.log(c);const e=s(o.value,n.value,d.value,c[0].completed,c[0].priority,c[0].project);let u;console.log(e),a.tasks.filter(((e,t)=>{c[0].title===e.title&&c[0].description===e.description&&c[0].dueDate===e.dueDate&&(u=t)})),a.tasks.splice(u,1,e),f.clearForm(t),m(),r.classList.add("active"),h.removeAllTasks(),a.tasks.forEach((e=>h.addTodoToView(e))),i.writeStorage(),l()}})),{open:()=>{e.classList.remove("hide"),e.classList.add("show")},close:l,fillForm:e=>{c=e,console.log(c),t.title.value=e[0].title,t.description.value=e[0].description,t.dueDate.value=e[0].dueDate}}}());a.projects.forEach((e=>g.addProjectToView(e))),a.tasks.forEach((e=>h.addTodoToView(e)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QVksR0FBR2pKLGNBQWdCNEksRUFBRTVJLGFBQ2pDaUosRUFBWSxHQUFHaEosVUFBWTJJLEVBQUUzSSxVQUU3QjBJLEVBQVFFLE1BSVpySSxFQUFNQyxNQUFNcUksT0FBT0gsRUFBTyxFQUFHdkMsR0FHN0JWLEVBQW9CYixVQUFVWCxHQUU5QnpDLElBQ0FvRyxFQUFXN0YsVUFBVU8sSUFBSSxVQUN6QkssRUFBU0MsaUJBQ1RyQyxFQUFNQyxNQUFNcUIsU0FBU3pCLEdBQVN1QyxFQUFTRSxjQUFjekMsS0FHckRNLEVBQVFDLGVBQ1JnRixRQUlHLENBQUVELEtBM0VJLEtBQ1g3QixFQUFNOUIsVUFBVUMsT0FBTyxRQUN2QjZCLEVBQU05QixVQUFVTyxJQUFJLFNBeUVQcUQsTUFBQUEsRUFBTzhDLFNBakVKckksSUFDaEI0SSxFQUFjNUksRUFDZHJDLFFBQVE2RixJQUFJb0YsR0FDWi9FLEVBQVksTUFBRVEsTUFBUXJFLEVBQUssR0FBR04sTUFDOUJtRSxFQUFrQixZQUFFUSxNQUFRckUsRUFBSyxHQUFHTCxZQUNwQ2tFLEVBQWMsUUFBRVEsTUFBUXJFLEVBQUssR0FBR0osVUF6QmQsSUF3RnRCTyxFQUFNRSxTQUFTb0IsU0FBUzFCLEdBQVl1RSxFQUFnQkMsaUJBQWlCeEUsS0FDckVJLEVBQU1DLE1BQU1xQixTQUFTekIsR0FBU3VDLEVBQVNFLGNBQWN6QyxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3RvRGF0ZS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZEYXkvaW5kZXguanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vbm9kZV9tb2R1bGVzL2RhdGUtZm5zL2VzbS9fbGliL3RvSW50ZWdlci9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL3N0YXJ0T2ZXZWVrL2luZGV4LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy90YXNrLmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9wcm9qZWN0LmpzIiwid2VicGFjazovL3RvZG8tbGlzdC8uL3NyYy9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZURheS9pbmRleC5qcyIsIndlYnBhY2s6Ly90b2RvLWxpc3QvLi9ub2RlX21vZHVsZXMvZGF0ZS1mbnMvZXNtL2lzU2FtZVdlZWsvaW5kZXguanMiXSwic291cmNlc0NvbnRlbnQiOlsiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gcmVxdWlyZWRBcmdzKHJlcXVpcmVkLCBhcmdzKSB7XG4gIGlmIChhcmdzLmxlbmd0aCA8IHJlcXVpcmVkKSB7XG4gICAgdGhyb3cgbmV3IFR5cGVFcnJvcihyZXF1aXJlZCArICcgYXJndW1lbnQnICsgKHJlcXVpcmVkID4gMSA/ICdzJyA6ICcnKSArICcgcmVxdWlyZWQsIGJ1dCBvbmx5ICcgKyBhcmdzLmxlbmd0aCArICcgcHJlc2VudCcpO1xuICB9XG59IiwiaW1wb3J0IHJlcXVpcmVkQXJncyBmcm9tIFwiLi4vX2xpYi9yZXF1aXJlZEFyZ3MvaW5kZXguanNcIjtcbi8qKlxuICogQG5hbWUgdG9EYXRlXG4gKiBAY2F0ZWdvcnkgQ29tbW9uIEhlbHBlcnNcbiAqIEBzdW1tYXJ5IENvbnZlcnQgdGhlIGdpdmVuIGFyZ3VtZW50IHRvIGFuIGluc3RhbmNlIG9mIERhdGUuXG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBDb252ZXJ0IHRoZSBnaXZlbiBhcmd1bWVudCB0byBhbiBpbnN0YW5jZSBvZiBEYXRlLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBhbiBpbnN0YW5jZSBvZiBEYXRlLCB0aGUgZnVuY3Rpb24gcmV0dXJucyBpdHMgY2xvbmUuXG4gKlxuICogSWYgdGhlIGFyZ3VtZW50IGlzIGEgbnVtYmVyLCBpdCBpcyB0cmVhdGVkIGFzIGEgdGltZXN0YW1wLlxuICpcbiAqIElmIHRoZSBhcmd1bWVudCBpcyBub25lIG9mIHRoZSBhYm92ZSwgdGhlIGZ1bmN0aW9uIHJldHVybnMgSW52YWxpZCBEYXRlLlxuICpcbiAqICoqTm90ZSoqOiAqYWxsKiBEYXRlIGFyZ3VtZW50cyBwYXNzZWQgdG8gYW55ICpkYXRlLWZucyogZnVuY3Rpb24gaXMgcHJvY2Vzc2VkIGJ5IGB0b0RhdGVgLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGFyZ3VtZW50IC0gdGhlIHZhbHVlIHRvIGNvbnZlcnRcbiAqIEByZXR1cm5zIHtEYXRlfSB0aGUgcGFyc2VkIGRhdGUgaW4gdGhlIGxvY2FsIHRpbWUgem9uZVxuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENsb25lIHRoZSBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKG5ldyBEYXRlKDIwMTQsIDEsIDExLCAxMSwgMzAsIDMwKSlcbiAqIC8vPT4gVHVlIEZlYiAxMSAyMDE0IDExOjMwOjMwXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIENvbnZlcnQgdGhlIHRpbWVzdGFtcCB0byBkYXRlOlxuICogY29uc3QgcmVzdWx0ID0gdG9EYXRlKDEzOTIwOTg0MzAwMDApXG4gKiAvLz0+IFR1ZSBGZWIgMTEgMjAxNCAxMTozMDozMFxuICovXG5cbmV4cG9ydCBkZWZhdWx0IGZ1bmN0aW9uIHRvRGF0ZShhcmd1bWVudCkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGFyZ1N0ciA9IE9iamVjdC5wcm90b3R5cGUudG9TdHJpbmcuY2FsbChhcmd1bWVudCk7IC8vIENsb25lIHRoZSBkYXRlXG5cbiAgaWYgKGFyZ3VtZW50IGluc3RhbmNlb2YgRGF0ZSB8fCB0eXBlb2YgYXJndW1lbnQgPT09ICdvYmplY3QnICYmIGFyZ1N0ciA9PT0gJ1tvYmplY3QgRGF0ZV0nKSB7XG4gICAgLy8gUHJldmVudCB0aGUgZGF0ZSB0byBsb3NlIHRoZSBtaWxsaXNlY29uZHMgd2hlbiBwYXNzZWQgdG8gbmV3IERhdGUoKSBpbiBJRTEwXG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50LmdldFRpbWUoKSk7XG4gIH0gZWxzZSBpZiAodHlwZW9mIGFyZ3VtZW50ID09PSAnbnVtYmVyJyB8fCBhcmdTdHIgPT09ICdbb2JqZWN0IE51bWJlcl0nKSB7XG4gICAgcmV0dXJuIG5ldyBEYXRlKGFyZ3VtZW50KTtcbiAgfSBlbHNlIHtcbiAgICBpZiAoKHR5cGVvZiBhcmd1bWVudCA9PT0gJ3N0cmluZycgfHwgYXJnU3RyID09PSAnW29iamVjdCBTdHJpbmddJykgJiYgdHlwZW9mIGNvbnNvbGUgIT09ICd1bmRlZmluZWQnKSB7XG4gICAgICAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuICAgICAgY29uc29sZS53YXJuKFwiU3RhcnRpbmcgd2l0aCB2Mi4wLjAtYmV0YS4xIGRhdGUtZm5zIGRvZXNuJ3QgYWNjZXB0IHN0cmluZ3MgYXMgZGF0ZSBhcmd1bWVudHMuIFBsZWFzZSB1c2UgYHBhcnNlSVNPYCB0byBwYXJzZSBzdHJpbmdzLiBTZWU6IGh0dHBzOi8vZ2l0LmlvL2ZqdWxlXCIpOyAvLyBlc2xpbnQtZGlzYWJsZS1uZXh0LWxpbmUgbm8tY29uc29sZVxuXG4gICAgICBjb25zb2xlLndhcm4obmV3IEVycm9yKCkuc3RhY2spO1xuICAgIH1cblxuICAgIHJldHVybiBuZXcgRGF0ZShOYU4pO1xuICB9XG59IiwiaW1wb3J0IHRvRGF0ZSBmcm9tIFwiLi4vdG9EYXRlL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mRGF5XG4gKiBAY2F0ZWdvcnkgRGF5IEhlbHBlcnNcbiAqIEBzdW1tYXJ5IFJldHVybiB0aGUgc3RhcnQgb2YgYSBkYXkgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIGRheSBmb3IgdGhlIGdpdmVuIGRhdGUuXG4gKiBUaGUgcmVzdWx0IHdpbGwgYmUgaW4gdGhlIGxvY2FsIHRpbWV6b25lLlxuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZSAtIHRoZSBvcmlnaW5hbCBkYXRlXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgZGF5XG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDEgYXJndW1lbnQgcmVxdWlyZWRcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gVGhlIHN0YXJ0IG9mIGEgZGF5IGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZkRheShuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBUdWUgU2VwIDAyIDIwMTQgMDA6MDA6MDBcbiAqL1xuXG5leHBvcnQgZGVmYXVsdCBmdW5jdGlvbiBzdGFydE9mRGF5KGRpcnR5RGF0ZSkge1xuICByZXF1aXJlZEFyZ3MoMSwgYXJndW1lbnRzKTtcbiAgdmFyIGRhdGUgPSB0b0RhdGUoZGlydHlEYXRlKTtcbiAgZGF0ZS5zZXRIb3VycygwLCAwLCAwLCAwKTtcbiAgcmV0dXJuIGRhdGU7XG59IiwiZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gdG9JbnRlZ2VyKGRpcnR5TnVtYmVyKSB7XG4gIGlmIChkaXJ0eU51bWJlciA9PT0gbnVsbCB8fCBkaXJ0eU51bWJlciA9PT0gdHJ1ZSB8fCBkaXJ0eU51bWJlciA9PT0gZmFsc2UpIHtcbiAgICByZXR1cm4gTmFOO1xuICB9XG5cbiAgdmFyIG51bWJlciA9IE51bWJlcihkaXJ0eU51bWJlcik7XG5cbiAgaWYgKGlzTmFOKG51bWJlcikpIHtcbiAgICByZXR1cm4gbnVtYmVyO1xuICB9XG5cbiAgcmV0dXJuIG51bWJlciA8IDAgPyBNYXRoLmNlaWwobnVtYmVyKSA6IE1hdGguZmxvb3IobnVtYmVyKTtcbn0iLCJpbXBvcnQgdG9EYXRlIGZyb20gXCIuLi90b0RhdGUvaW5kZXguanNcIjtcbmltcG9ydCB0b0ludGVnZXIgZnJvbSBcIi4uL19saWIvdG9JbnRlZ2VyL2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBzdGFydE9mV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICpcbiAqIEBkZXNjcmlwdGlvblxuICogUmV0dXJuIHRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIHRoZSBnaXZlbiBkYXRlLlxuICogVGhlIHJlc3VsdCB3aWxsIGJlIGluIHRoZSBsb2NhbCB0aW1lem9uZS5cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGUgLSB0aGUgb3JpZ2luYWwgZGF0ZVxuICogQHBhcmFtIHtPYmplY3R9IFtvcHRpb25zXSAtIGFuIG9iamVjdCB3aXRoIG9wdGlvbnMuXG4gKiBAcGFyYW0ge0xvY2FsZX0gW29wdGlvbnMubG9jYWxlPWRlZmF1bHRMb2NhbGVdIC0gdGhlIGxvY2FsZSBvYmplY3QuIFNlZSBbTG9jYWxlXXtAbGluayBodHRwczovL2RhdGUtZm5zLm9yZy9kb2NzL0xvY2FsZX1cbiAqIEBwYXJhbSB7MHwxfDJ8M3w0fDV8Nn0gW29wdGlvbnMud2Vla1N0YXJ0c09uPTBdIC0gdGhlIGluZGV4IG9mIHRoZSBmaXJzdCBkYXkgb2YgdGhlIHdlZWsgKDAgLSBTdW5kYXkpXG4gKiBAcmV0dXJucyB7RGF0ZX0gdGhlIHN0YXJ0IG9mIGEgd2Vla1xuICogQHRocm93cyB7VHlwZUVycm9yfSAxIGFyZ3VtZW50IHJlcXVpcmVkXG4gKiBAdGhyb3dzIHtSYW5nZUVycm9yfSBgb3B0aW9ucy53ZWVrU3RhcnRzT25gIG11c3QgYmUgYmV0d2VlbiAwIGFuZCA2XG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIFRoZSBzdGFydCBvZiBhIHdlZWsgZm9yIDIgU2VwdGVtYmVyIDIwMTQgMTE6NTU6MDA6XG4gKiBjb25zdCByZXN1bHQgPSBzdGFydE9mV2VlayhuZXcgRGF0ZSgyMDE0LCA4LCAyLCAxMSwgNTUsIDApKVxuICogLy89PiBTdW4gQXVnIDMxIDIwMTQgMDA6MDA6MDBcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gSWYgdGhlIHdlZWsgc3RhcnRzIG9uIE1vbmRheSwgdGhlIHN0YXJ0IG9mIHRoZSB3ZWVrIGZvciAyIFNlcHRlbWJlciAyMDE0IDExOjU1OjAwOlxuICogY29uc3QgcmVzdWx0ID0gc3RhcnRPZldlZWsobmV3IERhdGUoMjAxNCwgOCwgMiwgMTEsIDU1LCAwKSwgeyB3ZWVrU3RhcnRzT246IDEgfSlcbiAqIC8vPT4gTW9uIFNlcCAwMSAyMDE0IDAwOjAwOjAwXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gc3RhcnRPZldlZWsoZGlydHlEYXRlLCBkaXJ0eU9wdGlvbnMpIHtcbiAgcmVxdWlyZWRBcmdzKDEsIGFyZ3VtZW50cyk7XG4gIHZhciBvcHRpb25zID0gZGlydHlPcHRpb25zIHx8IHt9O1xuICB2YXIgbG9jYWxlID0gb3B0aW9ucy5sb2NhbGU7XG4gIHZhciBsb2NhbGVXZWVrU3RhcnRzT24gPSBsb2NhbGUgJiYgbG9jYWxlLm9wdGlvbnMgJiYgbG9jYWxlLm9wdGlvbnMud2Vla1N0YXJ0c09uO1xuICB2YXIgZGVmYXVsdFdlZWtTdGFydHNPbiA9IGxvY2FsZVdlZWtTdGFydHNPbiA9PSBudWxsID8gMCA6IHRvSW50ZWdlcihsb2NhbGVXZWVrU3RhcnRzT24pO1xuICB2YXIgd2Vla1N0YXJ0c09uID0gb3B0aW9ucy53ZWVrU3RhcnRzT24gPT0gbnVsbCA/IGRlZmF1bHRXZWVrU3RhcnRzT24gOiB0b0ludGVnZXIob3B0aW9ucy53ZWVrU3RhcnRzT24pOyAvLyBUZXN0IGlmIHdlZWtTdGFydHNPbiBpcyBiZXR3ZWVuIDAgYW5kIDYgX2FuZF8gaXMgbm90IE5hTlxuXG4gIGlmICghKHdlZWtTdGFydHNPbiA+PSAwICYmIHdlZWtTdGFydHNPbiA8PSA2KSkge1xuICAgIHRocm93IG5ldyBSYW5nZUVycm9yKCd3ZWVrU3RhcnRzT24gbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDYgaW5jbHVzaXZlbHknKTtcbiAgfVxuXG4gIHZhciBkYXRlID0gdG9EYXRlKGRpcnR5RGF0ZSk7XG4gIHZhciBkYXkgPSBkYXRlLmdldERheSgpO1xuICB2YXIgZGlmZiA9IChkYXkgPCB3ZWVrU3RhcnRzT24gPyA3IDogMCkgKyBkYXkgLSB3ZWVrU3RhcnRzT247XG4gIGRhdGUuc2V0RGF0ZShkYXRlLmdldERhdGUoKSAtIGRpZmYpO1xuICBkYXRlLnNldEhvdXJzKDAsIDAsIDAsIDApO1xuICByZXR1cm4gZGF0ZTtcbn0iLCJjb25zdCBUb2RvVGFzayA9IGZ1bmN0aW9uIChcbiAgdGl0bGUsXG4gIGRlc2NyaXB0aW9uLFxuICBkdWVEYXRlLFxuICBjb21wbGV0ZWQsXG4gIHByaW9yaXR5LFxuICBwcm9qZWN0XG4pIHtcbiAgY29uc3QgdGFzayA9IHt9O1xuXG4gIHRhc2sudGl0bGUgPSB0aXRsZTtcbiAgdGFzay5kZXNjcmlwdGlvbiA9IGRlc2NyaXB0aW9uO1xuICB0YXNrLmR1ZURhdGUgPSBkdWVEYXRlO1xuICB0YXNrLmNvbXBsZXRlZCA9IGNvbXBsZXRlZDtcbiAgdGFzay5wcmlvcml0eSA9IHByaW9yaXR5O1xuICB0YXNrLnByb2plY3QgPSBwcm9qZWN0O1xuXG4gIHRhc2suZHVlID0gZnVuY3Rpb24gKCkge1xuICAgIHJldHVybiBgJHt0aXRsZX0gZHVlOiAke2R1ZURhdGV9YDtcbiAgfTtcblxuICByZXR1cm4gdGFzaztcbn07XG5cbmV4cG9ydCB7IFRvZG9UYXNrIH07XG4iLCJjb25zdCBQcm9qZWN0ID0gZnVuY3Rpb24gKHRpdGxlKSB7XG4gIGNvbnN0IHByb2plY3QgPSB7fTtcblxuICBwcm9qZWN0LnRpdGxlID0gdGl0bGU7XG5cbiAgcmV0dXJuIHByb2plY3Q7XG59O1xuXG5leHBvcnQgeyBQcm9qZWN0IH07XG4iLCIvLyBUb2RvIExpc3QgSXRlbSBuZWVkcyBhOlxuLy8gLSBwcm9qZWN0IGJlbG9uZ3MgdG9cbi8vIC0gdGl0bGVcbi8vIC0gZGVzY3JpcHRpb25cbi8vIC0gZHVlIGRhdGVcbi8vIC0gY29tcGxldGVkIGNoZWNrIGJveFxuLy8gLSByZWQsIG9yYW5nZSBvciBncmVlbiBmb3IgZGlmZmVyZW50IHByaW9yaXRpZXNcblxuLy8gRmFjdG9yeSBmdW5jdGlvbiBmb3IgYSB0b2RvIGxpc3QgaXRlbVxuXG4vLyBQcm9qZWN0IG5lZWRzIGE6XG4vLyAtIGxpc3Qgb2YgemVybyBvciBtb3JlIHRvZG8gaXRlbXNcblxuLy8gRmFjdG9yeSBmdW5jdGlvbiBmb3IgYSBwcm9qZWN0XG5cbi8vIFZpZXdzOlxuLy8gLSBzaWRlYmFyIHZpZXdcbi8vIC0gcHJvamVjdCB2aWV3XG4vLyAtIGFsbCB0YXNrIHZpZXdcbi8vIC0gdG9kYXkncyB0YXNrcyB2aWV3XG4vLyAtIHRoaXMgd2VlaydzIHRhc2tzIHZpZXdcbi8vIC0gcHJvamVjdCdzIHRhc2tzIHZpZXdcblxuLy8gTW9kYWxzOlxuLy8gLSBlZGl0IHRvZG8gaXRlbVxuLy8gLSBjcmVhdGUgbmV3IHRvZG8gaXRlbVxuLy8gLSBjcmVhdGUgbmV3IHByb2plY3RcblxuLy8gVG9kbyBDb250cm9sbGVyOlxuLy8gLSBkZWxldGUgdG9kb1xuLy8gLSBzaG93IGVkaXQgbW9kYWxcbi8vIC0gZXhwYW5kIGRldGFpbHNcblxuLy8gUHJvamVjdCBDb250cm9sbGVyOlxuLy8gLSBkZWxldGUgcHJvamVjdFxuXG4vL1xuLy9cbi8vXG4vL1xuLy8gLy8gY2hhbmdpbmcgYWN0aXZlIGJ1dHRvbiBvbiB0aGUgbWVudVxuLy8gLy8gYWRkaW5nIHByb2plY3QgbW9kYWwgd2hlbiBuZXcgcHJvamVjdCBpcyBwcmVzc2VkXG4vLyAvLyBhZGRpbmcgbmV3IHRvZG8gdGFzayBtb2RhbCB3aGVuIGFkZCBhIG5ldyBwcm9qZWN0IGlzIHByZXNzZWRcbi8vIC8vIGRlY2lkZSBvbiBob3cgZGF0YSBmb3IgdGFza3MgaXMgc3RvcmVkXG4vLyAvLyBzdWJtaXR0aW5nIHByb2plY3QgbW9kYWwgYWRkcyBhIG5ldyBwcm9qZWN0IC0gaG93IGlzIGl0IHN0b3JlZD9cbi8vIC8vIHN1Ym1pdHRpbmcgdG9kbyB0YXNrIG1vZGFsIGFkZHMgYSBuZXcgdGFzayAtIGhvdyBpcyBpdCBzdG9yZWQ/XG4vLyAvLyBhZGQgZXZlbnQgbGlzdGVuZXJzIHRvIHRhc2tzXG4vLyAvLyBzaG93IGRldGFpbHMgc2xpZGVyIHdoZW4gZG93biBhcnJvdyBpcyBwcmVzc2VkXG4vLyAvLyBjaGFuZ2UgYXJyb3cgaWNvbiB3aGVuIGRldGFpbHMgYXJlIHNob3dpbmcgYW5kIHdoZW4gdGhleSBhcmUgbm90XG4vLyAvLyBjb21wbGV0aW5nIHRhc2sgLSBob3cgZG9lcyBpdCBpbnRlcmFjdCB3aXRoIGRhdGFcbi8vXG4vLyAvLyBzdHJpa2UgdGhyb3VnaCB0aGUgdGl0bGUgd2hlbiB0aGUgdGFzayBpcyBjb21wbGV0ZVxuLy8gLy8gc2hvdyBlZGl0IHNsaWRlciB3aGVuIGVkaXQgaXMgcHJlc3NlZFxuLy8gLy8gc2hvd2luZyB0YXNrIHByaW9yaXR5IGNvbG91ciBhcyB0aGUgbGVmdCBib3JkZXIgY29sb3VyIG9mIHRoZSB0YXNrXG4vLyAvLyBkZWxldGVpbmcgdGFzayAtIGhvdyBkb2VzIGl0IGludGVyYWN0IHdpdGggZGF0YVxuLy8gLy8gcG9wdWxhdGUgdGhlIHRvZGF5IGFuZCB0aGlzIHdlZWsgdmlld3Mgd2l0aCB0aGUgY29ycmVjdCB0YXNrc1xuLy8gLy8gcG9wdWxhdGUgZWFjaCBwcm9qZWN0IHdpdGggdGhlIGNvcnJlY3QgdGFza3Ncbi8vIC8vIGFkZCBsb2NhbHN0b3JhZ2UgdG8gcHJvamVjdFxuLy9cbi8vXG5cbmltcG9ydCB7IGlzU2FtZVdlZWssIGlzU2FtZURheSB9IGZyb20gXCJkYXRlLWZuc1wiO1xuXG5pbXBvcnQgeyBUb2RvVGFzayB9IGZyb20gXCIuL3Rhc2suanNcIjtcbmltcG9ydCB7IFByb2plY3QgfSBmcm9tIFwiLi9wcm9qZWN0LmpzXCI7XG5cbmxldCBtb2RlbCA9IHtcbiAgdGFza3M6IFtcbiAgICBUb2RvVGFzayhcbiAgICAgIFwiSGVsbG8gV29ybGRcIixcbiAgICAgIFwib25lIHR3byB0aHJlZVwiLFxuICAgICAgXCIyMDIyLTAxLTIxXCIsXG4gICAgICB0cnVlLFxuICAgICAgXCJoaWdoXCIsXG4gICAgICBcIlN0YXJ0ZXJcIlxuICAgICksXG4gICAgVG9kb1Rhc2soXG4gICAgICBcIldvcmxkIEhlbGxvXCIsXG4gICAgICBcIm9uZSB0d28gdGhyZWVcIixcbiAgICAgIFwiMjAyMi0wMS0yMFwiLFxuICAgICAgZmFsc2UsXG4gICAgICBcImxvd1wiLFxuICAgICAgXCJTdGFydGVyXCJcbiAgICApLFxuICAgIFRvZG9UYXNrKFxuICAgICAgXCJPbmUgT25lIE9uZVwiLFxuICAgICAgXCJPbmUgSGVsbG9cIixcbiAgICAgIFwiMjAyMi0wOS0xN1wiLFxuICAgICAgdHJ1ZSxcbiAgICAgIFwibWlkZGxlXCIsXG4gICAgICBcIlN0YXJ0ZXJcIlxuICAgICksXG4gIF0sXG4gIHByb2plY3RzOiBbUHJvamVjdChcIlN0YXJ0ZXJcIildLFxufTtcblxuY29uc3Qgc3RvcmFnZSA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IG1vZGVsQ2hhbmdlZCA9ICgpID0+IHtcbiAgICB3cml0ZVN0b3JhZ2UoKTtcbiAgICByZWFkU3RvcmFnZSgpO1xuICB9O1xuXG4gIGZ1bmN0aW9uIHdyaXRlU3RvcmFnZSgpIHtcbiAgICB3aW5kb3cubG9jYWxTdG9yYWdlLnNldEl0ZW0oXCJtb2RlbFwiLCBKU09OLnN0cmluZ2lmeShtb2RlbCkpO1xuICB9XG5cbiAgZnVuY3Rpb24gcmVhZFN0b3JhZ2UoKSB7XG4gICAgaWYgKHdpbmRvdy5sb2NhbFN0b3JhZ2UuZ2V0SXRlbShcIm1vZGVsXCIpKSB7XG4gICAgICBtb2RlbCA9IEpTT04ucGFyc2Uod2luZG93LmxvY2FsU3RvcmFnZS5nZXRJdGVtKFwibW9kZWxcIikpO1xuICAgIH1cbiAgfVxuXG4gIGZ1bmN0aW9uIHJlc2V0U3RvcmFnZSgpIHtcbiAgICBsb2NhbFN0b3JhZ2Uuc2V0SXRlbShcIm1vZGVsXCIsIEpTT04uc3RyaW5naWZ5KG1vZGVsKSk7XG4gIH1cbiAgcmV0dXJuIHsgd3JpdGVTdG9yYWdlLCByZWFkU3RvcmFnZSwgcmVzZXRTdG9yYWdlIH07XG59KSgpO1xuXG4vLyBzdG9yYWdlLnJlc2V0U3RvcmFnZSgpO1xuc3RvcmFnZS5yZWFkU3RvcmFnZSgpO1xuXG5sZXQgd2Vla3NUYXNrcyA9IFtdO1xubGV0IHRvZGF5c1Rhc2tzID0gW107XG5sZXQgcHJvamVjdFRhc2tzID0gW107XG5cbi8vIGNvbnN0IGFkZE5ld1RvZG8gPSAoZnVuY3Rpb24gKCkge1xuLy8gICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcblxuLy8gICBjb25zdCBhZGROZXdUb2RvVmlldyA9ICgpID0+IHtcbi8vICAgICBjb25zdCBodG1sID0gYFxuLy8gICAgIDxkaXYgY2xhc3M9XCJyb3cgbS00IHAtMiByb3VuZGVkIHRvZG8tbmV3LXRhc2tcIiBpZD1cInRvZG8taG92ZXJcIj5cbi8vICAgICAgIDxkaXZcbi8vICAgICAgICAgY2xhc3M9XCJjb2wtbWQtMSBweS0xIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtbWQtZW5kIGp1c3RpZnktY29udGVudC1jZW50ZXIgYWxpZ24taXRlbXMtY2VudGVyXCJcbi8vICAgICAgID5cbi8vICAgICAgICAgPGE+XG4vLyAgICAgICAgICAgPGltZ1xuLy8gICAgICAgICAgICAgY2xhc3M9XCJcIlxuLy8gICAgICAgICAgICAgd2lkdGg9XCIxNlwiXG4vLyAgICAgICAgICAgICBoZWlnaHQ9XCIxNlwiXG4vLyAgICAgICAgICAgICBzcmM9XCIuLi9pY29ucy9wbHVzLWNpcmNsZS5zdmdcIlxuLy8gICAgICAgICAgIC8+XG4vLyAgICAgICAgIDwvYT5cbi8vICAgICAgIDwvZGl2PlxuLy8gICAgICAgPGRpdlxuLy8gICAgICAgICBjbGFzcz1cImNvbC1tZC03IGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LW1kLXN0YXJ0IGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuLy8gICAgICAgPlxuLy8gICAgICAgICBBZGQgYSBuZXcgdGFzayFcbi8vICAgICAgIDwvZGl2PlxuLy8gICAgIDwvZGl2PmA7XG4vLyAgICAgY29uc3QgbmV3RWxlbWVudCA9IGRvY3VtZW50LmNyZWF0ZUVsZW1lbnQoXCJkaXZcIik7XG4vLyAgICAgbmV3RWxlbWVudC5jbGFzc0xpc3QgPSBcImhvdmVyLXRvZG8tbmV3LXRhc2tcIjtcbi8vICAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4vLyAgICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4vLyAgIH07XG4vLyAgIHJldHVybiB7IGFkZE5ld1RvZG9WaWV3IH07XG4vLyB9KSgpO1xuXG4vLyBhZGROZXdUb2RvLmFkZE5ld1RvZG9WaWV3KCk7XG5cbmNvbnN0IG1lbnVDb250cm9sbGVyID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3Qgc2lkZWJhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuc2lkZWJhclwiKTtcblxuICBzaWRlYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICByZW1vdmVBY3RpdmUoKTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJhXCIpID09PSBudWxsKSByZXR1cm47XG4gICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJhXCIpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG5cbiAgICBjb25zdCB0b2RheUJ1dHRvbiA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0b2RheVwiKTtcbiAgICBjb25zdCB3ZWVrQnV0dG9uID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcIndlZWtcIik7XG4gICAgY29uc3QgaG9tZUJ1dHRvbiA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJob21lXCIpO1xuICAgIGNvbnN0IHByb2plY3QgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwicHJvamVjdFwiKTtcblxuICAgIGlmIChob21lQnV0dG9uKSB7XG4gICAgICB0b2RvVmlldy5yZW1vdmVBbGxUYXNrcygpO1xuICAgICAgbW9kZWwudGFza3MuZm9yRWFjaCgodGFzaykgPT4gdG9kb1ZpZXcuYWRkVG9kb1RvVmlldyh0YXNrKSk7XG4gICAgfVxuXG4gICAgaWYgKHRvZGF5QnV0dG9uKSB7XG4gICAgICBjb25zdCBjdXJyZW50VGFza3MgPSBbXTtcbiAgICAgIG1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgaWYgKGlzU2FtZURheShuZXcgRGF0ZSh0YXNrLmR1ZURhdGUpLCBuZXcgRGF0ZSgpKSkge1xuICAgICAgICAgIGN1cnJlbnRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIHRvZGF5c1Rhc2tzID0gY3VycmVudFRhc2tzO1xuICAgICAgdG9kb1ZpZXcucmVtb3ZlQWxsVGFza3MoKTtcbiAgICAgIHRvZGF5c1Rhc2tzLmZvckVhY2goKHRhc2spID0+IHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcodGFzaykpO1xuICAgIH1cblxuICAgIGlmICh3ZWVrQnV0dG9uKSB7XG4gICAgICBjb25zdCBjdXJyZW50VGFza3MgPSBbXTtcbiAgICAgIG1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHtcbiAgICAgICAgaWYgKGlzU2FtZVdlZWsobmV3IERhdGUodGFzay5kdWVEYXRlKSwgbmV3IERhdGUoKSkpIHtcbiAgICAgICAgICBjdXJyZW50VGFza3MucHVzaCh0YXNrKTtcbiAgICAgICAgfVxuICAgICAgfSk7XG4gICAgICB3ZWVrc1Rhc2tzID0gY3VycmVudFRhc2tzO1xuICAgICAgdG9kb1ZpZXcucmVtb3ZlQWxsVGFza3MoKTtcbiAgICAgIHdlZWtzVGFza3MuZm9yRWFjaCgodGFzaykgPT4gdG9kb1ZpZXcuYWRkVG9kb1RvVmlldyh0YXNrKSk7XG4gICAgfVxuXG4gICAgaWYgKHByb2plY3QpIHtcbiAgICAgIGNvbnN0IHByb2plY3ROYW1lID1cbiAgICAgICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCIubmF2LWl0ZW1cIikubGFzdENoaWxkLmNoaWxkTm9kZXNbMl0udGV4dENvbnRlbnQ7XG4gICAgICBjb25zb2xlLmxvZyhwcm9qZWN0TmFtZSk7XG5cbiAgICAgIC8vIGZpbHRlciB0YXNrcyB3aXRoIHByb2plY3RzIG5hbWVcbiAgICAgIGNvbnN0IGN1cnJlbnRUYXNrcyA9IFtdO1xuICAgICAgbW9kZWwudGFza3MuZm9yRWFjaCgodGFzaykgPT4ge1xuICAgICAgICBpZiAodGFzay5wcm9qZWN0ID09PSBwcm9qZWN0TmFtZSkge1xuICAgICAgICAgIGN1cnJlbnRUYXNrcy5wdXNoKHRhc2spO1xuICAgICAgICB9XG4gICAgICB9KTtcbiAgICAgIC8vIHJlbmRlciB0YXNrc1xuICAgICAgcHJvamVjdFRhc2tzID0gY3VycmVudFRhc2tzO1xuICAgICAgdG9kb1ZpZXcucmVtb3ZlQWxsVGFza3MoKTtcbiAgICAgIHByb2plY3RUYXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KHRhc2spKTtcbiAgICB9XG4gIH0pO1xufSkoKTtcblxuZnVuY3Rpb24gcmVtb3ZlQWN0aXZlKCkge1xuICBsZXQgYnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tZW51LWJ1dHRvblwiKSk7XG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XG59XG5cbmNvbnN0IHByb2plY3RNb2RhbCA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWJ1dHRvblwiKTtcbiAgY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbC1jbG9zZVwiKTtcbiAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXN1Ym1pdFwiKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXByb2plY3QtZm9ybVwiKTtcblxuICBvcGVuTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzaG93TW9kYWwoKTtcbiAgfSk7XG5cbiAgY2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGl0bGUgPSBmb3JtW1widGl0bGVcIl07XG4gICAgY29uc3QgdGl0bGVWYWxpZCA9IHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2hlY2tUaXRsZSh0aXRsZSk7XG4gICAgaWYgKHRpdGxlVmFsaWQpIHtcbiAgICAgIC8vIGNyZWF0ZSBwcm9qZWN0XG4gICAgICBjb25zdCBuZXdQcm9qZWN0ID0gUHJvamVjdCh0aXRsZS52YWx1ZSk7XG4gICAgICAvLyBwdXNoIHByb2plY3QgdG8gc3RvcmFnZVxuICAgICAgbW9kZWwucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgIC8vIHJlbmRlciBwcm9qZWN0XG4gICAgICBwcm9qZWN0TWVudVZpZXcuYWRkUHJvamVjdFRvVmlldyhuZXdQcm9qZWN0KTtcbiAgICAgIC8vIGNsZWFyIGZvcm1cbiAgICAgIHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2xlYXJGb3JtKGZvcm0pO1xuICAgICAgLy8gYWRkIHByb2plY3QgdG8gbG9jYWxzdG9yYWdlXG4gICAgICBzdG9yYWdlLndyaXRlU3RvcmFnZSgpO1xuICAgICAgLy8gY2xvc2UgbW9kYWxcbiAgICAgIGhpZGVNb2RhbCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICB9O1xuXG4gIGNvbnN0IGhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IHByb2plY3RNb2RhbFZhbGlkYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBpc1JlcXVpcmVkID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcbiAgfTtcblxuICBjb25zdCBzaG93U3VjY2VzcyA9IChpbnB1dCkgPT4ge1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcbiAgfTtcblxuICBjb25zdCBjaGVja1RpdGxlID0gKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0aXRsZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKHRpdGxlKSkge1xuICAgICAgc2hvd0Vycm9yKGVsZW1lbnQsIFwiVGl0bGUgY2Fubm90IGJlIGVtcHR5LlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd1N1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjbGVhckZvcm0gPSAoZm9ybSkgPT4ge1xuICAgIGZvcm1bXCJ0aXRsZVwiXS52YWx1ZSA9IFwiXCI7XG4gIH07XG4gIHJldHVybiB7IGNoZWNrVGl0bGUsIGNsZWFyRm9ybSB9O1xufSkoKTtcblxuY29uc3QgcHJvamVjdE1lbnVWaWV3ID0gKGZ1bmN0aW9uICgpIHtcbiAgLy8gYWRkTmV3VG9kby5hZGROZXdUb2RvVmlldygpO1xuICBjb25zdCBwcm9qZWN0TWVudSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tZW51XCIpO1xuICBjb25zdCBmb3JtUHJvamVjdExpc3QgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmZvcm0tcHJvamVjdC1zZWxlY3RvclwiKTtcblxuICBjb25zdCBhZGRQcm9qZWN0VG9WaWV3ID0gKHByb2plY3QpID0+IHtcbiAgICBwcm9qZWN0TWVudS5hcHBlbmRDaGlsZChjcmVhdGVQcm9qZWN0Q29tcG9uZW50KHByb2plY3QpKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVQcm9qZWN0Q29tcG9uZW50ID0gKHByb2plY3QpID0+IHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5hdi1saW5rIG1lbnUtYnV0dG9uIGxpbmstZGFyayByb3VuZGVkIHByb2plY3RcIj5cbiAgICAgICAgPGltZ1xuICAgICAgICAgIGNsYXNzPVwiYmkgbWUtMiBwcm9qZWN0XCJcbiAgICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgICAgc3JjPVwiLi4vaWNvbnMvYXJyb3ctcmlnaHQtc2hvcnQuc3ZnXCJcbiAgICAgICAgLz48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZSBwcm9qZWN0XCI+JHtwcm9qZWN0LnRpdGxlfTwvc3Bhbj48L2FcbiAgICAgID5gO1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwibGlcIik7XG4gICAgbmV3RWxlbWVudC5jbGFzc0xpc3QgPSBcIm5hdi1pdGVtIG0tMVwiO1xuICAgIG5ld0VsZW1lbnQuaW5uZXJIVE1MID0gaHRtbDtcbiAgICByZXR1cm4gbmV3RWxlbWVudDtcbiAgfTtcblxuICBjb25zdCBhZGRQcm9qZWN0VG9Ub2RvU2VsZWN0b3JGb3JtID0gKCkgPT4ge1xuICAgIGxldCBodG1sID0gXCJcIjtcbiAgICBtb2RlbC5wcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiB7XG4gICAgICBodG1sICs9IGA8b3B0aW9uPiR7cHJvamVjdC50aXRsZX08L29wdGlvbj5gO1xuICAgIH0pO1xuICAgIGZvcm1Qcm9qZWN0TGlzdC5pbm5lckhUTUwgPSBodG1sO1xuICB9O1xuICByZXR1cm4geyBhZGRQcm9qZWN0VG9WaWV3LCBhZGRQcm9qZWN0VG9Ub2RvU2VsZWN0b3JGb3JtIH07XG59KSgpO1xuXG5jb25zdCB0b2RvTW9kYWwgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGFzay1tb2RhbFwiKTtcbiAgY29uc3Qgb3Blbk1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLW5ldy10YXNrXCIpO1xuICBjb25zdCBjbG9zZU1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLW1vZGFsLWNsb3NlXCIpO1xuICBjb25zdCBmb3JtID0gZG9jdW1lbnQuZ2V0RWxlbWVudEJ5SWQoXCJuZXctdG9kby1mb3JtXCIpO1xuICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tc3VibWl0XCIpO1xuXG4gIG9wZW5Nb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIHByb2plY3RNZW51Vmlldy5hZGRQcm9qZWN0VG9Ub2RvU2VsZWN0b3JGb3JtKCk7XG4gICAgb3BlbigpO1xuICB9KTtcblxuICBjbG9zZU1vZGFsLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoKSA9PiB7XG4gICAgY2xvc2UoKTtcbiAgfSk7XG5cbiAgc3VibWl0LmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IGZvcm1Qcm9qZWN0U2VsZWN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXByb2plY3Qtc2VsZWN0b3JcIik7XG5cbiAgICAvLyBnZXQgZm9ybSBlbGVtZW50c1xuICAgIGNvbnN0IHRpdGxlID0gZm9ybVtcInRpdGxlXCJdO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybVtcImRlc2NyaXB0aW9uXCJdO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBmb3JtW1wiZHVlRGF0ZVwiXTtcbiAgICBjb25zdCBwcm9qZWN0ID1cbiAgICAgIGZvcm1Qcm9qZWN0U2VsZWN0Lm9wdGlvbnNbZm9ybVByb2plY3RTZWxlY3Quc2VsZWN0ZWRJbmRleF0udmFsdWU7XG4gICAgY29uc3QgcHJpb3JpdHkgPSBmb3JtW1wib3B0cmFkaW9cIl0udmFsdWU7XG5cbiAgICAvLyB2YWxpZGF0ZSBmb3JtIGVsZW1lbnRzXG4gICAgbGV0IHRpdGxlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrVGl0bGUodGl0bGUpLFxuICAgICAgZGVzY3JpcHRpb25WYWxpZCA9IHRvZG9Nb2RhbFZhbGlkYXRpb24uY2hlY2tEZXNjcmlwdGlvbihkZXNjcmlwdGlvbiksXG4gICAgICBkYXRlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrRGF0ZShkdWVEYXRlKTtcblxuICAgIGxldCBpc0Zvcm1WYWxpZCA9IHRpdGxlVmFsaWQgJiYgZGVzY3JpcHRpb25WYWxpZCAmJiBkYXRlVmFsaWQ7XG4gICAgLy8gY29uc3QgdGl0bGVWYWxpZCA9IHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2hlY2tUaXRsZSh0aXRsZSk7XG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XG4gICAgICAvLyBjcmVhdGUgdG9kb1xuICAgICAgY29uc3QgbmV3VG9kbyA9IFRvZG9UYXNrKFxuICAgICAgICB0aXRsZS52YWx1ZSxcbiAgICAgICAgZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgIGR1ZURhdGUudmFsdWUsXG4gICAgICAgIGZhbHNlLFxuICAgICAgICBwcmlvcml0eSxcbiAgICAgICAgcHJvamVjdFxuICAgICAgKTtcbiAgICAgIC8vIHB1c2ggdG9kbyB0byBzdG9yYWdlXG4gICAgICBtb2RlbC50YXNrcy5wdXNoKG5ld1RvZG8pO1xuICAgICAgLy8gcmVuZGVyIHRvZG9cbiAgICAgIHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcobmV3VG9kbyk7XG4gICAgICAvLyBjbGVhciBmb3JtXG4gICAgICB0b2RvTW9kYWxWYWxpZGF0aW9uLmNsZWFyRm9ybShmb3JtKTtcbiAgICAgIC8vIGFkZCB0b2RvIHRvIGxvY2FsIHN0b3JhZ2VcbiAgICAgIHN0b3JhZ2Uud3JpdGVTdG9yYWdlKCk7XG5cbiAgICAgIC8vIGNsb3NlIG1vZGFsXG4gICAgICBjbG9zZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgb3BlbiA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwiaGlkZVwiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwic2hvd1wiKTtcbiAgfTtcblxuICBjb25zdCBjbG9zZSA9ICgpID0+IHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IHRvZG9Nb2RhbFZhbGlkYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBpc1JlcXVpcmVkID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IG5vdEluRnV0dXJlID0gKHZhbHVlKSA9PiB7XG4gICAgY29uc3QgdGFza0RhdGUgPSBuZXcgRGF0ZShgJHt2YWx1ZX1gKTtcbiAgICBjb25zdCBbeWVhciwgbW9udGgsIGRheV0gPSB2YWx1ZS5zcGxpdChcIi1cIik7XG4gICAgY29uc3QgY3VycmVudERhdGUgPSBuZXcgRGF0ZSgpO1xuICAgIGNvbnN0IGNEYXkgPSBjdXJyZW50RGF0ZS5nZXREYXRlKCk7XG4gICAgY29uc3QgY01vbnRoID0gY3VycmVudERhdGUuZ2V0TW9udGgoKSArIDE7XG4gICAgY29uc3QgY1llYXIgPSBjdXJyZW50RGF0ZS5nZXRGdWxsWWVhcigpO1xuXG4gICAgaWYgKCt5ZWFyID09PSBjWWVhciAmJiArbW9udGggPT09IGNNb250aCAmJiArZGF5ID09PSBjRGF5KSB7XG4gICAgICByZXR1cm4gZmFsc2U7XG4gICAgfSBlbHNlIHtcbiAgICAgIHJldHVybiAhKHRhc2tEYXRlID4gY3VycmVudERhdGUpO1xuICAgIH1cbiAgfTtcblxuICBjb25zdCBzaG93VGl0bGVFcnJvciA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50aXRsZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcblxuICBjb25zdCBzaG93RGVzY0Vycm9yID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NFcnJvclwiKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IG1lc3NhZ2U7XG4gIH07XG4gIGNvbnN0IHNob3dEYXRlRXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGF0ZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcblxuICBjb25zdCBzaG93VGl0bGVTdWNjZXNzID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IHNob3dEZXNjU3VjY2VzcyA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kZXNjRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuICBjb25zdCBzaG93RGF0ZVN1Y2Nlc3MgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGF0ZUVycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gXCJcIjtcbiAgfTtcblxuICBjb25zdCBjaGVja1RpdGxlID0gKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0aXRsZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKHRpdGxlKSkge1xuICAgICAgc2hvd1RpdGxlRXJyb3IoZWxlbWVudCwgXCJUaXRsZSBjYW5ub3QgYmUgZW1wdHkuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93VGl0bGVTdWNjZXNzKGVsZW1lbnQpO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgY2hlY2tEZXNjcmlwdGlvbiA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IHZhbGlkID0gZmFsc2U7XG4gICAgY29uc3QgZGVzY3JpcHRpb24gPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoaXNSZXF1aXJlZChkZXNjcmlwdGlvbikpIHtcbiAgICAgIHNob3dEZXNjRXJyb3IoZWxlbWVudCwgXCJEZXNjcmlwdGlvbiBjYW5ub3QgYmUgZW1wdHkuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93RGVzY1N1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjaGVja0RhdGUgPSAoZWxlbWVudCkgPT4ge1xuICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBlbGVtZW50LnZhbHVlLnRyaW0oKTtcbiAgICBpZiAoaXNSZXF1aXJlZChkdWVEYXRlKSkge1xuICAgICAgc2hvd0RhdGVFcnJvcihlbGVtZW50LCBcIkR1ZSBkYXRlIGNhbm5vdCBiZSBlbXB0eVwiKTtcbiAgICB9XG4gICAgaWYgKG5vdEluRnV0dXJlKGR1ZURhdGUpKSB7XG4gICAgICBzaG93RGF0ZUVycm9yKGVsZW1lbnQsIFwiRHVlIGRhdGUgbXVzdCBiZSBpbiB0aGUgZnV0dXJlLlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd0RhdGVTdWNjZXNzKGVsZW1lbnQpO1xuICAgICAgdmFsaWQgPSB0cnVlO1xuICAgIH1cbiAgICByZXR1cm4gdmFsaWQ7XG4gIH07XG5cbiAgY29uc3QgY2xlYXJGb3JtID0gKGZvcm0pID0+IHtcbiAgICBmb3JtW1widGl0bGVcIl0udmFsdWUgPSBcIlwiO1xuICAgIGZvcm1bXCJkZXNjcmlwdGlvblwiXS52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybVtcImR1ZURhdGVcIl0udmFsdWUgPSBcIlwiO1xuICB9O1xuICByZXR1cm4geyBjaGVja1RpdGxlLCBjaGVja0Rlc2NyaXB0aW9uLCBjaGVja0RhdGUsIGNsZWFyRm9ybSB9O1xufSkoKTtcblxuY29uc3QgdG9kb1ZpZXcgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcblxuICBjb25zdCByZW1vdmVBbGxUYXNrcyA9ICgpID0+IHtcbiAgICB3aGlsZSAodG9kb0NvbnRhaW5lci5maXJzdENoaWxkKSB7XG4gICAgICB0b2RvQ29udGFpbmVyLnJlbW92ZUNoaWxkKHRvZG9Db250YWluZXIubGFzdENoaWxkKTtcbiAgICB9XG4gICAgLy8gdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZChhZGROZXdUb2RvQnV0dG9uVG9WaWV3KCkpO1xuICB9O1xuXG4gIC8vIGNvbnN0IGFkZE5ld1RvZG9CdXR0b25Ub1ZpZXcgPSAoKSA9PiB7XG4gIC8vICAgY29uc3QgaHRtbCA9IGBcbiAgLy8gICA8ZGl2IGNsYXNzPVwicm93IG0tNCBwLTIgcm91bmRlZCB0b2RvLW5ldy10YXNrXCIgaWQ9XCJ0b2RvLWhvdmVyXCI+XG4gIC8vICAgICA8ZGl2XG4gIC8vICAgICAgIGNsYXNzPVwiY29sLW1kLTEgcHktMSBkLWZsZXgganVzdGlmeS1jb250ZW50LW1kLWVuZCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIGFsaWduLWl0ZW1zLWNlbnRlclwiXG4gIC8vICAgICA+XG4gIC8vICAgICAgIDxhPlxuICAvLyAgICAgICAgIDxpbWdcbiAgLy8gICAgICAgICAgIGNsYXNzPVwiXCJcbiAgLy8gICAgICAgICAgIHdpZHRoPVwiMTZcIlxuICAvLyAgICAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAvLyAgICAgICAgICAgc3JjPVwiLi4vaWNvbnMvcGx1cy1jaXJjbGUuc3ZnXCJcbiAgLy8gICAgICAgICAvPlxuICAvLyAgICAgICA8L2E+XG4gIC8vICAgICA8L2Rpdj5cbiAgLy8gICAgIDxkaXZcbiAgLy8gICAgICAgY2xhc3M9XCJjb2wtbWQtNyBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgLy8gICAgID5cbiAgLy8gICAgICAgQWRkIGEgbmV3IHRhc2shXG4gIC8vICAgICA8L2Rpdj5cbiAgLy8gICA8L2Rpdj5gO1xuICAvLyAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAvLyAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gXCJob3Zlci10b2RvLW5ldy10YXNrXCI7XG4gIC8vICAgbmV3RWxlbWVudC5pbm5lckhUTUwgPSBodG1sO1xuICAvLyAgIHJldHVybiBuZXdFbGVtZW50O1xuICAvLyB9O1xuXG4gIGNvbnN0IGFkZFRvZG9Ub1ZpZXcgPSAodG9kbykgPT4ge1xuICAgIC8vIGNvbnN0IGZpcnN0Q2hpbGQgPSB0b2RvQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIC8vIGZpcnN0Q2hpbGQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgY3JlYXRlVG9kb0NvbXBvbmVudCh0b2RvKSk7XG4gICAgdG9kb0NvbnRhaW5lci5hcHBlbmRDaGlsZChjcmVhdGVUb2RvQ29tcG9uZW50KHRvZG8pKTtcbiAgfTtcblxuICBjb25zdCBjcmVhdGVUb2RvQ29tcG9uZW50ID0gKHRvZG8pID0+IHtcbiAgICBjb25zdCBodG1sID0gYFxuICAgIDxkaXZcbiAgICBjbGFzcz1cImNvbC1tZC0xIHB5LTEgZC1mbGV4IGp1c3RpZnktY29udGVudC1tZC1lbmQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICA8aW5wdXQgdHlwZT1cImNoZWNrYm94XCIgY2xhc3M9XCJ0YXNrLWNoZWNrYm94XCIgJHtcbiAgICAgIHRvZG8uY29tcGxldGVkID8gXCJjaGVja2VkXCIgOiBcIlwiXG4gICAgfS8+XG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtNiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgPlxuICAgICR7dG9kby5jb21wbGV0ZWQgPyBgPGRlbD4ke3RvZG8udGl0bGV9PC9kZWw+YCA6IGAke3RvZG8udGl0bGV9YH1cbiAgPC9kaXY+XG4gICAgPGRpdlxuICAgICAgICBjbGFzcz1cImNvbC1tZC0xIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyIHRhc2stYXJyb3dcIlxuICAgICAgICAgPlxuICAgICAgICA8aW1nXG4gICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtZG93blwiXG4gICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgIGhlaWdodD1cIjE2XCJcbiAgICAgICAgIHNyYz1cIi4uL2ljb25zL2NhcmV0LWRvd24uc3ZnXCJcbiAgICAgICAgIC8+XG4gICAgPC9kaXY+XG4gIDxkaXZcbiAgICBjbGFzcz1cImNvbC1tZC0yIGQtZmxleCBhbGlnbi1pdGVtcy1jZW50ZXIganVzdGlmeS1jb250ZW50LW1kLXN0YXJ0IGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuICA+XG4gICAgJHt0b2RvLmR1ZURhdGV9XG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWVkaXRcIlxuICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICBzcmM9XCIuLi9pY29ucy9wZW5jaWwtc3F1YXJlLnN2Z1wiXG4gICAgICAvPlxuXG4gIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICAgIDxpbWdcbiAgICAgICAgY2xhc3M9XCJ0YXNrLWRlbGV0ZVwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL3RyYXNoLnN2Z1wiXG4gICAgICAvPlxuICA8L2Rpdj5gO1xuICAgIGNvbnN0IG5ld0VsZW1lbnQgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gYHJvdyBtLTQgcC0yIGJnLXdoaXRlIHJvdW5kZWQtMyBib3JkZXItYm90dG9tICAke1xuICAgICAgdG9kby5wcmlvcml0eSA9PT0gXCJoaWdoXCJcbiAgICAgICAgPyBcInJlZC1ib3JkZXJcIlxuICAgICAgICA6IHRvZG8ucHJpb3JpdHkgPT09IFwibWlkZGxlXCJcbiAgICAgICAgPyBcIm9yYW5nZS1ib3JkZXJcIlxuICAgICAgICA6IFwiZ3JlZW4tYm9yZGVyXCJcbiAgICB9YDtcbiAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHsgYWRkVG9kb1RvVmlldywgcmVtb3ZlQWxsVGFza3MgfTtcbn0pKCk7XG5cbmNvbnN0IHRhc2tzTGlzdGVuZXIgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCB0b2RvTWFpbkNvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1tYWluLWNvbnRhaW5lclwiKTtcbiAgLy8gICBjb25zdCB0b2RvQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLWNvbnRhaW5lclwiKTtcblxuICB0b2RvTWFpbkNvbnRhaW5lci5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgY29uc3QgY2hlY2tib3hDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1jaGVja2JveFwiKTtcbiAgICBjb25zdCBhcnJvd0NvbnRhaW5lciA9XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS1kb3duXCIpIHx8XG4gICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS11cFwiKTtcbiAgICBjb25zdCBlZGl0Q29udGFpbmVyID0gZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRhc2stZWRpdFwiKTtcbiAgICBjb25zdCBkZWxldGVDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1kZWxldGVcIik7XG5cbiAgICBjb25zdCBob21lQWN0aXZlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5ob21lLWFjdGl2ZVwiKTtcblxuICAgIGlmIChjaGVja2JveENvbnRhaW5lcikge1xuICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgY29uc3QgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgY29uc3QgZGF0ZSA9IHJvd1s3XS50ZXh0Q29udGVudC50cmltKCk7XG5cbiAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICk7XG4gICAgICB0YXNrWzBdLmNvbXBsZXRlZCA9ICF0YXNrWzBdLmNvbXBsZXRlZDtcbiAgICAgIGlmICh0YXNrWzBdLmNvbXBsZXRlZCkge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gYDxkZWw+JHtyb3dbM10uaW5uZXJIVE1MfTwvZGVsPmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gcm93WzNdLmlubmVySFRNTC5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgXCJcIik7XG4gICAgICB9XG4gICAgICBzdG9yYWdlLndyaXRlU3RvcmFnZSgpO1xuICAgIH1cblxuICAgIGlmIChhcnJvd0NvbnRhaW5lcikge1xuICAgICAgbGV0IHRpdGxlO1xuICAgICAgbGV0IGRhdGU7XG4gICAgICBsZXQgZGl2O1xuICAgICAgbGV0IGFycm93O1xuXG4gICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucyhcInRhc2stYXJyb3ctaW1hZ2UtZG93blwiKSkge1xuICAgICAgICBjb25zdCByb3cgPSBBcnJheS5mcm9tKGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGUuY2hpbGROb2Rlcyk7XG4gICAgICAgIGxldCBhcnJvd0ltYWdlRGl2ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGU7XG4gICAgICAgIGRpdiA9IGV2ZW50LnRhcmdldC5wYXJlbnROb2RlLnBhcmVudE5vZGU7XG4gICAgICAgIGNvbnNvbGUubG9nKHJvdyk7XG4gICAgICAgIGNvbnNvbGUubG9nKGRpdik7XG4gICAgICAgIHRpdGxlID0gcm93WzNdLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgZGF0ZSA9IHJvd1s3XS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgICAgIGFycm93SW1hZ2VEaXYuaW5uZXJIVE1MID0gdXBBcnJvd0h0bWwoKTtcblxuICAgICAgICBjb25zb2xlLmxvZyh0aXRsZSwgZGF0ZSk7XG5cbiAgICAgICAgY29uc3QgdGFzayA9IG1vZGVsLnRhc2tzLmZpbHRlcihcbiAgICAgICAgICAodGFzaykgPT4gdGFzay50aXRsZSA9PT0gdGl0bGUgJiYgdGFzay5kdWVEYXRlID09PSBkYXRlXG4gICAgICAgICk7XG4gICAgICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgICAgICBjb25zdCBkZXNjRGl2ID0gY3JlYXRlRGVzY3JpcHRpb25EaXYodGFzayk7XG4gICAgICAgIGRpdi5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBkZXNjRGl2KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWFycm93LWltYWdlLXVwXCIpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgbGV0IGFycm93SW1hZ2VEaXYgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgZGl2ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgYXJyb3dJbWFnZURpdi5pbm5lckhUTUwgPSBkb3duQXJyb3dIdG1sKCk7XG5cbiAgICAgICAgZGl2Lm5leHRFbGVtZW50U2libGluZy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG5cbiAgICBpZiAoZWRpdENvbnRhaW5lcikge1xuICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgY29uc29sZS5sb2cocm93KTtcbiAgICAgIGxldCB0aXRsZSA9IHJvd1szXS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgICBsZXQgZGF0ZSA9IHJvd1s3XS50ZXh0Q29udGVudC50cmltKCk7XG4gICAgICBjb25zdCB0YXNrID0gbW9kZWwudGFza3MuZmlsdGVyKFxuICAgICAgICAodGFzaykgPT4gdGFzay50aXRsZSA9PT0gdGl0bGUgJiYgdGFzay5kdWVEYXRlID09PSBkYXRlXG4gICAgICApO1xuICAgICAgY29uc29sZS5sb2codGFzayk7XG4gICAgICB0b2RvRWRpdE1vZGFsLmZpbGxGb3JtKHRhc2spO1xuICAgICAgdG9kb0VkaXRNb2RhbC5vcGVuKCk7XG4gICAgfVxuXG4gICAgaWYgKGRlbGV0ZUNvbnRhaW5lcikge1xuICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgbGV0IHRpdGxlID0gcm93WzNdLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIGxldCBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICk7XG4gICAgICBsZXQgaW5kZXg7XG4gICAgICBtb2RlbC50YXNrcy5maWx0ZXIoKHQsIGkpID0+IHtcbiAgICAgICAgaWYgKFxuICAgICAgICAgIHRhc2tbMF0udGl0bGUgPT09IHQudGl0bGUgJiZcbiAgICAgICAgICB0YXNrWzBdLmRlc2NyaXB0aW9uID09PSB0LmRlc2NyaXB0aW9uICYmXG4gICAgICAgICAgdGFza1swXS5kdWVEYXRlID09PSB0LmR1ZURhdGVcbiAgICAgICAgKSB7XG4gICAgICAgICAgaW5kZXggPSBpO1xuICAgICAgICB9XG4gICAgICB9KTtcblxuICAgICAgbW9kZWwudGFza3Muc3BsaWNlKGluZGV4LCAxKTtcbiAgICAgIHJlbW92ZUFjdGl2ZSgpO1xuICAgICAgaG9tZUFjdGl2ZS5jbGFzc0xpc3QuYWRkKFwiYWN0aXZlXCIpO1xuICAgICAgdG9kb1ZpZXcucmVtb3ZlQWxsVGFza3MoKTtcbiAgICAgIG1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcodGFzaykpO1xuICAgICAgc3RvcmFnZS53cml0ZVN0b3JhZ2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwQXJyb3dIdG1sID0gKCkgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGltZ1xuICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtdXBcIlxuICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICBzcmM9XCIuLi9pY29ucy9jYXJldC11cC5zdmdcIlxuICAgIC8+YDtcbiAgICByZXR1cm4gaHRtbDtcbiAgfTtcblxuICBjb25zdCBkb3duQXJyb3dIdG1sID0gKCkgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGltZ1xuICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtZG93blwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL2NhcmV0LWRvd24uc3ZnXCJcbiAgICAvPmA7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlRGVzY3JpcHRpb25EaXYgPSAodGFzaykgPT4ge1xuICAgIGNvbnNvbGUubG9nKHRhc2spO1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBweS0xXCI+XG4gICAgICA8aDYgY2xhc3M9XCJmdy1ib2xkXCI+RGVzY3JpcHRpb248L2g2PlxuICAgICAgPHAgY2xhc3M9XCJcIj5cbiAgICAgICR7dGFza1swXS5kZXNjcmlwdGlvbn1cbiAgICAgIDwvcD5cbiAgPC9kaXY+YDtcblxuICAgIGNvbnN0IGRldGFpbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRldGFpbHNEaXYuY2xhc3NMaXN0ID1cbiAgICAgIFwibW9kYWwtYm9keSBteC01IG15LTMgYmctbGlnaHQgcm91bmRlZC0zIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5IHAtMyByb3VuZGVkLTMgZGVzY3JpcHRpb24tZGl2XCI7XG4gICAgZGV0YWlsc0Rpdi5pbm5lckhUTUwgPSBodG1sO1xuICAgIHJldHVybiBkZXRhaWxzRGl2O1xuICB9O1xuXG4gIHJldHVybiB7fTtcbn0pKCk7XG5cbmNvbnN0IHRvZG9FZGl0TW9kYWwgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBtb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZWRpdC1tb2RhbFwiKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwiZWRpdC1tb2RhbC1mb3JtXCIpO1xuICBjb25zdCBzdWJtaXQgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtc3VibWl0XCIpO1xuICBjb25zdCBjYW5jZWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmVkaXQtY2FuY2VsXCIpO1xuXG4gIGNvbnN0IGhvbWVBY3RpdmUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmhvbWUtYWN0aXZlXCIpO1xuXG4gIGxldCBjdXJyZW50VGFzaztcblxuICBjb25zdCBvcGVuID0gKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICB9O1xuXG4gIGNvbnN0IGNsb3NlID0gKCkgPT4ge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJzaG93XCIpO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJoaWRlXCIpO1xuICB9O1xuXG4gIGNvbnN0IGZpbGxGb3JtID0gKHRhc2spID0+IHtcbiAgICBjdXJyZW50VGFzayA9IHRhc2s7XG4gICAgY29uc29sZS5sb2coY3VycmVudFRhc2spO1xuICAgIGZvcm1bXCJ0aXRsZVwiXS52YWx1ZSA9IHRhc2tbMF0udGl0bGU7XG4gICAgZm9ybVtcImRlc2NyaXB0aW9uXCJdLnZhbHVlID0gdGFza1swXS5kZXNjcmlwdGlvbjtcbiAgICBmb3JtW1wiZHVlRGF0ZVwiXS52YWx1ZSA9IHRhc2tbMF0uZHVlRGF0ZTtcbiAgfTtcblxuICBjYW5jZWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICB0b2RvTW9kYWxWYWxpZGF0aW9uLmNsZWFyRm9ybShmb3JtKTtcbiAgICBjbG9zZSgpO1xuICB9KTtcblxuICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGNvbnNvbGUubG9nKGN1cnJlbnRUYXNrKTtcbiAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xuICAgIGNvbnN0IHRpdGxlID0gZm9ybVtcInRpdGxlXCJdO1xuICAgIGNvbnN0IGRlc2NyaXB0aW9uID0gZm9ybVtcImRlc2NyaXB0aW9uXCJdO1xuICAgIGNvbnN0IGR1ZURhdGUgPSBmb3JtW1wiZHVlRGF0ZVwiXTtcbiAgICAvLyB2YWxpZGF0ZSBmb3JtIGVsZW1lbnRzXG4gICAgbGV0IHRpdGxlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrVGl0bGUodGl0bGUpLFxuICAgICAgZGVzY3JpcHRpb25WYWxpZCA9IHRvZG9Nb2RhbFZhbGlkYXRpb24uY2hlY2tEZXNjcmlwdGlvbihkZXNjcmlwdGlvbiksXG4gICAgICBkYXRlVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrRGF0ZShkdWVEYXRlKTtcblxuICAgIGxldCBpc0Zvcm1WYWxpZCA9IHRpdGxlVmFsaWQgJiYgZGVzY3JpcHRpb25WYWxpZCAmJiBkYXRlVmFsaWQ7XG4gICAgaWYgKGlzRm9ybVZhbGlkKSB7XG4gICAgICAvLyBjcmVhdGUgdG9kb1xuICAgICAgY29uc29sZS5sb2coY3VycmVudFRhc2spO1xuICAgICAgY29uc3QgbmV3VG9kbyA9IFRvZG9UYXNrKFxuICAgICAgICB0aXRsZS52YWx1ZSxcbiAgICAgICAgZGVzY3JpcHRpb24udmFsdWUsXG4gICAgICAgIGR1ZURhdGUudmFsdWUsXG4gICAgICAgIGN1cnJlbnRUYXNrWzBdLmNvbXBsZXRlZCxcbiAgICAgICAgY3VycmVudFRhc2tbMF0ucHJpb3JpdHksXG4gICAgICAgIGN1cnJlbnRUYXNrWzBdLnByb2plY3RcbiAgICAgICk7XG4gICAgICBjb25zb2xlLmxvZyhuZXdUb2RvKTtcblxuICAgICAgbGV0IGluZGV4O1xuICAgICAgbW9kZWwudGFza3MuZmlsdGVyKCh0LCBpKSA9PiB7XG4gICAgICAgIGlmIChcbiAgICAgICAgICBjdXJyZW50VGFza1swXS50aXRsZSA9PT0gdC50aXRsZSAmJlxuICAgICAgICAgIGN1cnJlbnRUYXNrWzBdLmRlc2NyaXB0aW9uID09PSB0LmRlc2NyaXB0aW9uICYmXG4gICAgICAgICAgY3VycmVudFRhc2tbMF0uZHVlRGF0ZSA9PT0gdC5kdWVEYXRlXG4gICAgICAgICkge1xuICAgICAgICAgIGluZGV4ID0gaTtcbiAgICAgICAgfVxuICAgICAgfSk7XG5cbiAgICAgIG1vZGVsLnRhc2tzLnNwbGljZShpbmRleCwgMSwgbmV3VG9kbyk7XG5cbiAgICAgIC8vIGNsZWFyIGZvcm1cbiAgICAgIHRvZG9Nb2RhbFZhbGlkYXRpb24uY2xlYXJGb3JtKGZvcm0pO1xuXG4gICAgICByZW1vdmVBY3RpdmUoKTtcbiAgICAgIGhvbWVBY3RpdmUuY2xhc3NMaXN0LmFkZChcImFjdGl2ZVwiKTtcbiAgICAgIHRvZG9WaWV3LnJlbW92ZUFsbFRhc2tzKCk7XG4gICAgICBtb2RlbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KHRhc2spKTtcblxuICAgICAgLy8gY2xvc2UgbW9kYWxcbiAgICAgIHN0b3JhZ2Uud3JpdGVTdG9yYWdlKCk7XG4gICAgICBjbG9zZSgpO1xuICAgIH1cbiAgfSk7XG5cbiAgcmV0dXJuIHsgb3BlbiwgY2xvc2UsIGZpbGxGb3JtIH07XG59KSgpO1xuXG5tb2RlbC5wcm9qZWN0cy5mb3JFYWNoKChwcm9qZWN0KSA9PiBwcm9qZWN0TWVudVZpZXcuYWRkUHJvamVjdFRvVmlldyhwcm9qZWN0KSk7XG5tb2RlbC50YXNrcy5mb3JFYWNoKCh0YXNrKSA9PiB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KHRhc2spKTtcbiIsImltcG9ydCBzdGFydE9mRGF5IGZyb20gXCIuLi9zdGFydE9mRGF5L2luZGV4LmpzXCI7XG5pbXBvcnQgcmVxdWlyZWRBcmdzIGZyb20gXCIuLi9fbGliL3JlcXVpcmVkQXJncy9pbmRleC5qc1wiO1xuLyoqXG4gKiBAbmFtZSBpc1NhbWVEYXlcbiAqIEBjYXRlZ29yeSBEYXkgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSBkYXkgKGFuZCB5ZWFyIGFuZCBtb250aCk/XG4gKlxuICogQGRlc2NyaXB0aW9uXG4gKiBBcmUgdGhlIGdpdmVuIGRhdGVzIGluIHRoZSBzYW1lIGRheSAoYW5kIHllYXIgYW5kIG1vbnRoKT9cbiAqXG4gKiAjIyMgdjIuMC4wIGJyZWFraW5nIGNoYW5nZXM6XG4gKlxuICogLSBbQ2hhbmdlcyB0aGF0IGFyZSBjb21tb24gZm9yIHRoZSB3aG9sZSBsaWJyYXJ5XShodHRwczovL2dpdGh1Yi5jb20vZGF0ZS1mbnMvZGF0ZS1mbnMvYmxvYi9tYXN0ZXIvZG9jcy91cGdyYWRlR3VpZGUubWQjQ29tbW9uLUNoYW5nZXMpLlxuICpcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVMZWZ0IC0gdGhlIGZpcnN0IGRhdGUgdG8gY2hlY2tcbiAqIEBwYXJhbSB7RGF0ZXxOdW1iZXJ9IGRhdGVSaWdodCAtIHRoZSBzZWNvbmQgZGF0ZSB0byBjaGVja1xuICogQHJldHVybnMge0Jvb2xlYW59IHRoZSBkYXRlcyBhcmUgaW4gdGhlIHNhbWUgZGF5IChhbmQgeWVhciBhbmQgbW9udGgpXG4gKiBAdGhyb3dzIHtUeXBlRXJyb3J9IDIgYXJndW1lbnRzIHJlcXVpcmVkXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciAwNjowMDowMCBhbmQgNCBTZXB0ZW1iZXIgMTg6MDA6MDAgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0LCA2LCAwKSwgbmV3IERhdGUoMjAxNCwgOCwgNCwgMTgsIDApKVxuICogLy89PiB0cnVlXG4gKiBcbiAqIEBleGFtcGxlXG4gKiAvLyBBcmUgNCBTZXB0ZW1iZXIgYW5kIDQgT2N0b2JlciBpbiB0aGUgc2FtZSBkYXk/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lRGF5KG5ldyBEYXRlKDIwMTQsIDgsIDQpLCBuZXcgRGF0ZSgyMDE0LCA5LCA0KSlcbiAqIC8vPT4gZmFsc2VcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSA0IFNlcHRlbWJlciwgMjAxNCBhbmQgNCBTZXB0ZW1iZXIsIDIwMTUgaW4gdGhlIHNhbWUgZGF5P1xuICogdmFyIHJlc3VsdCA9IGlzU2FtZURheShuZXcgRGF0ZSgyMDE0LCA4LCA0KSwgbmV3IERhdGUoMjAxNSwgOCwgNCkpXG4gKiAvLz0+IGZhbHNlXG4gKi9cblxuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lRGF5KGRpcnR5RGF0ZUxlZnQsIGRpcnR5RGF0ZVJpZ2h0KSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mRGF5ID0gc3RhcnRPZkRheShkaXJ0eURhdGVMZWZ0KTtcbiAgdmFyIGRhdGVSaWdodFN0YXJ0T2ZEYXkgPSBzdGFydE9mRGF5KGRpcnR5RGF0ZVJpZ2h0KTtcbiAgcmV0dXJuIGRhdGVMZWZ0U3RhcnRPZkRheS5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZEYXkuZ2V0VGltZSgpO1xufSIsImltcG9ydCBzdGFydE9mV2VlayBmcm9tIFwiLi4vc3RhcnRPZldlZWsvaW5kZXguanNcIjtcbmltcG9ydCByZXF1aXJlZEFyZ3MgZnJvbSBcIi4uL19saWIvcmVxdWlyZWRBcmdzL2luZGV4LmpzXCI7XG5cbi8qKlxuICogQG5hbWUgaXNTYW1lV2Vla1xuICogQGNhdGVnb3J5IFdlZWsgSGVscGVyc1xuICogQHN1bW1hcnkgQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqIEBkZXNjcmlwdGlvblxuICogQXJlIHRoZSBnaXZlbiBkYXRlcyBpbiB0aGUgc2FtZSB3ZWVrIChhbmQgbW9udGggYW5kIHllYXIpP1xuICpcbiAqICMjIyB2Mi4wLjAgYnJlYWtpbmcgY2hhbmdlczpcbiAqXG4gKiAtIFtDaGFuZ2VzIHRoYXQgYXJlIGNvbW1vbiBmb3IgdGhlIHdob2xlIGxpYnJhcnldKGh0dHBzOi8vZ2l0aHViLmNvbS9kYXRlLWZucy9kYXRlLWZucy9ibG9iL21hc3Rlci9kb2NzL3VwZ3JhZGVHdWlkZS5tZCNDb21tb24tQ2hhbmdlcykuXG4gKlxuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZUxlZnQgLSB0aGUgZmlyc3QgZGF0ZSB0byBjaGVja1xuICogQHBhcmFtIHtEYXRlfE51bWJlcn0gZGF0ZVJpZ2h0IC0gdGhlIHNlY29uZCBkYXRlIHRvIGNoZWNrXG4gKiBAcGFyYW0ge09iamVjdH0gW29wdGlvbnNdIC0gYW4gb2JqZWN0IHdpdGggb3B0aW9ucy5cbiAqIEBwYXJhbSB7TG9jYWxlfSBbb3B0aW9ucy5sb2NhbGU9ZGVmYXVsdExvY2FsZV0gLSB0aGUgbG9jYWxlIG9iamVjdC4gU2VlIFtMb2NhbGVde0BsaW5rIGh0dHBzOi8vZGF0ZS1mbnMub3JnL2RvY3MvTG9jYWxlfVxuICogQHBhcmFtIHswfDF8MnwzfDR8NXw2fSBbb3B0aW9ucy53ZWVrU3RhcnRzT249MF0gLSB0aGUgaW5kZXggb2YgdGhlIGZpcnN0IGRheSBvZiB0aGUgd2VlayAoMCAtIFN1bmRheSlcbiAqIEByZXR1cm5zIHtCb29sZWFufSB0aGUgZGF0ZXMgYXJlIGluIHRoZSBzYW1lIHdlZWsgKGFuZCBtb250aCBhbmQgeWVhcilcbiAqIEB0aHJvd3Mge1R5cGVFcnJvcn0gMiBhcmd1bWVudHMgcmVxdWlyZWRcbiAqIEB0aHJvd3Mge1JhbmdlRXJyb3J9IGBvcHRpb25zLndlZWtTdGFydHNPbmAgbXVzdCBiZSBiZXR3ZWVuIDAgYW5kIDZcbiAqXG4gKiBAZXhhbXBsZVxuICogLy8gQXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpKVxuICogLy89PiB0cnVlXG4gKlxuICogQGV4YW1wbGVcbiAqIC8vIElmIHdlZWsgc3RhcnRzIHdpdGggTW9uZGF5LFxuICogLy8gYXJlIDMxIEF1Z3VzdCAyMDE0IGFuZCA0IFNlcHRlbWJlciAyMDE0IGluIHRoZSBzYW1lIHdlZWs/XG4gKiB2YXIgcmVzdWx0ID0gaXNTYW1lV2VlayhuZXcgRGF0ZSgyMDE0LCA3LCAzMSksIG5ldyBEYXRlKDIwMTQsIDgsIDQpLCB7XG4gKiAgIHdlZWtTdGFydHNPbjogMVxuICogfSlcbiAqIC8vPT4gZmFsc2VcbiAqIFxuICogQGV4YW1wbGVcbiAqIC8vIEFyZSAxIEphbnVhcnkgMjAxNCBhbmQgMSBKYW51YXJ5IDIwMTUgaW4gdGhlIHNhbWUgd2Vlaz9cbiAqIHZhciByZXN1bHQgPSBpc1NhbWVXZWVrKG5ldyBEYXRlKDIwMTQsIDAsIDEpLCBuZXcgRGF0ZSgyMDE1LCAwLCAxKSlcbiAqIC8vPT4gZmFsc2VcbiAqL1xuZXhwb3J0IGRlZmF1bHQgZnVuY3Rpb24gaXNTYW1lV2VlayhkaXJ0eURhdGVMZWZ0LCBkaXJ0eURhdGVSaWdodCwgZGlydHlPcHRpb25zKSB7XG4gIHJlcXVpcmVkQXJncygyLCBhcmd1bWVudHMpO1xuICB2YXIgZGF0ZUxlZnRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZUxlZnQsIGRpcnR5T3B0aW9ucyk7XG4gIHZhciBkYXRlUmlnaHRTdGFydE9mV2VlayA9IHN0YXJ0T2ZXZWVrKGRpcnR5RGF0ZVJpZ2h0LCBkaXJ0eU9wdGlvbnMpO1xuICByZXR1cm4gZGF0ZUxlZnRTdGFydE9mV2Vlay5nZXRUaW1lKCkgPT09IGRhdGVSaWdodFN0YXJ0T2ZXZWVrLmdldFRpbWUoKTtcbn0iXSwibmFtZXMiOlsicmVxdWlyZWRBcmdzIiwicmVxdWlyZWQiLCJhcmdzIiwibGVuZ3RoIiwiVHlwZUVycm9yIiwidG9EYXRlIiwiYXJndW1lbnQiLCJhcmd1bWVudHMiLCJhcmdTdHIiLCJPYmplY3QiLCJwcm90b3R5cGUiLCJ0b1N0cmluZyIsImNhbGwiLCJEYXRlIiwiZ2V0VGltZSIsImNvbnNvbGUiLCJ3YXJuIiwiRXJyb3IiLCJzdGFjayIsIk5hTiIsInN0YXJ0T2ZEYXkiLCJkaXJ0eURhdGUiLCJkYXRlIiwic2V0SG91cnMiLCJ0b0ludGVnZXIiLCJkaXJ0eU51bWJlciIsIm51bWJlciIsIk51bWJlciIsImlzTmFOIiwiTWF0aCIsImNlaWwiLCJmbG9vciIsInN0YXJ0T2ZXZWVrIiwiZGlydHlPcHRpb25zIiwib3B0aW9ucyIsImxvY2FsZSIsImxvY2FsZVdlZWtTdGFydHNPbiIsIndlZWtTdGFydHNPbiIsImRlZmF1bHRXZWVrU3RhcnRzT24iLCJSYW5nZUVycm9yIiwiZGF5IiwiZ2V0RGF5IiwiZGlmZiIsInNldERhdGUiLCJnZXREYXRlIiwiVG9kb1Rhc2siLCJ0aXRsZSIsImRlc2NyaXB0aW9uIiwiZHVlRGF0ZSIsImNvbXBsZXRlZCIsInByaW9yaXR5IiwicHJvamVjdCIsInRhc2siLCJkdWUiLCJQcm9qZWN0IiwibW9kZWwiLCJ0YXNrcyIsInByb2plY3RzIiwic3RvcmFnZSIsIndyaXRlU3RvcmFnZSIsIndpbmRvdyIsImxvY2FsU3RvcmFnZSIsInNldEl0ZW0iLCJKU09OIiwic3RyaW5naWZ5IiwicmVhZFN0b3JhZ2UiLCJnZXRJdGVtIiwicGFyc2UiLCJyZXNldFN0b3JhZ2UiLCJ3ZWVrc1Rhc2tzIiwidG9kYXlzVGFza3MiLCJwcm9qZWN0VGFza3MiLCJyZW1vdmVBY3RpdmUiLCJBcnJheSIsImZyb20iLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsInRhcmdldCIsImNsb3Nlc3QiLCJhZGQiLCJ0b2RheUJ1dHRvbiIsImNvbnRhaW5zIiwid2Vla0J1dHRvbiIsImhvbWVCdXR0b24iLCJ0b2RvVmlldyIsInJlbW92ZUFsbFRhc2tzIiwiYWRkVG9kb1RvVmlldyIsImN1cnJlbnRUYXNrcyIsImRpcnR5RGF0ZUxlZnQiLCJkaXJ0eURhdGVSaWdodCIsImRhdGVMZWZ0U3RhcnRPZkRheSIsImRhdGVSaWdodFN0YXJ0T2ZEYXkiLCJpc1NhbWVEYXkiLCJwdXNoIiwiZGF0ZUxlZnRTdGFydE9mV2VlayIsImRhdGVSaWdodFN0YXJ0T2ZXZWVrIiwiaXNTYW1lV2VlayIsInByb2plY3ROYW1lIiwibGFzdENoaWxkIiwiY2hpbGROb2RlcyIsInRleHRDb250ZW50IiwibG9nIiwibW9kYWwiLCJvcGVuTW9kYWwiLCJjbG9zZU1vZGFsIiwic3VibWl0IiwiZm9ybSIsImdldEVsZW1lbnRCeUlkIiwic2hvd01vZGFsIiwiaGlkZU1vZGFsIiwicHJldmVudERlZmF1bHQiLCJwcm9qZWN0TW9kYWxWYWxpZGF0aW9uIiwiY2hlY2tUaXRsZSIsIm5ld1Byb2plY3QiLCJ2YWx1ZSIsInByb2plY3RNZW51VmlldyIsImFkZFByb2plY3RUb1ZpZXciLCJjbGVhckZvcm0iLCJlbGVtZW50IiwidmFsaWQiLCJ0cmltIiwicHJvamVjdE1lbnUiLCJmb3JtUHJvamVjdExpc3QiLCJhcHBlbmRDaGlsZCIsImh0bWwiLCJuZXdFbGVtZW50IiwiY3JlYXRlRWxlbWVudCIsImlubmVySFRNTCIsImNyZWF0ZVByb2plY3RDb21wb25lbnQiLCJhZGRQcm9qZWN0VG9Ub2RvU2VsZWN0b3JGb3JtIiwidG9kb01vZGFsVmFsaWRhdGlvbiIsIm9wZW4iLCJjbG9zZSIsImZvcm1Qcm9qZWN0U2VsZWN0Iiwic2VsZWN0ZWRJbmRleCIsInRpdGxlVmFsaWQiLCJkZXNjcmlwdGlvblZhbGlkIiwiY2hlY2tEZXNjcmlwdGlvbiIsImRhdGVWYWxpZCIsImNoZWNrRGF0ZSIsIm5ld1RvZG8iLCJpc1JlcXVpcmVkIiwic2hvd0RhdGVFcnJvciIsImlucHV0IiwibWVzc2FnZSIsInRhc2tEYXRlIiwieWVhciIsIm1vbnRoIiwic3BsaXQiLCJjdXJyZW50RGF0ZSIsImNEYXkiLCJjTW9udGgiLCJnZXRNb250aCIsImdldEZ1bGxZZWFyIiwibm90SW5GdXR1cmUiLCJ0b2RvQ29udGFpbmVyIiwidG9kbyIsImNyZWF0ZVRvZG9Db21wb25lbnQiLCJmaXJzdENoaWxkIiwicmVtb3ZlQ2hpbGQiLCJ0b2RvRWRpdE1vZGFsIiwiY2hlY2tib3hDb250YWluZXIiLCJhcnJvd0NvbnRhaW5lciIsImVkaXRDb250YWluZXIiLCJkZWxldGVDb250YWluZXIiLCJob21lQWN0aXZlIiwicm93IiwicGFyZW50Tm9kZSIsImZpbHRlciIsInJlcGxhY2UiLCJkaXYiLCJhcnJvd0ltYWdlRGl2IiwidXBBcnJvd0h0bWwiLCJkZXNjRGl2IiwiY3JlYXRlRGVzY3JpcHRpb25EaXYiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJkb3duQXJyb3dIdG1sIiwibmV4dEVsZW1lbnRTaWJsaW5nIiwiZmlsbEZvcm0iLCJpbmRleCIsInQiLCJpIiwic3BsaWNlIiwiZGV0YWlsc0RpdiIsImNhbmNlbCIsImN1cnJlbnRUYXNrIl0sInNvdXJjZVJvb3QiOiIifQ==