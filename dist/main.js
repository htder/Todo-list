(()=>{"use strict";const e=function(e,t,n,o,r,c){const s={};return s.title=e,s.description=t,s.dueDate=n,s.completed=o,s.priority=r,s.project=c,s.due=function(){return`${e} due: ${n}`},s},t=function(e){const t={};return t.title=e,t},n={tasks:[e("Hello World","one two three","2022-01-21",!0,"high","All"),e("World Hello","one two three","2022-02-01",!1,"low","Project 2"),e("One One One","One Hello","2022-09-17",!0,"middle","Project 2"),e("Two Two Two","Two Hello","2022-01-09",!1,"high","Project 3"),e("Three Three Three","Three Hello","2022-12-25",!1,"high","All")],projects:[t("All"),t("Project 2"),t("Project 3")]};document.querySelector(".sidebar").addEventListener("click",(e=>{Array.from(document.querySelectorAll(".menu-button")).forEach((e=>e.classList.remove("active"))),null!==e.target.closest("a")&&e.target.closest("a").classList.add("active")})),function(){const e=document.querySelector(".project-modal"),c=document.querySelector(".new-project-button"),s=document.querySelector(".project-modal-close"),i=document.querySelector(".project-submit"),a=document.getElementById("new-project-form");c.addEventListener("click",(()=>{d()})),s.addEventListener("click",(()=>{l()})),i.addEventListener("click",(e=>{e.preventDefault();const c=a.title;if(o.checkTitle(c)){const e=t(c.value);n.projects.push(e),r.addProjectToView(e),o.clearForm(a),l()}}));const d=function(){e.classList.remove("hide"),e.classList.add("show")},l=function(){e.classList.remove("show"),e.classList.add("hide")}}();const o={checkTitle:e=>{let t=!1;return""===e.value.trim()?e.classList.add("error"):(e.classList.remove("error"),t=!0),t},clearForm:e=>{e.title.value=""}},r=function(){const e=document.querySelector(".project-menu"),t=document.querySelector(".form-project-selector");return{addProjectToView:t=>{e.appendChild((e=>{const t=`\n      <a href="#" class="nav-link menu-button link-dark rounded">\n        <img\n          class="bi me-2"\n          width="16"\n          height="16"\n          src="../icons/arrow-right-short.svg"\n        /><span class="d-none d-sm-inline">${e.title}</span></a\n      >`,n=document.createElement("li");return n.classList="nav-item m-1",n.innerHTML=t,n})(t))},addProjectToTodoSelectorForm:()=>{let e="";n.projects.forEach((t=>{e+=`<option>${t.title}</option>`})),t.innerHTML=e}}}(),c=(function(){const t=document.querySelector(".task-modal"),o=document.querySelector(".todo-new-task"),i=document.querySelector(".todo-modal-close"),a=document.getElementById("new-todo-form"),d=document.querySelector(".todo-submit");o.addEventListener("click",(()=>{r.addProjectToTodoSelectorForm(),l()})),i.addEventListener("click",(()=>{u()})),d.addEventListener("click",(t=>{t.preventDefault();const o=document.querySelector(".form-project-selector"),r=a.title,i=a.description,d=a.dueDate,l=o.options[o.selectedIndex].value,m=a.optradio.value;let p=c.checkTitle(r),h=c.checkDescription(i),g=c.checkDate(d);if(p&&h&&g){const t=e(r.value,i.value,d.value,!1,m,l);n.tasks.push(t),s.addTodoToView(t),c.clearForm(a),u()}}));const l=()=>{t.classList.remove("hide"),t.classList.add("show")},u=()=>{t.classList.remove("show"),t.classList.add("hide")}}(),function(){const e=e=>""===e,t=(e,t)=>{document.querySelector(".dateError").textContent=t};return{checkTitle:t=>{let n=!1;const o=t.value.trim();return e(o)?("Title cannot be empty.",document.querySelector(".titleError").textContent="Title cannot be empty."):(document.querySelector(".titleError").textContent="",n=!0),n},checkDescription:t=>{let n=!1;const o=t.value.trim();return e(o)?("Description cannot be empty.",document.querySelector(".descError").textContent="Description cannot be empty."):(document.querySelector(".descError").textContent="",n=!0),n},checkDate:n=>{let o=!1;const r=n.value.trim();return e(r)&&t(0,"Due date cannot be empty"),(e=>{const[t,n,o]=e.split("-"),r=new Date,c=r.getDate(),s=r.getMonth()+1;return!(+t>=r.getFullYear()&&+n>=s&&+o>=c)})(r)?t(0,"Due date must be in the future."):(document.querySelector(".dateError").textContent="",o=!0),o},clearForm:e=>{e.title.value="",e.description.value="",e.dueDate.value=""}}}()),s=function(){const e=document.querySelector(".todo-container");return{addTodoToView:t=>{e.firstElementChild.insertAdjacentElement("beforebegin",(e=>{const t=`\n    <div\n    class="col-md-1 py-1 d-flex justify-content-md-end justify-content-center"\n  >\n    <input type="checkbox" class="task-checkbox" ${e.completed?"checked":""}/>\n  </div>\n  <div\n    class="col-md-6 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.completed?`<del>${e.title}</del>`:`${e.title}`}\n  </div>\n    <div\n        class="col-md-1 d-flex align-items-center justify-md-start justify-content-center task-arrow"\n         >\n        <img\n         class="task-arrow-image-down"\n         width="16"\n         height="16"\n         src="../icons/caret-down.svg"\n         />\n    </div>\n  <div\n    class="col-md-2 d-flex align-items-center justify-content-md-start justify-content-center"\n  >\n    ${e.dueDate}\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n    <a href="#" class="nav-link link-dark">\n      <img\n        class=""\n        width="16"\n        height="16"\n        src="../icons/pencil-square.svg"\n      />\n    </a>\n  </div>\n  <div\n    class="col-md-1 d-flex align-items-center justify-md-start justify-content-center"\n  >\n    <a href="#" class="nav-link link-dark">\n      <img\n        class=""\n        width="16"\n        height="16"\n        src="../icons/trash.svg"\n      />\n    </a>\n  </div>`,n=document.createElement("div");return n.classList="row m-4 p-2 bg-white rounded-3 border-bottom",n.innerHTML=t,n})(t))}}}();!function(){document.querySelector(".todo-main-container").addEventListener("click",(r=>{const c=r.target.classList.contains("task-checkbox"),s=r.target.classList.contains("task-arrow-image-down")||r.target.classList.contains("task-arrow-image-up");if(r.target.classList.contains("task-edit"),r.target.classList.contains("task-delete"),c){const e=Array.from(r.target.parentNode.parentNode.childNodes),t=e[3].textContent.trim(),o=e[7].textContent.trim(),c=n.tasks.filter((e=>e.title===t&&e.dueDate===o));c[0].completed=!c[0].completed,c[0].completed?e[3].innerHTML=`<del>${e[3].innerHTML}</del>`:e[3].innerHTML=e[3].innerHTML.replace(/(<([^>]+)>)/gi,"")}if(s){let c,s,i;if(r.target.classList.contains("task-arrow-image-down")){const t=Array.from(r.target.parentNode.parentNode.childNodes);let a=r.target.parentNode;i=r.target.parentNode.parentNode,c=t[3].textContent.trim(),s=t[7].textContent.trim(),a.innerHTML=e();const d=n.tasks.filter((e=>e.title===c&&e.dueDate===s)),l=o(d);i.insertAdjacentElement("afterend",l)}if(r.target.classList.contains("task-arrow-image-up")){const e=Array.from(r.target.parentNode.parentNode.childNodes);let n=r.target.parentNode;i=r.target.parentNode.parentNode,c=e[3].textContent.trim(),s=e[7].textContent.trim(),n.innerHTML=t(),i.nextElementSibling.remove()}}}));const e=()=>'\n    <img\n        class="task-arrow-image-up"\n        width="16"\n        height="16"\n        src="../icons/caret-up.svg"\n    />',t=()=>'\n    <img\n        class="task-arrow-image-down"\n        width="16"\n        height="16"\n        src="../icons/caret-down.svg"\n    />',o=e=>{const t=`\n    <div class="container-fluid py-1">\n      <h6 class="fw-bold">Description</h6>\n      <p class="">\n      ${e[0].description}\n      </p>\n  </div>`,n=document.createElement("div");return n.classList="modal-body mx-5 my-3 bg-light rounded-3 border border-secondary p-3 rounded-3 description-div",n.innerHTML=t,n}}(),n.projects.forEach((e=>r.addProjectToView(e))),n.tasks.forEach((e=>s.addTodoToView(e)))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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MEQsR0FqR1csR0F1R3RCbEcsRUFBTUUsU0FBU1EsU0FBU2QsR0FBWW1DLEVBQWdCQyxpQkFBaUJwQyxLQUNyRUksRUFBTUMsTUFBTVMsU0FBU2IsR0FBUzZELEVBQVNDLGNBQWM5RCxNIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Rhc2suanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL3Byb2plY3QuanMiLCJ3ZWJwYWNrOi8vdG9kby1saXN0Ly4vc3JjL2luZGV4LmpzIl0sInNvdXJjZXNDb250ZW50IjpbImNvbnN0IFRvZG9UYXNrID0gZnVuY3Rpb24gKFxuICB0aXRsZSxcbiAgZGVzY3JpcHRpb24sXG4gIGR1ZURhdGUsXG4gIGNvbXBsZXRlZCxcbiAgcHJpb3JpdHksXG4gIHByb2plY3Rcbikge1xuICBjb25zdCB0YXNrID0ge307XG5cbiAgdGFzay50aXRsZSA9IHRpdGxlO1xuICB0YXNrLmRlc2NyaXB0aW9uID0gZGVzY3JpcHRpb247XG4gIHRhc2suZHVlRGF0ZSA9IGR1ZURhdGU7XG4gIHRhc2suY29tcGxldGVkID0gY29tcGxldGVkO1xuICB0YXNrLnByaW9yaXR5ID0gcHJpb3JpdHk7XG4gIHRhc2sucHJvamVjdCA9IHByb2plY3Q7XG5cbiAgdGFzay5kdWUgPSBmdW5jdGlvbiAoKSB7XG4gICAgcmV0dXJuIGAke3RpdGxlfSBkdWU6ICR7ZHVlRGF0ZX1gO1xuICB9O1xuXG4gIHJldHVybiB0YXNrO1xufTtcblxuZXhwb3J0IHsgVG9kb1Rhc2sgfTtcbiIsImNvbnN0IFByb2plY3QgPSBmdW5jdGlvbiAodGl0bGUpIHtcbiAgY29uc3QgcHJvamVjdCA9IHt9O1xuXG4gIHByb2plY3QudGl0bGUgPSB0aXRsZTtcblxuICByZXR1cm4gcHJvamVjdDtcbn07XG5cbmV4cG9ydCB7IFByb2plY3QgfTtcbiIsIi8vIFRvZG8gTGlzdCBJdGVtIG5lZWRzIGE6XG4vLyAtIHByb2plY3QgYmVsb25ncyB0b1xuLy8gLSB0aXRsZVxuLy8gLSBkZXNjcmlwdGlvblxuLy8gLSBkdWUgZGF0ZVxuLy8gLSBjb21wbGV0ZWQgY2hlY2sgYm94XG4vLyAtIHJlZCwgb3JhbmdlIG9yIGdyZWVuIGZvciBkaWZmZXJlbnQgcHJpb3JpdGllc1xuXG4vLyBGYWN0b3J5IGZ1bmN0aW9uIGZvciBhIHRvZG8gbGlzdCBpdGVtXG5cbi8vIFByb2plY3QgbmVlZHMgYTpcbi8vIC0gbGlzdCBvZiB6ZXJvIG9yIG1vcmUgdG9kbyBpdGVtc1xuXG4vLyBGYWN0b3J5IGZ1bmN0aW9uIGZvciBhIHByb2plY3RcblxuLy8gVmlld3M6XG4vLyAtIHNpZGViYXIgdmlld1xuLy8gLSBwcm9qZWN0IHZpZXdcbi8vIC0gYWxsIHRhc2sgdmlld1xuLy8gLSB0b2RheSdzIHRhc2tzIHZpZXdcbi8vIC0gdGhpcyB3ZWVrJ3MgdGFza3Mgdmlld1xuLy8gLSBwcm9qZWN0J3MgdGFza3Mgdmlld1xuXG4vLyBNb2RhbHM6XG4vLyAtIGVkaXQgdG9kbyBpdGVtXG4vLyAtIGNyZWF0ZSBuZXcgdG9kbyBpdGVtXG4vLyAtIGNyZWF0ZSBuZXcgcHJvamVjdFxuXG4vLyBUb2RvIENvbnRyb2xsZXI6XG4vLyAtIGRlbGV0ZSB0b2RvXG4vLyAtIHNob3cgZWRpdCBtb2RhbFxuLy8gLSBleHBhbmQgZGV0YWlsc1xuXG4vLyBQcm9qZWN0IENvbnRyb2xsZXI6XG4vLyAtIGRlbGV0ZSBwcm9qZWN0XG5cbi8vXG4vL1xuLy9cbi8vXG4vLyAvLyBjaGFuZ2luZyBhY3RpdmUgYnV0dG9uIG9uIHRoZSBtZW51XG4vLyAvLyBhZGRpbmcgcHJvamVjdCBtb2RhbCB3aGVuIG5ldyBwcm9qZWN0IGlzIHByZXNzZWRcbi8vIC8vIGFkZGluZyBuZXcgdG9kbyB0YXNrIG1vZGFsIHdoZW4gYWRkIGEgbmV3IHByb2plY3QgaXMgcHJlc3NlZFxuLy8gLy8gZGVjaWRlIG9uIGhvdyBkYXRhIGZvciB0YXNrcyBpcyBzdG9yZWRcbi8vIC8vIHN1Ym1pdHRpbmcgcHJvamVjdCBtb2RhbCBhZGRzIGEgbmV3IHByb2plY3QgLSBob3cgaXMgaXQgc3RvcmVkP1xuLy8gLy8gc3VibWl0dGluZyB0b2RvIHRhc2sgbW9kYWwgYWRkcyBhIG5ldyB0YXNrIC0gaG93IGlzIGl0IHN0b3JlZD9cbi8vIC8vIGFkZCBldmVudCBsaXN0ZW5lcnMgdG8gdGFza3Ncbi8vIC8vIHNob3cgZGV0YWlscyBzbGlkZXIgd2hlbiBkb3duIGFycm93IGlzIHByZXNzZWRcbi8vIC8vIGNoYW5nZSBhcnJvdyBpY29uIHdoZW4gZGV0YWlscyBhcmUgc2hvd2luZyBhbmQgd2hlbiB0aGV5IGFyZSBub3Rcbi8vIC8vIGNvbXBsZXRpbmcgdGFzayAtIGhvdyBkb2VzIGl0IGludGVyYWN0IHdpdGggZGF0YVxuLy9cbi8vIHN0cmlrZSB0aHJvdWdoIHRoZSB0aXRsZSB3aGVuIHRoZSB0YXNrIGlzIGNvbXBsZXRlXG4vLyBzaG93IGVkaXQgc2xpZGVyIHdoZW4gZWRpdCBpcyBwcmVzc2VkXG4vLyBzaG93aW5nIHRhc2sgcHJpb3JpdHkgY29sb3VyIGFzIHRoZSBsZWZ0IGJvcmRlciBjb2xvdXIgb2YgdGhlIHRhc2tcbi8vIHN0cmlrZSB0aHJvdWdoIHRoZSB0aXRsZSB3aGVuIHRoZSB0YXNrIGlzIGNvbXBsZXRlXG4vLyBkZWxldGVpbmcgdGFzayAtIGhvdyBkb2VzIGl0IGludGVyYWN0IHdpdGggZGF0YVxuLy8gcG9wdWxhdGUgdGhlIHRvZGF5IGFuZCB0aGlzIHdlZWsgdmlld3Mgd2l0aCB0aGUgY29ycmVjdCB0YXNrc1xuLy8gcG9wdWxhdGUgZWFjaCBwcm9qZWN0IHdpdGggdGhlIGNvcnJlY3QgdGFza3Ncbi8vXG4vL1xuLy9cblxuaW1wb3J0IHsgVG9kb1Rhc2sgfSBmcm9tIFwiLi90YXNrLmpzXCI7XG5pbXBvcnQgeyBQcm9qZWN0IH0gZnJvbSBcIi4vcHJvamVjdC5qc1wiO1xuXG5jb25zdCBtb2RlbCA9IHtcbiAgdGFza3M6IFtcbiAgICBUb2RvVGFzayhcIkhlbGxvIFdvcmxkXCIsIFwib25lIHR3byB0aHJlZVwiLCBcIjIwMjItMDEtMjFcIiwgdHJ1ZSwgXCJoaWdoXCIsIFwiQWxsXCIpLFxuICAgIFRvZG9UYXNrKFxuICAgICAgXCJXb3JsZCBIZWxsb1wiLFxuICAgICAgXCJvbmUgdHdvIHRocmVlXCIsXG4gICAgICBcIjIwMjItMDItMDFcIixcbiAgICAgIGZhbHNlLFxuICAgICAgXCJsb3dcIixcbiAgICAgIFwiUHJvamVjdCAyXCJcbiAgICApLFxuICAgIFRvZG9UYXNrKFxuICAgICAgXCJPbmUgT25lIE9uZVwiLFxuICAgICAgXCJPbmUgSGVsbG9cIixcbiAgICAgIFwiMjAyMi0wOS0xN1wiLFxuICAgICAgdHJ1ZSxcbiAgICAgIFwibWlkZGxlXCIsXG4gICAgICBcIlByb2plY3QgMlwiXG4gICAgKSxcbiAgICBUb2RvVGFzayhcbiAgICAgIFwiVHdvIFR3byBUd29cIixcbiAgICAgIFwiVHdvIEhlbGxvXCIsXG4gICAgICBcIjIwMjItMDEtMDlcIixcbiAgICAgIGZhbHNlLFxuICAgICAgXCJoaWdoXCIsXG4gICAgICBcIlByb2plY3QgM1wiXG4gICAgKSxcbiAgICBUb2RvVGFzayhcbiAgICAgIFwiVGhyZWUgVGhyZWUgVGhyZWVcIixcbiAgICAgIFwiVGhyZWUgSGVsbG9cIixcbiAgICAgIFwiMjAyMi0xMi0yNVwiLFxuICAgICAgZmFsc2UsXG4gICAgICBcImhpZ2hcIixcbiAgICAgIFwiQWxsXCJcbiAgICApLFxuICBdLFxuICBwcm9qZWN0czogW1Byb2plY3QoXCJBbGxcIiksIFByb2plY3QoXCJQcm9qZWN0IDJcIiksIFByb2plY3QoXCJQcm9qZWN0IDNcIildLFxufTtcblxuY29uc3QgbWVudUNvbnRyb2xsZXIgPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBzaWRlYmFyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5zaWRlYmFyXCIpO1xuICBzaWRlYmFyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICByZW1vdmVBY3RpdmUoKTtcbiAgICBpZiAoZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJhXCIpID09PSBudWxsKSByZXR1cm47XG4gICAgZXZlbnQudGFyZ2V0LmNsb3Nlc3QoXCJhXCIpLmNsYXNzTGlzdC5hZGQoXCJhY3RpdmVcIik7XG4gIH0pO1xufSkoKTtcblxuZnVuY3Rpb24gcmVtb3ZlQWN0aXZlKCkge1xuICBsZXQgYnV0dG9ucyA9IEFycmF5LmZyb20oZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbChcIi5tZW51LWJ1dHRvblwiKSk7XG4gIGJ1dHRvbnMuZm9yRWFjaCgoYnV0dG9uKSA9PiBidXR0b24uY2xhc3NMaXN0LnJlbW92ZShcImFjdGl2ZVwiKSk7XG59XG5cbmNvbnN0IHByb2plY3RNb2RhbCA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IG1vZGFsID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LW1vZGFsXCIpO1xuICBjb25zdCBvcGVuTW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLm5ldy1wcm9qZWN0LWJ1dHRvblwiKTtcbiAgY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIucHJvamVjdC1tb2RhbC1jbG9zZVwiKTtcbiAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5wcm9qZWN0LXN1Ym1pdFwiKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXByb2plY3QtZm9ybVwiKTtcblxuICBvcGVuTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBzaG93TW9kYWwoKTtcbiAgfSk7XG5cbiAgY2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGhpZGVNb2RhbCgpO1xuICB9KTtcblxuICBzdWJtaXQuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsIChldmVudCkgPT4ge1xuICAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XG4gICAgY29uc3QgdGl0bGUgPSBmb3JtW1widGl0bGVcIl07XG4gICAgY29uc3QgdGl0bGVWYWxpZCA9IHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2hlY2tUaXRsZSh0aXRsZSk7XG4gICAgaWYgKHRpdGxlVmFsaWQpIHtcbiAgICAgIC8vIGNyZWF0ZSBwcm9qZWN0XG4gICAgICBjb25zdCBuZXdQcm9qZWN0ID0gUHJvamVjdCh0aXRsZS52YWx1ZSk7XG4gICAgICAvLyBwdXNoIHByb2plY3QgdG8gc3RvcmFnZVxuICAgICAgbW9kZWwucHJvamVjdHMucHVzaChuZXdQcm9qZWN0KTtcbiAgICAgIC8vIHJlbmRlciBwcm9qZWN0XG4gICAgICBwcm9qZWN0TWVudVZpZXcuYWRkUHJvamVjdFRvVmlldyhuZXdQcm9qZWN0KTtcbiAgICAgIC8vIGNsZWFyIGZvcm1cbiAgICAgIHByb2plY3RNb2RhbFZhbGlkYXRpb24uY2xlYXJGb3JtKGZvcm0pO1xuICAgICAgLy8gY2xvc2UgbW9kYWxcbiAgICAgIGhpZGVNb2RhbCgpO1xuICAgIH1cbiAgfSk7XG5cbiAgY29uc3Qgc2hvd01vZGFsID0gZnVuY3Rpb24gKCkge1xuICAgIG1vZGFsLmNsYXNzTGlzdC5yZW1vdmUoXCJoaWRlXCIpO1xuICAgIG1vZGFsLmNsYXNzTGlzdC5hZGQoXCJzaG93XCIpO1xuICB9O1xuXG4gIGNvbnN0IGhpZGVNb2RhbCA9IGZ1bmN0aW9uICgpIHtcbiAgICBtb2RhbC5jbGFzc0xpc3QucmVtb3ZlKFwic2hvd1wiKTtcbiAgICBtb2RhbC5jbGFzc0xpc3QuYWRkKFwiaGlkZVwiKTtcbiAgfTtcbn0pKCk7XG5cbmNvbnN0IHByb2plY3RNb2RhbFZhbGlkYXRpb24gPSAoZnVuY3Rpb24gKCkge1xuICBjb25zdCBpc1JlcXVpcmVkID0gKHZhbHVlKSA9PiB7XG4gICAgcmV0dXJuIHZhbHVlID09PSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IHNob3dFcnJvciA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGlucHV0LmNsYXNzTGlzdC5hZGQoXCJlcnJvclwiKTtcbiAgfTtcblxuICBjb25zdCBzaG93U3VjY2VzcyA9IChpbnB1dCkgPT4ge1xuICAgIGlucHV0LmNsYXNzTGlzdC5yZW1vdmUoXCJlcnJvclwiKTtcbiAgfTtcblxuICBjb25zdCBjaGVja1RpdGxlID0gKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCB0aXRsZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKHRpdGxlKSkge1xuICAgICAgc2hvd0Vycm9yKGVsZW1lbnQsIFwiVGl0bGUgY2Fubm90IGJlIGVtcHR5LlwiKTtcbiAgICB9IGVsc2Uge1xuICAgICAgc2hvd1N1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjbGVhckZvcm0gPSAoZm9ybSkgPT4ge1xuICAgIGZvcm1bXCJ0aXRsZVwiXS52YWx1ZSA9IFwiXCI7XG4gIH07XG4gIHJldHVybiB7IGNoZWNrVGl0bGUsIGNsZWFyRm9ybSB9O1xufSkoKTtcblxuY29uc3QgcHJvamVjdE1lbnVWaWV3ID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgcHJvamVjdE1lbnUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnByb2plY3QtbWVudVwiKTtcbiAgY29uc3QgZm9ybVByb2plY3RMaXN0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5mb3JtLXByb2plY3Qtc2VsZWN0b3JcIik7XG5cbiAgY29uc3QgYWRkUHJvamVjdFRvVmlldyA9IChwcm9qZWN0KSA9PiB7XG4gICAgcHJvamVjdE1lbnUuYXBwZW5kQ2hpbGQoY3JlYXRlUHJvamVjdENvbXBvbmVudChwcm9qZWN0KSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlUHJvamVjdENvbXBvbmVudCA9IChwcm9qZWN0KSA9PiB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICAgIDxhIGhyZWY9XCIjXCIgY2xhc3M9XCJuYXYtbGluayBtZW51LWJ1dHRvbiBsaW5rLWRhcmsgcm91bmRlZFwiPlxuICAgICAgICA8aW1nXG4gICAgICAgICAgY2xhc3M9XCJiaSBtZS0yXCJcbiAgICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgICAgc3JjPVwiLi4vaWNvbnMvYXJyb3ctcmlnaHQtc2hvcnQuc3ZnXCJcbiAgICAgICAgLz48c3BhbiBjbGFzcz1cImQtbm9uZSBkLXNtLWlubGluZVwiPiR7cHJvamVjdC50aXRsZX08L3NwYW4+PC9hXG4gICAgICA+YDtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImxpXCIpO1xuICAgIG5ld0VsZW1lbnQuY2xhc3NMaXN0ID0gXCJuYXYtaXRlbSBtLTFcIjtcbiAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH07XG5cbiAgY29uc3QgYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSA9ICgpID0+IHtcbiAgICBsZXQgaHRtbCA9IFwiXCI7XG4gICAgbW9kZWwucHJvamVjdHMuZm9yRWFjaCgocHJvamVjdCkgPT4ge1xuICAgICAgaHRtbCArPSBgPG9wdGlvbj4ke3Byb2plY3QudGl0bGV9PC9vcHRpb24+YDtcbiAgICB9KTtcbiAgICBmb3JtUHJvamVjdExpc3QuaW5uZXJIVE1MID0gaHRtbDtcbiAgfTtcbiAgcmV0dXJuIHsgYWRkUHJvamVjdFRvVmlldywgYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSB9O1xufSkoKTtcblxuY29uc3QgdG9kb01vZGFsID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgbW9kYWwgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRhc2stbW9kYWxcIik7XG4gIGNvbnN0IG9wZW5Nb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1uZXctdGFza1wiKTtcbiAgY29uc3QgY2xvc2VNb2RhbCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudG9kby1tb2RhbC1jbG9zZVwiKTtcbiAgY29uc3QgZm9ybSA9IGRvY3VtZW50LmdldEVsZW1lbnRCeUlkKFwibmV3LXRvZG8tZm9ybVwiKTtcbiAgY29uc3Qgc3VibWl0ID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLXN1Ym1pdFwiKTtcblxuICBvcGVuTW9kYWwuYWRkRXZlbnRMaXN0ZW5lcihcImNsaWNrXCIsICgpID0+IHtcbiAgICBwcm9qZWN0TWVudVZpZXcuYWRkUHJvamVjdFRvVG9kb1NlbGVjdG9yRm9ybSgpO1xuICAgIG9wZW4oKTtcbiAgfSk7XG5cbiAgY2xvc2VNb2RhbC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKCkgPT4ge1xuICAgIGNsb3NlKCk7XG4gIH0pO1xuXG4gIHN1Ym1pdC5hZGRFdmVudExpc3RlbmVyKFwiY2xpY2tcIiwgKGV2ZW50KSA9PiB7XG4gICAgZXZlbnQucHJldmVudERlZmF1bHQoKTtcbiAgICBjb25zdCBmb3JtUHJvamVjdFNlbGVjdCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZm9ybS1wcm9qZWN0LXNlbGVjdG9yXCIpO1xuXG4gICAgLy8gZ2V0IGZvcm0gZWxlbWVudHNcbiAgICBjb25zdCB0aXRsZSA9IGZvcm1bXCJ0aXRsZVwiXTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGZvcm1bXCJkZXNjcmlwdGlvblwiXTtcbiAgICBjb25zdCBkdWVEYXRlID0gZm9ybVtcImR1ZURhdGVcIl07XG4gICAgY29uc3QgcHJvamVjdCA9XG4gICAgICBmb3JtUHJvamVjdFNlbGVjdC5vcHRpb25zW2Zvcm1Qcm9qZWN0U2VsZWN0LnNlbGVjdGVkSW5kZXhdLnZhbHVlO1xuICAgIGNvbnN0IHByaW9yaXR5ID0gZm9ybVtcIm9wdHJhZGlvXCJdLnZhbHVlO1xuXG4gICAgLy8gdmFsaWRhdGUgZm9ybSBlbGVtZW50c1xuICAgIGxldCB0aXRsZVZhbGlkID0gdG9kb01vZGFsVmFsaWRhdGlvbi5jaGVja1RpdGxlKHRpdGxlKSxcbiAgICAgIGRlc2NyaXB0aW9uVmFsaWQgPSB0b2RvTW9kYWxWYWxpZGF0aW9uLmNoZWNrRGVzY3JpcHRpb24oZGVzY3JpcHRpb24pLFxuICAgICAgZGF0ZVZhbGlkID0gdG9kb01vZGFsVmFsaWRhdGlvbi5jaGVja0RhdGUoZHVlRGF0ZSk7XG5cbiAgICBsZXQgaXNGb3JtVmFsaWQgPSB0aXRsZVZhbGlkICYmIGRlc2NyaXB0aW9uVmFsaWQgJiYgZGF0ZVZhbGlkO1xuICAgIC8vIGNvbnN0IHRpdGxlVmFsaWQgPSBwcm9qZWN0TW9kYWxWYWxpZGF0aW9uLmNoZWNrVGl0bGUodGl0bGUpO1xuICAgIGlmIChpc0Zvcm1WYWxpZCkge1xuICAgICAgLy8gY3JlYXRlIHRvZG9cbiAgICAgIGNvbnN0IG5ld1RvZG8gPSBUb2RvVGFzayhcbiAgICAgICAgdGl0bGUudmFsdWUsXG4gICAgICAgIGRlc2NyaXB0aW9uLnZhbHVlLFxuICAgICAgICBkdWVEYXRlLnZhbHVlLFxuICAgICAgICBmYWxzZSxcbiAgICAgICAgcHJpb3JpdHksXG4gICAgICAgIHByb2plY3RcbiAgICAgICk7XG4gICAgICAvLyBwdXNoIHRvZG8gdG8gc3RvcmFnZVxuICAgICAgbW9kZWwudGFza3MucHVzaChuZXdUb2RvKTtcbiAgICAgIC8vIHJlbmRlciB0b2RvXG4gICAgICB0b2RvVmlldy5hZGRUb2RvVG9WaWV3KG5ld1RvZG8pO1xuICAgICAgLy8gY2xlYXIgZm9ybVxuICAgICAgdG9kb01vZGFsVmFsaWRhdGlvbi5jbGVhckZvcm0oZm9ybSk7XG4gICAgICAvLyBjbG9zZSBtb2RhbFxuICAgICAgY2xvc2UoKTtcbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IG9wZW4gPSAoKSA9PiB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcImhpZGVcIik7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcInNob3dcIik7XG4gIH07XG5cbiAgY29uc3QgY2xvc2UgPSAoKSA9PiB7XG4gICAgbW9kYWwuY2xhc3NMaXN0LnJlbW92ZShcInNob3dcIik7XG4gICAgbW9kYWwuY2xhc3NMaXN0LmFkZChcImhpZGVcIik7XG4gIH07XG59KSgpO1xuXG5jb25zdCB0b2RvTW9kYWxWYWxpZGF0aW9uID0gKGZ1bmN0aW9uICgpIHtcbiAgY29uc3QgaXNSZXF1aXJlZCA9ICh2YWx1ZSkgPT4ge1xuICAgIHJldHVybiB2YWx1ZSA9PT0gXCJcIjtcbiAgfTtcblxuICBjb25zdCBub3RJbkZ1dHVyZSA9ICh2YWx1ZSkgPT4ge1xuICAgIGNvbnN0IFt5ZWFyLCBtb250aCwgZGF5XSA9IHZhbHVlLnNwbGl0KFwiLVwiKTtcbiAgICBjb25zdCBjdXJyZW50RGF0ZSA9IG5ldyBEYXRlKCk7XG4gICAgY29uc3QgY0RheSA9IGN1cnJlbnREYXRlLmdldERhdGUoKTtcbiAgICBjb25zdCBjTW9udGggPSBjdXJyZW50RGF0ZS5nZXRNb250aCgpICsgMTtcbiAgICBjb25zdCBjWWVhciA9IGN1cnJlbnREYXRlLmdldEZ1bGxZZWFyKCk7XG4gICAgcmV0dXJuICEoK3llYXIgPj0gY1llYXIgJiYgK21vbnRoID49IGNNb250aCAmJiArZGF5ID49IGNEYXkpO1xuICB9O1xuXG4gIGNvbnN0IHNob3dUaXRsZUVycm9yID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRpdGxlRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICB9O1xuXG4gIGNvbnN0IHNob3dEZXNjRXJyb3IgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIuZGVzY0Vycm9yXCIpO1xuICAgIGVycm9yLnRleHRDb250ZW50ID0gbWVzc2FnZTtcbiAgfTtcbiAgY29uc3Qgc2hvd0RhdGVFcnJvciA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXRlRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBtZXNzYWdlO1xuICB9O1xuXG4gIGNvbnN0IHNob3dUaXRsZVN1Y2Nlc3MgPSAoaW5wdXQsIG1lc3NhZ2UpID0+IHtcbiAgICBjb25zdCBlcnJvciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoXCIudGl0bGVFcnJvclwiKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG5cbiAgY29uc3Qgc2hvd0Rlc2NTdWNjZXNzID0gKGlucHV0LCBtZXNzYWdlKSA9PiB7XG4gICAgY29uc3QgZXJyb3IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLmRlc2NFcnJvclwiKTtcbiAgICBlcnJvci50ZXh0Q29udGVudCA9IFwiXCI7XG4gIH07XG4gIGNvbnN0IHNob3dEYXRlU3VjY2VzcyA9IChpbnB1dCwgbWVzc2FnZSkgPT4ge1xuICAgIGNvbnN0IGVycm9yID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi5kYXRlRXJyb3JcIik7XG4gICAgZXJyb3IudGV4dENvbnRlbnQgPSBcIlwiO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrVGl0bGUgPSAoZWxlbWVudCkgPT4ge1xuICAgIGxldCB2YWxpZCA9IGZhbHNlO1xuICAgIGNvbnN0IHRpdGxlID0gZWxlbWVudC52YWx1ZS50cmltKCk7XG4gICAgaWYgKGlzUmVxdWlyZWQodGl0bGUpKSB7XG4gICAgICBzaG93VGl0bGVFcnJvcihlbGVtZW50LCBcIlRpdGxlIGNhbm5vdCBiZSBlbXB0eS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dUaXRsZVN1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjaGVja0Rlc2NyaXB0aW9uID0gKGVsZW1lbnQpID0+IHtcbiAgICBsZXQgdmFsaWQgPSBmYWxzZTtcbiAgICBjb25zdCBkZXNjcmlwdGlvbiA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKGRlc2NyaXB0aW9uKSkge1xuICAgICAgc2hvd0Rlc2NFcnJvcihlbGVtZW50LCBcIkRlc2NyaXB0aW9uIGNhbm5vdCBiZSBlbXB0eS5cIik7XG4gICAgfSBlbHNlIHtcbiAgICAgIHNob3dEZXNjU3VjY2VzcyhlbGVtZW50KTtcbiAgICAgIHZhbGlkID0gdHJ1ZTtcbiAgICB9XG4gICAgcmV0dXJuIHZhbGlkO1xuICB9O1xuXG4gIGNvbnN0IGNoZWNrRGF0ZSA9IChlbGVtZW50KSA9PiB7XG4gICAgbGV0IHZhbGlkID0gZmFsc2U7XG4gICAgY29uc3QgZHVlRGF0ZSA9IGVsZW1lbnQudmFsdWUudHJpbSgpO1xuICAgIGlmIChpc1JlcXVpcmVkKGR1ZURhdGUpKSB7XG4gICAgICBzaG93RGF0ZUVycm9yKGVsZW1lbnQsIFwiRHVlIGRhdGUgY2Fubm90IGJlIGVtcHR5XCIpO1xuICAgIH1cbiAgICBpZiAobm90SW5GdXR1cmUoZHVlRGF0ZSkpIHtcbiAgICAgIHNob3dEYXRlRXJyb3IoZWxlbWVudCwgXCJEdWUgZGF0ZSBtdXN0IGJlIGluIHRoZSBmdXR1cmUuXCIpO1xuICAgIH0gZWxzZSB7XG4gICAgICBzaG93RGF0ZVN1Y2Nlc3MoZWxlbWVudCk7XG4gICAgICB2YWxpZCA9IHRydWU7XG4gICAgfVxuICAgIHJldHVybiB2YWxpZDtcbiAgfTtcblxuICBjb25zdCBjbGVhckZvcm0gPSAoZm9ybSkgPT4ge1xuICAgIGZvcm1bXCJ0aXRsZVwiXS52YWx1ZSA9IFwiXCI7XG4gICAgZm9ybVtcImRlc2NyaXB0aW9uXCJdLnZhbHVlID0gXCJcIjtcbiAgICBmb3JtW1wiZHVlRGF0ZVwiXS52YWx1ZSA9IFwiXCI7XG4gIH07XG4gIHJldHVybiB7IGNoZWNrVGl0bGUsIGNoZWNrRGVzY3JpcHRpb24sIGNoZWNrRGF0ZSwgY2xlYXJGb3JtIH07XG59KSgpO1xuXG5jb25zdCB0b2RvVmlldyA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpO1xuXG4gIGNvbnN0IGFkZFRvZG9Ub1ZpZXcgPSAodG9kbykgPT4ge1xuICAgIGNvbnN0IGZpcnN0Q2hpbGQgPSB0b2RvQ29udGFpbmVyLmZpcnN0RWxlbWVudENoaWxkO1xuICAgIGZpcnN0Q2hpbGQuaW5zZXJ0QWRqYWNlbnRFbGVtZW50KFwiYmVmb3JlYmVnaW5cIiwgY3JlYXRlVG9kb0NvbXBvbmVudCh0b2RvKSk7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlVG9kb0NvbXBvbmVudCA9ICh0b2RvKSA9PiB7XG4gICAgY29uc3QgaHRtbCA9IGBcbiAgICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMSBweS0xIGQtZmxleCBqdXN0aWZ5LWNvbnRlbnQtbWQtZW5kIGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuICA+XG4gICAgPGlucHV0IHR5cGU9XCJjaGVja2JveFwiIGNsYXNzPVwidGFzay1jaGVja2JveFwiICR7XG4gICAgICB0b2RvLmNvbXBsZXRlZCA/IFwiY2hlY2tlZFwiIDogXCJcIlxuICAgIH0vPlxuICA8L2Rpdj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiY29sLW1kLTYgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LWNvbnRlbnQtbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlclwiXG4gID5cbiAgICAke3RvZG8uY29tcGxldGVkID8gYDxkZWw+JHt0b2RvLnRpdGxlfTwvZGVsPmAgOiBgJHt0b2RvLnRpdGxlfWB9XG4gIDwvZGl2PlxuICAgIDxkaXZcbiAgICAgICAgY2xhc3M9XCJjb2wtbWQtMSBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktbWQtc3RhcnQganVzdGlmeS1jb250ZW50LWNlbnRlciB0YXNrLWFycm93XCJcbiAgICAgICAgID5cbiAgICAgICAgPGltZ1xuICAgICAgICAgY2xhc3M9XCJ0YXNrLWFycm93LWltYWdlLWRvd25cIlxuICAgICAgICAgd2lkdGg9XCIxNlwiXG4gICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgICBzcmM9XCIuLi9pY29ucy9jYXJldC1kb3duLnN2Z1wiXG4gICAgICAgICAvPlxuICAgIDwvZGl2PlxuICA8ZGl2XG4gICAgY2xhc3M9XCJjb2wtbWQtMiBkLWZsZXggYWxpZ24taXRlbXMtY2VudGVyIGp1c3RpZnktY29udGVudC1tZC1zdGFydCBqdXN0aWZ5LWNvbnRlbnQtY2VudGVyXCJcbiAgPlxuICAgICR7dG9kby5kdWVEYXRlfVxuICA8L2Rpdj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiY29sLW1kLTEgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LW1kLXN0YXJ0IGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuICA+XG4gICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5hdi1saW5rIGxpbmstZGFya1wiPlxuICAgICAgPGltZ1xuICAgICAgICBjbGFzcz1cIlwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL3BlbmNpbC1zcXVhcmUuc3ZnXCJcbiAgICAgIC8+XG4gICAgPC9hPlxuICA8L2Rpdj5cbiAgPGRpdlxuICAgIGNsYXNzPVwiY29sLW1kLTEgZC1mbGV4IGFsaWduLWl0ZW1zLWNlbnRlciBqdXN0aWZ5LW1kLXN0YXJ0IGp1c3RpZnktY29udGVudC1jZW50ZXJcIlxuICA+XG4gICAgPGEgaHJlZj1cIiNcIiBjbGFzcz1cIm5hdi1saW5rIGxpbmstZGFya1wiPlxuICAgICAgPGltZ1xuICAgICAgICBjbGFzcz1cIlwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL3RyYXNoLnN2Z1wiXG4gICAgICAvPlxuICAgIDwvYT5cbiAgPC9kaXY+YDtcbiAgICBjb25zdCBuZXdFbGVtZW50ID0gZG9jdW1lbnQuY3JlYXRlRWxlbWVudChcImRpdlwiKTtcbiAgICBuZXdFbGVtZW50LmNsYXNzTGlzdCA9IFwicm93IG0tNCBwLTIgYmctd2hpdGUgcm91bmRlZC0zIGJvcmRlci1ib3R0b21cIjtcbiAgICBuZXdFbGVtZW50LmlubmVySFRNTCA9IGh0bWw7XG4gICAgcmV0dXJuIG5ld0VsZW1lbnQ7XG4gIH07XG5cbiAgcmV0dXJuIHsgYWRkVG9kb1RvVmlldyB9O1xufSkoKTtcblxuY29uc3QgdGFza3NMaXN0ZW5lciA9IChmdW5jdGlvbiAoKSB7XG4gIGNvbnN0IHRvZG9NYWluQ29udGFpbmVyID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcihcIi50b2RvLW1haW4tY29udGFpbmVyXCIpO1xuICAvLyAgIGNvbnN0IHRvZG9Db250YWluZXIgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKFwiLnRvZG8tY29udGFpbmVyXCIpO1xuXG4gIHRvZG9NYWluQ29udGFpbmVyLmFkZEV2ZW50TGlzdGVuZXIoXCJjbGlja1wiLCAoZXZlbnQpID0+IHtcbiAgICBjb25zdCBjaGVja2JveENvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWNoZWNrYm94XCIpO1xuICAgIGNvbnN0IGFycm93Q29udGFpbmVyID1cbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWFycm93LWltYWdlLWRvd25cIikgfHxcbiAgICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWFycm93LWltYWdlLXVwXCIpO1xuICAgIGNvbnN0IGVkaXRDb250YWluZXIgPSBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1lZGl0XCIpO1xuICAgIGNvbnN0IGRlbGV0ZUNvbnRhaW5lciA9IGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWRlbGV0ZVwiKTtcblxuICAgIGlmIChjaGVja2JveENvbnRhaW5lcikge1xuICAgICAgY29uc3Qgcm93ID0gQXJyYXkuZnJvbShldmVudC50YXJnZXQucGFyZW50Tm9kZS5wYXJlbnROb2RlLmNoaWxkTm9kZXMpO1xuICAgICAgY29uc3QgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgY29uc3QgZGF0ZSA9IHJvd1s3XS50ZXh0Q29udGVudC50cmltKCk7XG5cbiAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICh0YXNrKSA9PiB0YXNrLnRpdGxlID09PSB0aXRsZSAmJiB0YXNrLmR1ZURhdGUgPT09IGRhdGVcbiAgICAgICk7XG4gICAgICB0YXNrWzBdLmNvbXBsZXRlZCA9ICF0YXNrWzBdLmNvbXBsZXRlZDtcbiAgICAgIGlmICh0YXNrWzBdLmNvbXBsZXRlZCkge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gYDxkZWw+JHtyb3dbM10uaW5uZXJIVE1MfTwvZGVsPmA7XG4gICAgICB9IGVsc2Uge1xuICAgICAgICByb3dbM10uaW5uZXJIVE1MID0gcm93WzNdLmlubmVySFRNTC5yZXBsYWNlKC8oPChbXj5dKyk+KS9naSwgXCJcIik7XG4gICAgICB9XG4gICAgfVxuXG4gICAgaWYgKGFycm93Q29udGFpbmVyKSB7XG4gICAgICBsZXQgdGl0bGU7XG4gICAgICBsZXQgZGF0ZTtcbiAgICAgIGxldCBkaXY7XG4gICAgICBsZXQgYXJyb3c7XG5cbiAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKFwidGFzay1hcnJvdy1pbWFnZS1kb3duXCIpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgbGV0IGFycm93SW1hZ2VEaXYgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgZGl2ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgYXJyb3dJbWFnZURpdi5pbm5lckhUTUwgPSB1cEFycm93SHRtbCgpO1xuXG4gICAgICAgIGNvbnN0IHRhc2sgPSBtb2RlbC50YXNrcy5maWx0ZXIoXG4gICAgICAgICAgKHRhc2spID0+IHRhc2sudGl0bGUgPT09IHRpdGxlICYmIHRhc2suZHVlRGF0ZSA9PT0gZGF0ZVxuICAgICAgICApO1xuICAgICAgICBjb25zdCBkZXNjRGl2ID0gY3JlYXRlRGVzY3JpcHRpb25EaXYodGFzayk7XG4gICAgICAgIGRpdi5pbnNlcnRBZGphY2VudEVsZW1lbnQoXCJhZnRlcmVuZFwiLCBkZXNjRGl2KTtcbiAgICAgIH1cblxuICAgICAgaWYgKGV2ZW50LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoXCJ0YXNrLWFycm93LWltYWdlLXVwXCIpKSB7XG4gICAgICAgIGNvbnN0IHJvdyA9IEFycmF5LmZyb20oZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZS5jaGlsZE5vZGVzKTtcbiAgICAgICAgbGV0IGFycm93SW1hZ2VEaXYgPSBldmVudC50YXJnZXQucGFyZW50Tm9kZTtcbiAgICAgICAgZGl2ID0gZXZlbnQudGFyZ2V0LnBhcmVudE5vZGUucGFyZW50Tm9kZTtcbiAgICAgICAgdGl0bGUgPSByb3dbM10udGV4dENvbnRlbnQudHJpbSgpO1xuICAgICAgICBkYXRlID0gcm93WzddLnRleHRDb250ZW50LnRyaW0oKTtcbiAgICAgICAgYXJyb3dJbWFnZURpdi5pbm5lckhUTUwgPSBkb3duQXJyb3dIdG1sKCk7XG5cbiAgICAgICAgZGl2Lm5leHRFbGVtZW50U2libGluZy5yZW1vdmUoKTtcbiAgICAgIH1cbiAgICB9XG4gIH0pO1xuXG4gIGNvbnN0IHVwQXJyb3dIdG1sID0gKCkgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGltZ1xuICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtdXBcIlxuICAgICAgICB3aWR0aD1cIjE2XCJcbiAgICAgICAgaGVpZ2h0PVwiMTZcIlxuICAgICAgICBzcmM9XCIuLi9pY29ucy9jYXJldC11cC5zdmdcIlxuICAgIC8+YDtcbiAgICByZXR1cm4gaHRtbDtcbiAgfTtcblxuICBjb25zdCBkb3duQXJyb3dIdG1sID0gKCkgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGltZ1xuICAgICAgICBjbGFzcz1cInRhc2stYXJyb3ctaW1hZ2UtZG93blwiXG4gICAgICAgIHdpZHRoPVwiMTZcIlxuICAgICAgICBoZWlnaHQ9XCIxNlwiXG4gICAgICAgIHNyYz1cIi4uL2ljb25zL2NhcmV0LWRvd24uc3ZnXCJcbiAgICAvPmA7XG4gICAgcmV0dXJuIGh0bWw7XG4gIH07XG5cbiAgY29uc3QgY3JlYXRlRGVzY3JpcHRpb25EaXYgPSAodGFzaykgPT4ge1xuICAgIGNvbnN0IGh0bWwgPSBgXG4gICAgPGRpdiBjbGFzcz1cImNvbnRhaW5lci1mbHVpZCBweS0xXCI+XG4gICAgICA8aDYgY2xhc3M9XCJmdy1ib2xkXCI+RGVzY3JpcHRpb248L2g2PlxuICAgICAgPHAgY2xhc3M9XCJcIj5cbiAgICAgICR7dGFza1swXS5kZXNjcmlwdGlvbn1cbiAgICAgIDwvcD5cbiAgPC9kaXY+YDtcblxuICAgIGNvbnN0IGRldGFpbHNEaXYgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KFwiZGl2XCIpO1xuICAgIGRldGFpbHNEaXYuY2xhc3NMaXN0ID1cbiAgICAgIFwibW9kYWwtYm9keSBteC01IG15LTMgYmctbGlnaHQgcm91bmRlZC0zIGJvcmRlciBib3JkZXItc2Vjb25kYXJ5IHAtMyByb3VuZGVkLTMgZGVzY3JpcHRpb24tZGl2XCI7XG4gICAgZGV0YWlsc0Rpdi5pbm5lckhUTUwgPSBodG1sO1xuICAgIHJldHVybiBkZXRhaWxzRGl2O1xuICB9O1xuXG4gIHJldHVybiB7fTtcbn0pKCk7XG5cbm1vZGVsLnByb2plY3RzLmZvckVhY2goKHByb2plY3QpID0+IHByb2plY3RNZW51Vmlldy5hZGRQcm9qZWN0VG9WaWV3KHByb2plY3QpKTtcbm1vZGVsLnRhc2tzLmZvckVhY2goKHRhc2spID0+IHRvZG9WaWV3LmFkZFRvZG9Ub1ZpZXcodGFzaykpO1xuIl0sIm5hbWVzIjpbIlRvZG9UYXNrIiwidGl0bGUiLCJkZXNjcmlwdGlvbiIsImR1ZURhdGUiLCJjb21wbGV0ZWQiLCJwcmlvcml0eSIsInByb2plY3QiLCJ0YXNrIiwiZHVlIiwiUHJvamVjdCIsIm1vZGVsIiwidGFza3MiLCJwcm9qZWN0cyIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImFkZEV2ZW50TGlzdGVuZXIiLCJldmVudCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJmb3JFYWNoIiwiYnV0dG9uIiwiY2xhc3NMaXN0IiwicmVtb3ZlIiwidGFyZ2V0IiwiY2xvc2VzdCIsImFkZCIsIm1vZGFsIiwib3Blbk1vZGFsIiwiY2xvc2VNb2RhbCIsInN1Ym1pdCIsImZvcm0iLCJnZXRFbGVtZW50QnlJZCIsInNob3dNb2RhbCIsImhpZGVNb2RhbCIsInByZXZlbnREZWZhdWx0IiwicHJvamVjdE1vZGFsVmFsaWRhdGlvbiIsImNoZWNrVGl0bGUiLCJuZXdQcm9qZWN0IiwidmFsdWUiLCJwdXNoIiwicHJvamVjdE1lbnVWaWV3IiwiYWRkUHJvamVjdFRvVmlldyIsImNsZWFyRm9ybSIsImVsZW1lbnQiLCJ2YWxpZCIsInRyaW0iLCJwcm9qZWN0TWVudSIsImZvcm1Qcm9qZWN0TGlzdCIsImFwcGVuZENoaWxkIiwiaHRtbCIsIm5ld0VsZW1lbnQiLCJjcmVhdGVFbGVtZW50IiwiaW5uZXJIVE1MIiwiY3JlYXRlUHJvamVjdENvbXBvbmVudCIsImFkZFByb2plY3RUb1RvZG9TZWxlY3RvckZvcm0iLCJ0b2RvTW9kYWxWYWxpZGF0aW9uIiwib3BlbiIsImNsb3NlIiwiZm9ybVByb2plY3RTZWxlY3QiLCJvcHRpb25zIiwic2VsZWN0ZWRJbmRleCIsInRpdGxlVmFsaWQiLCJkZXNjcmlwdGlvblZhbGlkIiwiY2hlY2tEZXNjcmlwdGlvbiIsImRhdGVWYWxpZCIsImNoZWNrRGF0ZSIsIm5ld1RvZG8iLCJ0b2RvVmlldyIsImFkZFRvZG9Ub1ZpZXciLCJpc1JlcXVpcmVkIiwic2hvd0RhdGVFcnJvciIsImlucHV0IiwibWVzc2FnZSIsInRleHRDb250ZW50IiwieWVhciIsIm1vbnRoIiwiZGF5Iiwic3BsaXQiLCJjdXJyZW50RGF0ZSIsIkRhdGUiLCJjRGF5IiwiZ2V0RGF0ZSIsImNNb250aCIsImdldE1vbnRoIiwiZ2V0RnVsbFllYXIiLCJub3RJbkZ1dHVyZSIsInRvZG9Db250YWluZXIiLCJ0b2RvIiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJpbnNlcnRBZGphY2VudEVsZW1lbnQiLCJjcmVhdGVUb2RvQ29tcG9uZW50IiwiY2hlY2tib3hDb250YWluZXIiLCJjb250YWlucyIsImFycm93Q29udGFpbmVyIiwicm93IiwicGFyZW50Tm9kZSIsImNoaWxkTm9kZXMiLCJkYXRlIiwiZmlsdGVyIiwicmVwbGFjZSIsImRpdiIsImFycm93SW1hZ2VEaXYiLCJ1cEFycm93SHRtbCIsImRlc2NEaXYiLCJjcmVhdGVEZXNjcmlwdGlvbkRpdiIsImRvd25BcnJvd0h0bWwiLCJuZXh0RWxlbWVudFNpYmxpbmciLCJkZXRhaWxzRGl2Il0sInNvdXJjZVJvb3QiOiIifQ==